var ik=Object.defineProperty;var rk=(e,t,n)=>t in e?ik(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var N=(e,t,n)=>(rk(e,typeof t!="symbol"?t+"":t,n),n);function sk(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ok(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xT={exports:{}},df={},TT={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cc=Symbol.for("react.element"),ak=Symbol.for("react.portal"),lk=Symbol.for("react.fragment"),ck=Symbol.for("react.strict_mode"),uk=Symbol.for("react.profiler"),hk=Symbol.for("react.provider"),dk=Symbol.for("react.context"),fk=Symbol.for("react.forward_ref"),pk=Symbol.for("react.suspense"),gk=Symbol.for("react.memo"),mk=Symbol.for("react.lazy"),jv=Symbol.iterator;function yk(e){return e===null||typeof e!="object"?null:(e=jv&&e[jv]||e["@@iterator"],typeof e=="function"?e:null)}var IT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bT=Object.assign,ST={};function ra(e,t,n){this.props=e,this.context=t,this.refs=ST,this.updater=n||IT}ra.prototype.isReactComponent={};ra.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ra.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AT(){}AT.prototype=ra.prototype;function qy(e,t,n){this.props=e,this.context=t,this.refs=ST,this.updater=n||IT}var Ky=qy.prototype=new AT;Ky.constructor=qy;bT(Ky,ra.prototype);Ky.isPureReactComponent=!0;var Uv=Array.isArray,PT=Object.prototype.hasOwnProperty,Gy={current:null},CT={key:!0,ref:!0,__self:!0,__source:!0};function RT(e,t,n){var i,r={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)PT.call(t,i)&&!CT.hasOwnProperty(i)&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Cc,type:e,key:s,ref:o,props:r,_owner:Gy.current}}function _k(e,t){return{$$typeof:Cc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cc}function vk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wv=/\/+/g;function bp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vk(""+e.key):t.toString(36)}function nh(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Cc:case ak:o=!0}}if(o)return o=e,r=r(o),e=i===""?"."+bp(o,0):i,Uv(r)?(n="",e!=null&&(n=e.replace(Wv,"$&/")+"/"),nh(r,t,n,"",function(c){return c})):r!=null&&(Qy(r)&&(r=_k(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Wv,"$&/")+"/")+e)),t.push(r)),1;if(o=0,i=i===""?".":i+":",Uv(e))for(var a=0;a<e.length;a++){s=e[a];var l=i+bp(s,a);o+=nh(s,t,n,l,r)}else if(l=yk(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=i+bp(s,a++),o+=nh(s,t,n,l,r);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function cu(e,t,n){if(e==null)return e;var i=[],r=0;return nh(e,i,"","",function(s){return t.call(n,s,r++)}),i}function wk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ue={current:null},ih={transition:null},Ek={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ih,ReactCurrentOwner:Gy};st.Children={map:cu,forEach:function(e,t,n){cu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cu(e,function(){t++}),t},toArray:function(e){return cu(e,function(t){return t})||[]},only:function(e){if(!Qy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=ra;st.Fragment=lk;st.Profiler=uk;st.PureComponent=qy;st.StrictMode=ck;st.Suspense=pk;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ek;st.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=bT({},e.props),r=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Gy.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)PT.call(t,l)&&!CT.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Cc,type:e.type,key:r,ref:s,props:i,_owner:o}};st.createContext=function(e){return e={$$typeof:dk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hk,_context:e},e.Consumer=e};st.createElement=RT;st.createFactory=function(e){var t=RT.bind(null,e);return t.type=e,t};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:fk,render:e}};st.isValidElement=Qy;st.lazy=function(e){return{$$typeof:mk,_payload:{_status:-1,_result:e},_init:wk}};st.memo=function(e,t){return{$$typeof:gk,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=ih.transition;ih.transition={};try{e()}finally{ih.transition=t}};st.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};st.useCallback=function(e,t){return Ue.current.useCallback(e,t)};st.useContext=function(e){return Ue.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return Ue.current.useDeferredValue(e)};st.useEffect=function(e,t){return Ue.current.useEffect(e,t)};st.useId=function(){return Ue.current.useId()};st.useImperativeHandle=function(e,t,n){return Ue.current.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return Ue.current.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return Ue.current.useLayoutEffect(e,t)};st.useMemo=function(e,t){return Ue.current.useMemo(e,t)};st.useReducer=function(e,t,n){return Ue.current.useReducer(e,t,n)};st.useRef=function(e){return Ue.current.useRef(e)};st.useState=function(e){return Ue.current.useState(e)};st.useSyncExternalStore=function(e,t,n){return Ue.current.useSyncExternalStore(e,t,n)};st.useTransition=function(){return Ue.current.useTransition()};st.version="18.2.0";TT.exports=st;var C=TT.exports;const gt=ok(C),xk=sk({__proto__:null,default:gt},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk=C,Ik=Symbol.for("react.element"),bk=Symbol.for("react.fragment"),Sk=Object.prototype.hasOwnProperty,Ak=Tk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pk={key:!0,ref:!0,__self:!0,__source:!0};function kT(e,t,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)Sk.call(t,i)&&!Pk.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:Ik,type:e,key:s,ref:o,props:r,_owner:Ak.current}}df.Fragment=bk;df.jsx=kT;df.jsxs=kT;xT.exports=df;var R=xT.exports,Lg={},DT={exports:{}},pn={},MT={exports:{}},VT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,z){var K=V.length;V.push(z);t:for(;0<K;){var at=K-1>>>1,It=V[at];if(0<r(It,z))V[at]=z,V[K]=It,K=at;else break t}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var z=V[0],K=V.pop();if(K!==z){V[0]=K;t:for(var at=0,It=V.length,jn=It>>>1;at<jn;){var rn=2*(at+1)-1,ai=V[rn],sn=rn+1,lu=V[sn];if(0>r(ai,K))sn<It&&0>r(lu,ai)?(V[at]=lu,V[sn]=K,at=sn):(V[at]=ai,V[rn]=K,at=rn);else if(sn<It&&0>r(lu,K))V[at]=lu,V[sn]=K,at=sn;else break t}}return z}function r(V,z){var K=V.sortIndex-z.sortIndex;return K!==0?K:V.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(V){for(var z=n(c);z!==null;){if(z.callback===null)i(c);else if(z.startTime<=V)i(c),z.sortIndex=z.expirationTime,t(l,z);else break;z=n(c)}}function w(V){if(m=!1,v(V),!p)if(n(l)!==null)p=!0,G(E);else{var z=n(c);z!==null&&tt(w,z.startTime-V)}}function E(V,z){p=!1,m&&(m=!1,g(I),I=-1),f=!0;var K=d;try{for(v(z),h=n(l);h!==null&&(!(h.expirationTime>z)||V&&!j());){var at=h.callback;if(typeof at=="function"){h.callback=null,d=h.priorityLevel;var It=at(h.expirationTime<=z);z=e.unstable_now(),typeof It=="function"?h.callback=It:h===n(l)&&i(l),v(z)}else i(l);h=n(l)}if(h!==null)var jn=!0;else{var rn=n(c);rn!==null&&tt(w,rn.startTime-z),jn=!1}return jn}finally{h=null,d=K,f=!1}}var x=!1,T=null,I=-1,k=5,M=-1;function j(){return!(e.unstable_now()-M<k)}function H(){if(T!==null){var V=e.unstable_now();M=V;var z=!0;try{z=T(!0,V)}finally{z?q():(x=!1,T=null)}}else x=!1}var q;if(typeof y=="function")q=function(){y(H)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,Y=et.port2;et.port1.onmessage=H,q=function(){Y.postMessage(null)}}else q=function(){_(H,0)};function G(V){T=V,x||(x=!0,q())}function tt(V,z){I=_(function(){V(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,G(E))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(V){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var K=d;d=z;try{return V()}finally{d=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=d;d=V;try{return z()}finally{d=K}},e.unstable_scheduleCallback=function(V,z,K){var at=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?at+K:at):K=at,V){case 1:var It=-1;break;case 2:It=250;break;case 5:It=1073741823;break;case 4:It=1e4;break;default:It=5e3}return It=K+It,V={id:u++,callback:z,priorityLevel:V,startTime:K,expirationTime:It,sortIndex:-1},K>at?(V.sortIndex=K,t(c,V),n(l)===null&&V===n(c)&&(m?(g(I),I=-1):m=!0,tt(w,K-at))):(V.sortIndex=It,t(l,V),p||f||(p=!0,G(E))),V},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(V){var z=d;return function(){var K=d;d=z;try{return V.apply(this,arguments)}finally{d=K}}}})(VT);MT.exports=VT;var Ck=MT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT=C,hn=Ck;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OT=new Set,Cl={};function Ls(e,t){Vo(e,t),Vo(e+"Capture",t)}function Vo(e,t){for(Cl[e]=t,e=0;e<t.length;e++)OT.add(t[e])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fg=Object.prototype.hasOwnProperty,Rk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hv={},qv={};function kk(e){return Fg.call(qv,e)?!0:Fg.call(Hv,e)?!1:Rk.test(e)?qv[e]=!0:(Hv[e]=!0,!1)}function Dk(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mk(e,t,n,i){if(t===null||typeof t>"u"||Dk(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,n,i,r,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xe[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xe[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xe[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xe[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xe[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xe[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xe[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xe[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xe[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yy=/[\-:]([a-z])/g;function Xy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yy,Xy);xe[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yy,Xy);xe[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yy,Xy);xe[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xe[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});xe.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xe[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jy(e,t,n,i){var r=xe.hasOwnProperty(t)?xe[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mk(t,n,r,i)&&(n=null),i||r===null?kk(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Ri=NT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uu=Symbol.for("react.element"),lo=Symbol.for("react.portal"),co=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),LT=Symbol.for("react.provider"),FT=Symbol.for("react.context"),t_=Symbol.for("react.forward_ref"),$g=Symbol.for("react.suspense"),zg=Symbol.for("react.suspense_list"),e_=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),BT=Symbol.for("react.offscreen"),Kv=Symbol.iterator;function ya(e){return e===null||typeof e!="object"?null:(e=Kv&&e[Kv]||e["@@iterator"],typeof e=="function"?e:null)}var $t=Object.assign,Sp;function La(e){if(Sp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sp=t&&t[1]||""}return`
`+Sp+e}var Ap=!1;function Pp(e,t){if(!e||Ap)return"";Ap=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ap=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?La(e):""}function Vk(e){switch(e.tag){case 5:return La(e.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 2:case 15:return e=Pp(e.type,!1),e;case 11:return e=Pp(e.type.render,!1),e;case 1:return e=Pp(e.type,!0),e;default:return""}}function jg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case co:return"Fragment";case lo:return"Portal";case Bg:return"Profiler";case Zy:return"StrictMode";case $g:return"Suspense";case zg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case FT:return(e.displayName||"Context")+".Consumer";case LT:return(e._context.displayName||"Context")+".Provider";case t_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case e_:return t=e.displayName||null,t!==null?t:jg(e.type)||"Memo";case zi:t=e._payload,e=e._init;try{return jg(e(t))}catch{}}return null}function Nk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jg(t);case 8:return t===Zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $T(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ok(e){var t=$T(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hu(e){e._valueTracker||(e._valueTracker=Ok(e))}function zT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=$T(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Oh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ug(e,t){var n=t.checked;return $t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gv(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=pr(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jT(e,t){t=t.checked,t!=null&&Jy(e,"checked",t,!1)}function Wg(e,t){jT(e,t);var n=pr(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hg(e,t.type,pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hg(e,t,n){(t!=="number"||Oh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fa=Array.isArray;function xo(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+pr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function qg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return $t({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Fa(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:pr(n)}}function UT(e,t){var n=pr(t.value),i=pr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Xv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function WT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?WT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var du,HT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(du=du||document.createElement("div"),du.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=du.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lk=["Webkit","ms","Moz","O"];Object.keys(il).forEach(function(e){Lk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),il[t]=il[e]})});function qT(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||il.hasOwnProperty(e)&&il[e]?(""+t).trim():t+"px"}function KT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=qT(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var Fk=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gg(e,t){if(t){if(Fk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Qg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=null;function n_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xg=null,To=null,Io=null;function Jv(e){if(e=Dc(e)){if(typeof Xg!="function")throw Error(D(280));var t=e.stateNode;t&&(t=yf(t),Xg(e.stateNode,e.type,t))}}function GT(e){To?Io?Io.push(e):Io=[e]:To=e}function QT(){if(To){var e=To,t=Io;if(Io=To=null,Jv(e),t)for(e=0;e<t.length;e++)Jv(t[e])}}function YT(e,t){return e(t)}function XT(){}var Cp=!1;function JT(e,t,n){if(Cp)return e(t,n);Cp=!0;try{return YT(e,t,n)}finally{Cp=!1,(To!==null||Io!==null)&&(XT(),QT())}}function kl(e,t){var n=e.stateNode;if(n===null)return null;var i=yf(n);if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Jg=!1;if(Ii)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){Jg=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{Jg=!1}function Bk(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var rl=!1,Lh=null,Fh=!1,Zg=null,$k={onError:function(e){rl=!0,Lh=e}};function zk(e,t,n,i,r,s,o,a,l){rl=!1,Lh=null,Bk.apply($k,arguments)}function jk(e,t,n,i,r,s,o,a,l){if(zk.apply(this,arguments),rl){if(rl){var c=Lh;rl=!1,Lh=null}else throw Error(D(198));Fh||(Fh=!0,Zg=c)}}function Fs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ZT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zv(e){if(Fs(e)!==e)throw Error(D(188))}function Uk(e){var t=e.alternate;if(!t){if(t=Fs(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Zv(r),e;if(s===i)return Zv(r),t;s=s.sibling}throw Error(D(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==i)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function tI(e){return e=Uk(e),e!==null?eI(e):null}function eI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eI(e);if(t!==null)return t;e=e.sibling}return null}var nI=hn.unstable_scheduleCallback,tw=hn.unstable_cancelCallback,Wk=hn.unstable_shouldYield,Hk=hn.unstable_requestPaint,Kt=hn.unstable_now,qk=hn.unstable_getCurrentPriorityLevel,i_=hn.unstable_ImmediatePriority,iI=hn.unstable_UserBlockingPriority,Bh=hn.unstable_NormalPriority,Kk=hn.unstable_LowPriority,rI=hn.unstable_IdlePriority,ff=null,ti=null;function Gk(e){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(ff,e,void 0,(e.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:Xk,Qk=Math.log,Yk=Math.LN2;function Xk(e){return e>>>=0,e===0?32:31-(Qk(e)/Yk|0)|0}var fu=64,pu=4194304;function Ba(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $h(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Ba(a):(s&=o,s!==0&&(i=Ba(s)))}else o=n&~r,o!==0?i=Ba(o):s!==0&&(i=Ba(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Vn(t),r=1<<n,i|=e[n],t&=~r;return i}function Jk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zk(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Vn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=Jk(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function tm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sI(){var e=fu;return fu<<=1,!(fu&4194240)&&(fu=64),e}function Rp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vn(t),e[t]=n}function tD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Vn(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}function r_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Vn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function oI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aI,s_,lI,cI,uI,em=!1,gu=[],nr=null,ir=null,rr=null,Dl=new Map,Ml=new Map,Ui=[],eD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ew(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Dl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(t.pointerId)}}function va(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Dc(t),t!==null&&s_(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function nD(e,t,n,i,r){switch(t){case"focusin":return nr=va(nr,e,t,n,i,r),!0;case"dragenter":return ir=va(ir,e,t,n,i,r),!0;case"mouseover":return rr=va(rr,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Dl.set(s,va(Dl.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ml.set(s,va(Ml.get(s)||null,e,t,n,i,r)),!0}return!1}function hI(e){var t=ns(e.target);if(t!==null){var n=Fs(t);if(n!==null){if(t=n.tag,t===13){if(t=ZT(n),t!==null){e.blockedOn=t,uI(e.priority,function(){lI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Yg=i,n.target.dispatchEvent(i),Yg=null}else return t=Dc(n),t!==null&&s_(t),e.blockedOn=n,!1;t.shift()}return!0}function nw(e,t,n){rh(e)&&n.delete(t)}function iD(){em=!1,nr!==null&&rh(nr)&&(nr=null),ir!==null&&rh(ir)&&(ir=null),rr!==null&&rh(rr)&&(rr=null),Dl.forEach(nw),Ml.forEach(nw)}function wa(e,t){e.blockedOn===t&&(e.blockedOn=null,em||(em=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,iD)))}function Vl(e){function t(r){return wa(r,e)}if(0<gu.length){wa(gu[0],e);for(var n=1;n<gu.length;n++){var i=gu[n];i.blockedOn===e&&(i.blockedOn=null)}}for(nr!==null&&wa(nr,e),ir!==null&&wa(ir,e),rr!==null&&wa(rr,e),Dl.forEach(t),Ml.forEach(t),n=0;n<Ui.length;n++)i=Ui[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ui.length&&(n=Ui[0],n.blockedOn===null);)hI(n),n.blockedOn===null&&Ui.shift()}var bo=Ri.ReactCurrentBatchConfig,zh=!0;function rD(e,t,n,i){var r=yt,s=bo.transition;bo.transition=null;try{yt=1,o_(e,t,n,i)}finally{yt=r,bo.transition=s}}function sD(e,t,n,i){var r=yt,s=bo.transition;bo.transition=null;try{yt=4,o_(e,t,n,i)}finally{yt=r,bo.transition=s}}function o_(e,t,n,i){if(zh){var r=nm(e,t,n,i);if(r===null)$p(e,t,i,jh,n),ew(e,i);else if(nD(r,e,t,n,i))i.stopPropagation();else if(ew(e,i),t&4&&-1<eD.indexOf(e)){for(;r!==null;){var s=Dc(r);if(s!==null&&aI(s),s=nm(e,t,n,i),s===null&&$p(e,t,i,jh,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else $p(e,t,i,null,n)}}var jh=null;function nm(e,t,n,i){if(jh=null,e=n_(i),e=ns(e),e!==null)if(t=Fs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ZT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jh=e,null}function dI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qk()){case i_:return 1;case iI:return 4;case Bh:case Kk:return 16;case rI:return 536870912;default:return 16}default:return 16}}var Ki=null,a_=null,sh=null;function fI(){if(sh)return sh;var e,t=a_,n=t.length,i,r="value"in Ki?Ki.value:Ki.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return sh=r.slice(e,1<i?1-i:void 0)}function oh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mu(){return!0}function iw(){return!1}function gn(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mu:iw,this.isPropagationStopped=iw,this}return $t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mu)},persist:function(){},isPersistent:mu}),t}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l_=gn(sa),kc=$t({},sa,{view:0,detail:0}),oD=gn(kc),kp,Dp,Ea,pf=$t({},kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ea&&(Ea&&e.type==="mousemove"?(kp=e.screenX-Ea.screenX,Dp=e.screenY-Ea.screenY):Dp=kp=0,Ea=e),kp)},movementY:function(e){return"movementY"in e?e.movementY:Dp}}),rw=gn(pf),aD=$t({},pf,{dataTransfer:0}),lD=gn(aD),cD=$t({},kc,{relatedTarget:0}),Mp=gn(cD),uD=$t({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),hD=gn(uD),dD=$t({},sa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fD=gn(dD),pD=$t({},sa,{data:0}),sw=gn(pD),gD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _D(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yD[e])?!!t[e]:!1}function c_(){return _D}var vD=$t({},kc,{key:function(e){if(e.key){var t=gD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c_,charCode:function(e){return e.type==="keypress"?oh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wD=gn(vD),ED=$t({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ow=gn(ED),xD=$t({},kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c_}),TD=gn(xD),ID=$t({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),bD=gn(ID),SD=$t({},pf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AD=gn(SD),PD=[9,13,27,32],u_=Ii&&"CompositionEvent"in window,sl=null;Ii&&"documentMode"in document&&(sl=document.documentMode);var CD=Ii&&"TextEvent"in window&&!sl,pI=Ii&&(!u_||sl&&8<sl&&11>=sl),aw=String.fromCharCode(32),lw=!1;function gI(e,t){switch(e){case"keyup":return PD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var uo=!1;function RD(e,t){switch(e){case"compositionend":return mI(t);case"keypress":return t.which!==32?null:(lw=!0,aw);case"textInput":return e=t.data,e===aw&&lw?null:e;default:return null}}function kD(e,t){if(uo)return e==="compositionend"||!u_&&gI(e,t)?(e=fI(),sh=a_=Ki=null,uo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pI&&t.locale!=="ko"?null:t.data;default:return null}}var DD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DD[e.type]:t==="textarea"}function yI(e,t,n,i){GT(i),t=Uh(t,"onChange"),0<t.length&&(n=new l_("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ol=null,Nl=null;function MD(e){PI(e,0)}function gf(e){var t=po(e);if(zT(t))return e}function VD(e,t){if(e==="change")return t}var _I=!1;if(Ii){var Vp;if(Ii){var Np="oninput"in document;if(!Np){var uw=document.createElement("div");uw.setAttribute("oninput","return;"),Np=typeof uw.oninput=="function"}Vp=Np}else Vp=!1;_I=Vp&&(!document.documentMode||9<document.documentMode)}function hw(){ol&&(ol.detachEvent("onpropertychange",vI),Nl=ol=null)}function vI(e){if(e.propertyName==="value"&&gf(Nl)){var t=[];yI(t,Nl,e,n_(e)),JT(MD,t)}}function ND(e,t,n){e==="focusin"?(hw(),ol=t,Nl=n,ol.attachEvent("onpropertychange",vI)):e==="focusout"&&hw()}function OD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gf(Nl)}function LD(e,t){if(e==="click")return gf(t)}function FD(e,t){if(e==="input"||e==="change")return gf(t)}function BD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fn=typeof Object.is=="function"?Object.is:BD;function Ol(e,t){if(Fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Fg.call(t,r)||!Fn(e[r],t[r]))return!1}return!0}function dw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fw(e,t){var n=dw(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=dw(n)}}function wI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function EI(){for(var e=window,t=Oh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Oh(e.document)}return t}function h_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $D(e){var t=EI(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wI(n.ownerDocument.documentElement,n)){if(i!==null&&h_(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=fw(n,s);var o=fw(n,i);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zD=Ii&&"documentMode"in document&&11>=document.documentMode,ho=null,im=null,al=null,rm=!1;function pw(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rm||ho==null||ho!==Oh(i)||(i=ho,"selectionStart"in i&&h_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),al&&Ol(al,i)||(al=i,i=Uh(im,"onSelect"),0<i.length&&(t=new l_("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ho)))}function yu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fo={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionend:yu("Transition","TransitionEnd")},Op={},xI={};Ii&&(xI=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function mf(e){if(Op[e])return Op[e];if(!fo[e])return e;var t=fo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xI)return Op[e]=t[n];return e}var TI=mf("animationend"),II=mf("animationiteration"),bI=mf("animationstart"),SI=mf("transitionend"),AI=new Map,gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){AI.set(e,t),Ls(t,[e])}for(var Lp=0;Lp<gw.length;Lp++){var Fp=gw[Lp],jD=Fp.toLowerCase(),UD=Fp[0].toUpperCase()+Fp.slice(1);Cr(jD,"on"+UD)}Cr(TI,"onAnimationEnd");Cr(II,"onAnimationIteration");Cr(bI,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(SI,"onTransitionEnd");Vo("onMouseEnter",["mouseout","mouseover"]);Vo("onMouseLeave",["mouseout","mouseover"]);Vo("onPointerEnter",["pointerout","pointerover"]);Vo("onPointerLeave",["pointerout","pointerover"]);Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WD=new Set("cancel close invalid load scroll toggle".split(" ").concat($a));function mw(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,jk(i,t,void 0,e),e.currentTarget=null}function PI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break t;mw(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break t;mw(r,a,c),s=l}}}if(Fh)throw e=Zg,Fh=!1,Zg=null,e}function bt(e,t){var n=t[cm];n===void 0&&(n=t[cm]=new Set);var i=e+"__bubble";n.has(i)||(CI(t,e,2,!1),n.add(i))}function Bp(e,t,n){var i=0;t&&(i|=4),CI(n,e,i,t)}var _u="_reactListening"+Math.random().toString(36).slice(2);function Ll(e){if(!e[_u]){e[_u]=!0,OT.forEach(function(n){n!=="selectionchange"&&(WD.has(n)||Bp(n,!1,e),Bp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_u]||(t[_u]=!0,Bp("selectionchange",!1,t))}}function CI(e,t,n,i){switch(dI(t)){case 1:var r=rD;break;case 4:r=sD;break;default:r=o_}n=r.bind(null,t,n,e),r=void 0,!Jg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function $p(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ns(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue t}a=a.parentNode}}i=i.return}JT(function(){var c=s,u=n_(n),h=[];t:{var d=AI.get(e);if(d!==void 0){var f=l_,p=e;switch(e){case"keypress":if(oh(n)===0)break t;case"keydown":case"keyup":f=wD;break;case"focusin":p="focus",f=Mp;break;case"focusout":p="blur",f=Mp;break;case"beforeblur":case"afterblur":f=Mp;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=lD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=TD;break;case TI:case II:case bI:f=hD;break;case SI:f=bD;break;case"scroll":f=oD;break;case"wheel":f=AD;break;case"copy":case"cut":case"paste":f=fD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ow}var m=(t&4)!==0,_=!m&&e==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var y=c,v;y!==null;){v=y;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=kl(y,g),w!=null&&m.push(Fl(y,w,v)))),_)break;y=y.return}0<m.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:m}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&n!==Yg&&(p=n.relatedTarget||n.fromElement)&&(ns(p)||p[bi]))break t;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?ns(p):null,p!==null&&(_=Fs(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=rw,w="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=ow,w="onPointerLeave",g="onPointerEnter",y="pointer"),_=f==null?d:po(f),v=p==null?d:po(p),d=new m(w,y+"leave",f,n,u),d.target=_,d.relatedTarget=v,w=null,ns(u)===c&&(m=new m(g,y+"enter",p,n,u),m.target=v,m.relatedTarget=_,w=m),_=w,f&&p)e:{for(m=f,g=p,y=0,v=m;v;v=Ks(v))y++;for(v=0,w=g;w;w=Ks(w))v++;for(;0<y-v;)m=Ks(m),y--;for(;0<v-y;)g=Ks(g),v--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break e;m=Ks(m),g=Ks(g)}m=null}else m=null;f!==null&&yw(h,d,f,m,!1),p!==null&&_!==null&&yw(h,_,p,m,!0)}}t:{if(d=c?po(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=VD;else if(cw(d))if(_I)E=FD;else{E=OD;var x=ND}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=LD);if(E&&(E=E(e,c))){yI(h,E,n,u);break t}x&&x(e,d,c),e==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&Hg(d,"number",d.value)}switch(x=c?po(c):window,e){case"focusin":(cw(x)||x.contentEditable==="true")&&(ho=x,im=c,al=null);break;case"focusout":al=im=ho=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,pw(h,n,u);break;case"selectionchange":if(zD)break;case"keydown":case"keyup":pw(h,n,u)}var T;if(u_)t:{switch(e){case"compositionstart":var I="onCompositionStart";break t;case"compositionend":I="onCompositionEnd";break t;case"compositionupdate":I="onCompositionUpdate";break t}I=void 0}else uo?gI(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(pI&&n.locale!=="ko"&&(uo||I!=="onCompositionStart"?I==="onCompositionEnd"&&uo&&(T=fI()):(Ki=u,a_="value"in Ki?Ki.value:Ki.textContent,uo=!0)),x=Uh(c,I),0<x.length&&(I=new sw(I,e,null,n,u),h.push({event:I,listeners:x}),T?I.data=T:(T=mI(n),T!==null&&(I.data=T)))),(T=CD?RD(e,n):kD(e,n))&&(c=Uh(c,"onBeforeInput"),0<c.length&&(u=new sw("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=T))}PI(h,t)})}function Fl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Uh(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=kl(e,n),s!=null&&i.unshift(Fl(e,s,r)),s=kl(e,t),s!=null&&i.push(Fl(e,s,r))),e=e.return}return i}function Ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yw(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=kl(n,s),l!=null&&o.unshift(Fl(n,l,a))):r||(l=kl(n,s),l!=null&&o.push(Fl(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var HD=/\r\n?/g,qD=/\u0000|\uFFFD/g;function _w(e){return(typeof e=="string"?e:""+e).replace(HD,`
`).replace(qD,"")}function vu(e,t,n){if(t=_w(t),_w(e)!==t&&n)throw Error(D(425))}function Wh(){}var sm=null,om=null;function am(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,KD=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,GD=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(e){return vw.resolve(null).then(e).catch(QD)}:lm;function QD(e){setTimeout(function(){throw e})}function zp(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),Vl(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Vl(t)}function sr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ww(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var oa=Math.random().toString(36).slice(2),Gn="__reactFiber$"+oa,Bl="__reactProps$"+oa,bi="__reactContainer$"+oa,cm="__reactEvents$"+oa,YD="__reactListeners$"+oa,XD="__reactHandles$"+oa;function ns(e){var t=e[Gn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bi]||n[Gn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ww(e);e!==null;){if(n=e[Gn])return n;e=ww(e)}return t}e=n,n=e.parentNode}return null}function Dc(e){return e=e[Gn]||e[bi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function po(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function yf(e){return e[Bl]||null}var um=[],go=-1;function Rr(e){return{current:e}}function Rt(e){0>go||(e.current=um[go],um[go]=null,go--)}function Et(e,t){go++,um[go]=e.current,e.current=t}var gr={},ke=Rr(gr),tn=Rr(!1),ms=gr;function No(e,t){var n=e.type.contextTypes;if(!n)return gr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function en(e){return e=e.childContextTypes,e!=null}function Hh(){Rt(tn),Rt(ke)}function Ew(e,t,n){if(ke.current!==gr)throw Error(D(168));Et(ke,t),Et(tn,n)}function RI(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(D(108,Nk(e)||"Unknown",r));return $t({},n,i)}function qh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gr,ms=ke.current,Et(ke,e),Et(tn,tn.current),!0}function xw(e,t,n){var i=e.stateNode;if(!i)throw Error(D(169));n?(e=RI(e,t,ms),i.__reactInternalMemoizedMergedChildContext=e,Rt(tn),Rt(ke),Et(ke,e)):Rt(tn),Et(tn,n)}var fi=null,_f=!1,jp=!1;function kI(e){fi===null?fi=[e]:fi.push(e)}function JD(e){_f=!0,kI(e)}function kr(){if(!jp&&fi!==null){jp=!0;var e=0,t=yt;try{var n=fi;for(yt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}fi=null,_f=!1}catch(r){throw fi!==null&&(fi=fi.slice(e+1)),nI(i_,kr),r}finally{yt=t,jp=!1}}return null}var mo=[],yo=0,Kh=null,Gh=0,_n=[],vn=0,ys=null,gi=1,mi="";function Wr(e,t){mo[yo++]=Gh,mo[yo++]=Kh,Kh=e,Gh=t}function DI(e,t,n){_n[vn++]=gi,_n[vn++]=mi,_n[vn++]=ys,ys=e;var i=gi;e=mi;var r=32-Vn(i)-1;i&=~(1<<r),n+=1;var s=32-Vn(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,gi=1<<32-Vn(t)+r|n<<r|i,mi=s+e}else gi=1<<s|n<<r|i,mi=e}function d_(e){e.return!==null&&(Wr(e,1),DI(e,1,0))}function f_(e){for(;e===Kh;)Kh=mo[--yo],mo[yo]=null,Gh=mo[--yo],mo[yo]=null;for(;e===ys;)ys=_n[--vn],_n[vn]=null,mi=_n[--vn],_n[vn]=null,gi=_n[--vn],_n[vn]=null}var un=null,cn=null,Mt=!1,kn=null;function MI(e,t){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Tw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,un=e,cn=sr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,un=e,cn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ys!==null?{id:gi,overflow:mi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,un=e,cn=null,!0):!1;default:return!1}}function hm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dm(e){if(Mt){var t=cn;if(t){var n=t;if(!Tw(e,t)){if(hm(e))throw Error(D(418));t=sr(n.nextSibling);var i=un;t&&Tw(e,t)?MI(i,n):(e.flags=e.flags&-4097|2,Mt=!1,un=e)}}else{if(hm(e))throw Error(D(418));e.flags=e.flags&-4097|2,Mt=!1,un=e}}}function Iw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;un=e}function wu(e){if(e!==un)return!1;if(!Mt)return Iw(e),Mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!am(e.type,e.memoizedProps)),t&&(t=cn)){if(hm(e))throw VI(),Error(D(418));for(;t;)MI(e,t),t=sr(t.nextSibling)}if(Iw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){cn=sr(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}cn=null}}else cn=un?sr(e.stateNode.nextSibling):null;return!0}function VI(){for(var e=cn;e;)e=sr(e.nextSibling)}function Oo(){cn=un=null,Mt=!1}function p_(e){kn===null?kn=[e]:kn.push(e)}var ZD=Ri.ReactCurrentBatchConfig;function Cn(e,t){if(e&&e.defaultProps){t=$t({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Qh=Rr(null),Yh=null,_o=null,g_=null;function m_(){g_=_o=Yh=null}function y_(e){var t=Qh.current;Rt(Qh),e._currentValue=t}function fm(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function So(e,t){Yh=e,g_=_o=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function In(e){var t=e._currentValue;if(g_!==e)if(e={context:e,memoizedValue:t,next:null},_o===null){if(Yh===null)throw Error(D(308));_o=e,Yh.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var is=null;function __(e){is===null?is=[e]:is.push(e)}function NI(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,__(t)):(n.next=r.next,r.next=n),t.interleaved=n,Si(e,i)}function Si(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ji=!1;function v_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function or(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ut&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Si(e,n)}return r=i.interleaved,r===null?(t.next=t,__(i)):(t.next=r.next,r.next=t),i.interleaved=t,Si(e,n)}function ah(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,r_(e,n)}}function bw(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xh(e,t,n,i){var r=e.updateQueue;ji=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break t;h=$t({},h,d);break t;case 2:ji=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);vs|=o,e.lanes=o,e.memoizedState=h}}function Sw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(D(191,r));r.call(i)}}}var LI=new NT.Component().refs;function pm(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:$t({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vf={isMounted:function(e){return(e=e._reactInternals)?Fs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Be(),r=lr(e),s=xi(i,r);s.payload=t,n!=null&&(s.callback=n),t=or(e,s,r),t!==null&&(Nn(t,e,r,i),ah(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Be(),r=lr(e),s=xi(i,r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=or(e,s,r),t!==null&&(Nn(t,e,r,i),ah(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Be(),i=lr(e),r=xi(n,i);r.tag=2,t!=null&&(r.callback=t),t=or(e,r,i),t!==null&&(Nn(t,e,i,n),ah(t,e,i))}};function Aw(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ol(n,i)||!Ol(r,s):!0}function FI(e,t,n){var i=!1,r=gr,s=t.contextType;return typeof s=="object"&&s!==null?s=In(s):(r=en(t)?ms:ke.current,i=t.contextTypes,s=(i=i!=null)?No(e,r):gr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vf,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Pw(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&vf.enqueueReplaceState(t,t.state,null)}function gm(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=LI,v_(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=In(s):(s=en(t)?ms:ke.current,r.context=No(e,s)),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(pm(e,t,s,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&vf.enqueueReplaceState(r,r.state,null),Xh(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function xa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var i=n.stateNode}if(!i)throw Error(D(147,e));var r=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=r.refs;a===LI&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function Eu(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cw(e){var t=e._init;return t(e._payload)}function BI(e){function t(g,y){if(e){var v=g.deletions;v===null?(g.deletions=[y],g.flags|=16):v.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=cr(g,y),g.index=0,g.sibling=null,g}function s(g,y,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<y?(g.flags|=2,y):v):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,v,w){return y===null||y.tag!==6?(y=Qp(v,g.mode,w),y.return=g,y):(y=r(y,v),y.return=g,y)}function l(g,y,v,w){var E=v.type;return E===co?u(g,y,v.props.children,w,v.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zi&&Cw(E)===y.type)?(w=r(y,v.props),w.ref=xa(g,y,v),w.return=g,w):(w=fh(v.type,v.key,v.props,null,g.mode,w),w.ref=xa(g,y,v),w.return=g,w)}function c(g,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Yp(v,g.mode,w),y.return=g,y):(y=r(y,v.children||[]),y.return=g,y)}function u(g,y,v,w,E){return y===null||y.tag!==7?(y=ds(v,g.mode,w,E),y.return=g,y):(y=r(y,v),y.return=g,y)}function h(g,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Qp(""+y,g.mode,v),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case uu:return v=fh(y.type,y.key,y.props,null,g.mode,v),v.ref=xa(g,null,y),v.return=g,v;case lo:return y=Yp(y,g.mode,v),y.return=g,y;case zi:var w=y._init;return h(g,w(y._payload),v)}if(Fa(y)||ya(y))return y=ds(y,g.mode,v,null),y.return=g,y;Eu(g,y)}return null}function d(g,y,v,w){var E=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(g,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case uu:return v.key===E?l(g,y,v,w):null;case lo:return v.key===E?c(g,y,v,w):null;case zi:return E=v._init,d(g,y,E(v._payload),w)}if(Fa(v)||ya(v))return E!==null?null:u(g,y,v,w,null);Eu(g,v)}return null}function f(g,y,v,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,a(y,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case uu:return g=g.get(w.key===null?v:w.key)||null,l(y,g,w,E);case lo:return g=g.get(w.key===null?v:w.key)||null,c(y,g,w,E);case zi:var x=w._init;return f(g,y,v,x(w._payload),E)}if(Fa(w)||ya(w))return g=g.get(v)||null,u(y,g,w,E,null);Eu(y,w)}return null}function p(g,y,v,w){for(var E=null,x=null,T=y,I=y=0,k=null;T!==null&&I<v.length;I++){T.index>I?(k=T,T=null):k=T.sibling;var M=d(g,T,v[I],w);if(M===null){T===null&&(T=k);break}e&&T&&M.alternate===null&&t(g,T),y=s(M,y,I),x===null?E=M:x.sibling=M,x=M,T=k}if(I===v.length)return n(g,T),Mt&&Wr(g,I),E;if(T===null){for(;I<v.length;I++)T=h(g,v[I],w),T!==null&&(y=s(T,y,I),x===null?E=T:x.sibling=T,x=T);return Mt&&Wr(g,I),E}for(T=i(g,T);I<v.length;I++)k=f(T,g,I,v[I],w),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?I:k.key),y=s(k,y,I),x===null?E=k:x.sibling=k,x=k);return e&&T.forEach(function(j){return t(g,j)}),Mt&&Wr(g,I),E}function m(g,y,v,w){var E=ya(v);if(typeof E!="function")throw Error(D(150));if(v=E.call(v),v==null)throw Error(D(151));for(var x=E=null,T=y,I=y=0,k=null,M=v.next();T!==null&&!M.done;I++,M=v.next()){T.index>I?(k=T,T=null):k=T.sibling;var j=d(g,T,M.value,w);if(j===null){T===null&&(T=k);break}e&&T&&j.alternate===null&&t(g,T),y=s(j,y,I),x===null?E=j:x.sibling=j,x=j,T=k}if(M.done)return n(g,T),Mt&&Wr(g,I),E;if(T===null){for(;!M.done;I++,M=v.next())M=h(g,M.value,w),M!==null&&(y=s(M,y,I),x===null?E=M:x.sibling=M,x=M);return Mt&&Wr(g,I),E}for(T=i(g,T);!M.done;I++,M=v.next())M=f(T,g,I,M.value,w),M!==null&&(e&&M.alternate!==null&&T.delete(M.key===null?I:M.key),y=s(M,y,I),x===null?E=M:x.sibling=M,x=M);return e&&T.forEach(function(H){return t(g,H)}),Mt&&Wr(g,I),E}function _(g,y,v,w){if(typeof v=="object"&&v!==null&&v.type===co&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case uu:t:{for(var E=v.key,x=y;x!==null;){if(x.key===E){if(E=v.type,E===co){if(x.tag===7){n(g,x.sibling),y=r(x,v.props.children),y.return=g,g=y;break t}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zi&&Cw(E)===x.type){n(g,x.sibling),y=r(x,v.props),y.ref=xa(g,x,v),y.return=g,g=y;break t}n(g,x);break}else t(g,x);x=x.sibling}v.type===co?(y=ds(v.props.children,g.mode,w,v.key),y.return=g,g=y):(w=fh(v.type,v.key,v.props,null,g.mode,w),w.ref=xa(g,y,v),w.return=g,g=w)}return o(g);case lo:t:{for(x=v.key;y!==null;){if(y.key===x)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(g,y.sibling),y=r(y,v.children||[]),y.return=g,g=y;break t}else{n(g,y);break}else t(g,y);y=y.sibling}y=Yp(v,g.mode,w),y.return=g,g=y}return o(g);case zi:return x=v._init,_(g,y,x(v._payload),w)}if(Fa(v))return p(g,y,v,w);if(ya(v))return m(g,y,v,w);Eu(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,v),y.return=g,g=y):(n(g,y),y=Qp(v,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return _}var Lo=BI(!0),$I=BI(!1),Mc={},ei=Rr(Mc),$l=Rr(Mc),zl=Rr(Mc);function rs(e){if(e===Mc)throw Error(D(174));return e}function w_(e,t){switch(Et(zl,t),Et($l,e),Et(ei,Mc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kg(t,e)}Rt(ei),Et(ei,t)}function Fo(){Rt(ei),Rt($l),Rt(zl)}function zI(e){rs(zl.current);var t=rs(ei.current),n=Kg(t,e.type);t!==n&&(Et($l,e),Et(ei,n))}function E_(e){$l.current===e&&(Rt(ei),Rt($l))}var Lt=Rr(0);function Jh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Up=[];function x_(){for(var e=0;e<Up.length;e++)Up[e]._workInProgressVersionPrimary=null;Up.length=0}var lh=Ri.ReactCurrentDispatcher,Wp=Ri.ReactCurrentBatchConfig,_s=0,Ft=null,te=null,se=null,Zh=!1,ll=!1,jl=0,t2=0;function Te(){throw Error(D(321))}function T_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fn(e[n],t[n]))return!1;return!0}function I_(e,t,n,i,r,s){if(_s=s,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lh.current=e===null||e.memoizedState===null?r2:s2,e=n(i,r),ll){s=0;do{if(ll=!1,jl=0,25<=s)throw Error(D(301));s+=1,se=te=null,t.updateQueue=null,lh.current=o2,e=n(i,r)}while(ll)}if(lh.current=td,t=te!==null&&te.next!==null,_s=0,se=te=Ft=null,Zh=!1,t)throw Error(D(300));return e}function b_(){var e=jl!==0;return jl=0,e}function qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?Ft.memoizedState=se=e:se=se.next=e,se}function bn(){if(te===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=te.next;var t=se===null?Ft.memoizedState:se.next;if(t!==null)se=t,te=e;else{if(e===null)throw Error(D(310));te=e,e={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},se===null?Ft.memoizedState=se=e:se=se.next=e}return se}function Ul(e,t){return typeof t=="function"?t(e):t}function Hp(e){var t=bn(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var i=te,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((_s&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Ft.lanes|=u,vs|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Fn(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do s=r.lane,Ft.lanes|=s,vs|=s,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function qp(e){var t=bn(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);Fn(s,t.memoizedState)||(Qe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function jI(){}function UI(e,t){var n=Ft,i=bn(),r=t(),s=!Fn(i.memoizedState,r);if(s&&(i.memoizedState=r,Qe=!0),i=i.queue,S_(qI.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||se!==null&&se.memoizedState.tag&1){if(n.flags|=2048,Wl(9,HI.bind(null,n,i,r,t),void 0,null),le===null)throw Error(D(349));_s&30||WI(n,t,r)}return r}function WI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function HI(e,t,n,i){t.value=n,t.getSnapshot=i,KI(t)&&GI(e)}function qI(e,t,n){return n(function(){KI(t)&&GI(e)})}function KI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fn(e,n)}catch{return!0}}function GI(e){var t=Si(e,1);t!==null&&Nn(t,e,1,-1)}function Rw(e){var t=qn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:e},t.queue=e,e=e.dispatch=i2.bind(null,Ft,e),[t.memoizedState,e]}function Wl(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function QI(){return bn().memoizedState}function ch(e,t,n,i){var r=qn();Ft.flags|=e,r.memoizedState=Wl(1|t,n,void 0,i===void 0?null:i)}function wf(e,t,n,i){var r=bn();i=i===void 0?null:i;var s=void 0;if(te!==null){var o=te.memoizedState;if(s=o.destroy,i!==null&&T_(i,o.deps)){r.memoizedState=Wl(t,n,s,i);return}}Ft.flags|=e,r.memoizedState=Wl(1|t,n,s,i)}function kw(e,t){return ch(8390656,8,e,t)}function S_(e,t){return wf(2048,8,e,t)}function YI(e,t){return wf(4,2,e,t)}function XI(e,t){return wf(4,4,e,t)}function JI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ZI(e,t,n){return n=n!=null?n.concat([e]):null,wf(4,4,JI.bind(null,t,e),n)}function A_(){}function tb(e,t){var n=bn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&T_(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function eb(e,t){var n=bn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&T_(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function nb(e,t,n){return _s&21?(Fn(n,t)||(n=sI(),Ft.lanes|=n,vs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n)}function e2(e,t){var n=yt;yt=n!==0&&4>n?n:4,e(!0);var i=Wp.transition;Wp.transition={};try{e(!1),t()}finally{yt=n,Wp.transition=i}}function ib(){return bn().memoizedState}function n2(e,t,n){var i=lr(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},rb(e))sb(t,n);else if(n=NI(e,t,n,i),n!==null){var r=Be();Nn(n,e,i,r),ob(n,t,i)}}function i2(e,t,n){var i=lr(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(rb(e))sb(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Fn(a,o)){var l=t.interleaved;l===null?(r.next=r,__(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=NI(e,t,r,i),n!==null&&(r=Be(),Nn(n,e,i,r),ob(n,t,i))}}function rb(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function sb(e,t){ll=Zh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ob(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,r_(e,n)}}var td={readContext:In,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},r2={readContext:In,useCallback:function(e,t){return qn().memoizedState=[e,t===void 0?null:t],e},useContext:In,useEffect:kw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ch(4194308,4,JI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ch(4194308,4,e,t)},useInsertionEffect:function(e,t){return ch(4,2,e,t)},useMemo:function(e,t){var n=qn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=qn();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=n2.bind(null,Ft,e),[i.memoizedState,e]},useRef:function(e){var t=qn();return e={current:e},t.memoizedState=e},useState:Rw,useDebugValue:A_,useDeferredValue:function(e){return qn().memoizedState=e},useTransition:function(){var e=Rw(!1),t=e[0];return e=e2.bind(null,e[1]),qn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Ft,r=qn();if(Mt){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),le===null)throw Error(D(349));_s&30||WI(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,kw(qI.bind(null,i,s,e),[e]),i.flags|=2048,Wl(9,HI.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=qn(),t=le.identifierPrefix;if(Mt){var n=mi,i=gi;n=(i&~(1<<32-Vn(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=jl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=t2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},s2={readContext:In,useCallback:tb,useContext:In,useEffect:S_,useImperativeHandle:ZI,useInsertionEffect:YI,useLayoutEffect:XI,useMemo:eb,useReducer:Hp,useRef:QI,useState:function(){return Hp(Ul)},useDebugValue:A_,useDeferredValue:function(e){var t=bn();return nb(t,te.memoizedState,e)},useTransition:function(){var e=Hp(Ul)[0],t=bn().memoizedState;return[e,t]},useMutableSource:jI,useSyncExternalStore:UI,useId:ib,unstable_isNewReconciler:!1},o2={readContext:In,useCallback:tb,useContext:In,useEffect:S_,useImperativeHandle:ZI,useInsertionEffect:YI,useLayoutEffect:XI,useMemo:eb,useReducer:qp,useRef:QI,useState:function(){return qp(Ul)},useDebugValue:A_,useDeferredValue:function(e){var t=bn();return te===null?t.memoizedState=e:nb(t,te.memoizedState,e)},useTransition:function(){var e=qp(Ul)[0],t=bn().memoizedState;return[e,t]},useMutableSource:jI,useSyncExternalStore:UI,useId:ib,unstable_isNewReconciler:!1};function Bo(e,t){try{var n="",i=t;do n+=Vk(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:r,digest:null}}function Kp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function mm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var a2=typeof WeakMap=="function"?WeakMap:Map;function ab(e,t,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){nd||(nd=!0,Sm=i),mm(e,t)},n}function lb(e,t,n){n=xi(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){mm(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mm(e,t),typeof i!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Dw(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new a2;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=E2.bind(null,e,t,n),t.then(e,e))}function Mw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vw(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=xi(-1,1),t.tag=2,or(n,t,1))),n.lanes|=1),e)}var l2=Ri.ReactCurrentOwner,Qe=!1;function Ne(e,t,n,i){t.child=e===null?$I(t,null,n,i):Lo(t,e.child,n,i)}function Nw(e,t,n,i,r){n=n.render;var s=t.ref;return So(t,r),i=I_(e,t,n,i,s,r),n=b_(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ai(e,t,r)):(Mt&&n&&d_(t),t.flags|=1,Ne(e,t,i,r),t.child)}function Ow(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!N_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,cb(e,t,s,i,r)):(e=fh(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(o,i)&&e.ref===t.ref)return Ai(e,t,r)}return t.flags|=1,e=cr(s,i),e.ref=t.ref,e.return=t,t.child=e}function cb(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Ol(s,i)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=i=s,(e.lanes&r)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Ai(e,t,r)}return ym(e,t,n,i,r)}function ub(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(wo,an),an|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Et(wo,an),an|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Et(wo,an),an|=i}else s!==null?(i=s.baseLanes|n,t.memoizedState=null):i=n,Et(wo,an),an|=i;return Ne(e,t,r,n),t.child}function hb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ym(e,t,n,i,r){var s=en(n)?ms:ke.current;return s=No(t,s),So(t,r),n=I_(e,t,n,i,s,r),i=b_(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ai(e,t,r)):(Mt&&i&&d_(t),t.flags|=1,Ne(e,t,n,r),t.child)}function Lw(e,t,n,i,r){if(en(n)){var s=!0;qh(t)}else s=!1;if(So(t,r),t.stateNode===null)uh(e,t),FI(t,n,i),gm(t,n,i,r),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=en(n)?ms:ke.current,c=No(t,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Pw(t,o,i,c),ji=!1;var d=t.memoizedState;o.state=d,Xh(t,i,o,r),l=t.memoizedState,a!==i||d!==l||tn.current||ji?(typeof u=="function"&&(pm(t,n,u,i),l=t.memoizedState),(a=ji||Aw(t,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,OI(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Cn(t.type,a),o.props=c,h=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=In(l):(l=en(n)?ms:ke.current,l=No(t,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Pw(t,o,i,l),ji=!1,d=t.memoizedState,o.state=d,Xh(t,i,o,r);var p=t.memoizedState;a!==h||d!==p||tn.current||ji?(typeof f=="function"&&(pm(t,n,f,i),p=t.memoizedState),(c=ji||Aw(t,n,c,i,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return _m(e,t,n,i,s,r)}function _m(e,t,n,i,r,s){hb(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return r&&xw(t,n,!1),Ai(e,t,s);i=t.stateNode,l2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Lo(t,e.child,null,s),t.child=Lo(t,null,a,s)):Ne(e,t,a,s),t.memoizedState=i.state,r&&xw(t,n,!0),t.child}function db(e){var t=e.stateNode;t.pendingContext?Ew(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ew(e,t.context,!1),w_(e,t.containerInfo)}function Fw(e,t,n,i,r){return Oo(),p_(r),t.flags|=256,Ne(e,t,n,i),t.child}var vm={dehydrated:null,treeContext:null,retryLane:0};function wm(e){return{baseLanes:e,cachePool:null,transitions:null}}function fb(e,t,n){var i=t.pendingProps,r=Lt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(r&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Et(Lt,r&1),e===null)return dm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tf(o,i,0,null),e=ds(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=wm(n),t.memoizedState=vm,e):P_(t,o));if(r=e.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return c2(e,t,o,i,a,r,n);if(s){s=i.fallback,o=t.mode,r=e.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=cr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=cr(a,s):(s=ds(s,o,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?wm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=vm,i}return s=e.child,e=s.sibling,i=cr(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function P_(e,t){return t=Tf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xu(e,t,n,i){return i!==null&&p_(i),Lo(t,e.child,null,n),e=P_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function c2(e,t,n,i,r,s,o){if(n)return t.flags&256?(t.flags&=-257,i=Kp(Error(D(422))),xu(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Tf({mode:"visible",children:i.children},r,0,null),s=ds(s,r,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Lo(t,e.child,null,o),t.child.memoizedState=wm(o),t.memoizedState=vm,s);if(!(t.mode&1))return xu(e,t,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(D(419)),i=Kp(s,i,void 0),xu(e,t,o,i)}if(a=(o&e.childLanes)!==0,Qe||a){if(i=le,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Si(e,r),Nn(i,e,r,-1))}return V_(),i=Kp(Error(D(421))),xu(e,t,o,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=x2.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,cn=sr(r.nextSibling),un=t,Mt=!0,kn=null,e!==null&&(_n[vn++]=gi,_n[vn++]=mi,_n[vn++]=ys,gi=e.id,mi=e.overflow,ys=t),t=P_(t,i.children),t.flags|=4096,t)}function Bw(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),fm(e.return,t,n)}function Gp(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function pb(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Ne(e,t,i.children,n),i=Lt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bw(e,n,t);else if(e.tag===19)Bw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Et(Lt,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Jh(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Gp(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Jh(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Gp(t,!0,n,null,s);break;case"together":Gp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ai(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=cr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function u2(e,t,n){switch(t.tag){case 3:db(t),Oo();break;case 5:zI(t);break;case 1:en(t.type)&&qh(t);break;case 4:w_(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Et(Qh,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Et(Lt,Lt.current&1),t.flags|=128,null):n&t.child.childLanes?fb(e,t,n):(Et(Lt,Lt.current&1),e=Ai(e,t,n),e!==null?e.sibling:null);Et(Lt,Lt.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return pb(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Et(Lt,Lt.current),i)break;return null;case 22:case 23:return t.lanes=0,ub(e,t,n)}return Ai(e,t,n)}var gb,Em,mb,yb;gb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Em=function(){};mb=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,rs(ei.current);var s=null;switch(n){case"input":r=Ug(e,r),i=Ug(e,i),s=[];break;case"select":r=$t({},r,{value:void 0}),i=$t({},i,{value:void 0}),s=[];break;case"textarea":r=qg(e,r),i=qg(e,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Wh)}Gg(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&bt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};yb=function(e,t,n,i){n!==i&&(t.flags|=4)};function Ta(e,t){if(!Mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function h2(e,t,n){var i=t.pendingProps;switch(f_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return en(t.type)&&Hh(),Ie(t),null;case 3:return i=t.stateNode,Fo(),Rt(tn),Rt(ke),x_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(wu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kn!==null&&(Cm(kn),kn=null))),Em(e,t),Ie(t),null;case 5:E_(t);var r=rs(zl.current);if(n=t.type,e!==null&&t.stateNode!=null)mb(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(D(166));return Ie(t),null}if(e=rs(ei.current),wu(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[Gn]=t,i[Bl]=s,e=(t.mode&1)!==0,n){case"dialog":bt("cancel",i),bt("close",i);break;case"iframe":case"object":case"embed":bt("load",i);break;case"video":case"audio":for(r=0;r<$a.length;r++)bt($a[r],i);break;case"source":bt("error",i);break;case"img":case"image":case"link":bt("error",i),bt("load",i);break;case"details":bt("toggle",i);break;case"input":Gv(i,s),bt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},bt("invalid",i);break;case"textarea":Yv(i,s),bt("invalid",i)}Gg(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&vu(i.textContent,a,e),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vu(i.textContent,a,e),r=["children",""+a]):Cl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bt("scroll",i)}switch(n){case"input":hu(i),Qv(i,s,!0);break;case"textarea":hu(i),Xv(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Wh)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=WT(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),n==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[Gn]=t,e[Bl]=i,gb(e,t,!1,!1),t.stateNode=e;t:{switch(o=Qg(n,i),n){case"dialog":bt("cancel",e),bt("close",e),r=i;break;case"iframe":case"object":case"embed":bt("load",e),r=i;break;case"video":case"audio":for(r=0;r<$a.length;r++)bt($a[r],e);r=i;break;case"source":bt("error",e),r=i;break;case"img":case"image":case"link":bt("error",e),bt("load",e),r=i;break;case"details":bt("toggle",e),r=i;break;case"input":Gv(e,i),r=Ug(e,i),bt("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=$t({},i,{value:void 0}),bt("invalid",e);break;case"textarea":Yv(e,i),r=qg(e,i),bt("invalid",e);break;default:r=i}Gg(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?KT(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HT(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rl(e,l):typeof l=="number"&&Rl(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&bt("scroll",e):l!=null&&Jy(e,s,l,o))}switch(n){case"input":hu(e),Qv(e,i,!1);break;case"textarea":hu(e),Xv(e);break;case"option":i.value!=null&&e.setAttribute("value",""+pr(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?xo(e,!!i.multiple,s,!1):i.defaultValue!=null&&xo(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Wh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)yb(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(D(166));if(n=rs(zl.current),rs(ei.current),wu(t)){if(i=t.stateNode,n=t.memoizedProps,i[Gn]=t,(s=i.nodeValue!==n)&&(e=un,e!==null))switch(e.tag){case 3:vu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vu(i.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Gn]=t,t.stateNode=i}return Ie(t),null;case 13:if(Rt(Lt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mt&&cn!==null&&t.mode&1&&!(t.flags&128))VI(),Oo(),t.flags|=98560,s=!1;else if(s=wu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(D(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Gn]=t}else Oo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),s=!1}else kn!==null&&(Cm(kn),kn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Lt.current&1?ee===0&&(ee=3):V_())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return Fo(),Em(e,t),e===null&&Ll(t.stateNode.containerInfo),Ie(t),null;case 10:return y_(t.type._context),Ie(t),null;case 17:return en(t.type)&&Hh(),Ie(t),null;case 19:if(Rt(Lt),s=t.memoizedState,s===null)return Ie(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Ta(s,!1);else{if(ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Jh(e),o!==null){for(t.flags|=128,Ta(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)s=n,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Et(Lt,Lt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Kt()>$o&&(t.flags|=128,i=!0,Ta(s,!1),t.lanes=4194304)}else{if(!i)if(e=Jh(o),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ta(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mt)return Ie(t),null}else 2*Kt()-s.renderingStartTime>$o&&n!==1073741824&&(t.flags|=128,i=!0,Ta(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Kt(),t.sibling=null,n=Lt.current,Et(Lt,i?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return M_(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?an&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function d2(e,t){switch(f_(t),t.tag){case 1:return en(t.type)&&Hh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fo(),Rt(tn),Rt(ke),x_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return E_(t),null;case 13:if(Rt(Lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Oo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Lt),null;case 4:return Fo(),null;case 10:return y_(t.type._context),null;case 22:case 23:return M_(),null;case 24:return null;default:return null}}var Tu=!1,Ae=!1,f2=typeof WeakSet=="function"?WeakSet:Set,$=null;function vo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){zt(e,t,i)}else n.current=null}function xm(e,t,n){try{n()}catch(i){zt(e,t,i)}}var $w=!1;function p2(e,t){if(sm=zh,e=EI(),h_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,c=0,u=0,h=e,d=null;e:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===e)break e;if(d===n&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(om={focusedElem:e,selectionRange:n},zh=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,_=p.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Cn(t.type,m),_);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){zt(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return p=$w,$w=!1,p}function cl(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,s!==void 0&&xm(t,n,s)}r=r.next}while(r!==i)}}function Ef(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Tm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _b(e){var t=e.alternate;t!==null&&(e.alternate=null,_b(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gn],delete t[Bl],delete t[cm],delete t[YD],delete t[XD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vb(e){return e.tag===5||e.tag===3||e.tag===4}function zw(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||vb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Im(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wh));else if(i!==4&&(e=e.child,e!==null))for(Im(e,t,n),e=e.sibling;e!==null;)Im(e,t,n),e=e.sibling}function bm(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(bm(e,t,n),e=e.sibling;e!==null;)bm(e,t,n),e=e.sibling}var me=null,Rn=!1;function Ni(e,t,n){for(n=n.child;n!==null;)wb(e,t,n),n=n.sibling}function wb(e,t,n){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(ff,n)}catch{}switch(n.tag){case 5:Ae||vo(n,t);case 6:var i=me,r=Rn;me=null,Ni(e,t,n),me=i,Rn=r,me!==null&&(Rn?(e=me,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(Rn?(e=me,n=n.stateNode,e.nodeType===8?zp(e.parentNode,n):e.nodeType===1&&zp(e,n),Vl(e)):zp(me,n.stateNode));break;case 4:i=me,r=Rn,me=n.stateNode.containerInfo,Rn=!0,Ni(e,t,n),me=i,Rn=r;break;case 0:case 11:case 14:case 15:if(!Ae&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xm(n,t,o),r=r.next}while(r!==i)}Ni(e,t,n);break;case 1:if(!Ae&&(vo(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){zt(n,t,a)}Ni(e,t,n);break;case 21:Ni(e,t,n);break;case 22:n.mode&1?(Ae=(i=Ae)||n.memoizedState!==null,Ni(e,t,n),Ae=i):Ni(e,t,n);break;default:Ni(e,t,n)}}function jw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new f2),t.forEach(function(i){var r=T2.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Sn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:me=a.stateNode,Rn=!1;break t;case 3:me=a.stateNode.containerInfo,Rn=!0;break t;case 4:me=a.stateNode.containerInfo,Rn=!0;break t}a=a.return}if(me===null)throw Error(D(160));wb(s,o,r),me=null,Rn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){zt(r,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Eb(t,e),t=t.sibling}function Eb(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sn(t,e),Un(e),i&4){try{cl(3,e,e.return),Ef(3,e)}catch(m){zt(e,e.return,m)}try{cl(5,e,e.return)}catch(m){zt(e,e.return,m)}}break;case 1:Sn(t,e),Un(e),i&512&&n!==null&&vo(n,n.return);break;case 5:if(Sn(t,e),Un(e),i&512&&n!==null&&vo(n,n.return),e.flags&32){var r=e.stateNode;try{Rl(r,"")}catch(m){zt(e,e.return,m)}}if(i&4&&(r=e.stateNode,r!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jT(r,s),Qg(a,o);var c=Qg(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?KT(r,h):u==="dangerouslySetInnerHTML"?HT(r,h):u==="children"?Rl(r,h):Jy(r,u,h,c)}switch(a){case"input":Wg(r,s);break;case"textarea":UT(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?xo(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?xo(r,!!s.multiple,s.defaultValue,!0):xo(r,!!s.multiple,s.multiple?[]:"",!1))}r[Bl]=s}catch(m){zt(e,e.return,m)}}break;case 6:if(Sn(t,e),Un(e),i&4){if(e.stateNode===null)throw Error(D(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(m){zt(e,e.return,m)}}break;case 3:if(Sn(t,e),Un(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Vl(t.containerInfo)}catch(m){zt(e,e.return,m)}break;case 4:Sn(t,e),Un(e);break;case 13:Sn(t,e),Un(e),r=e.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(k_=Kt())),i&4&&jw(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ae=(c=Ae)||u,Sn(t,e),Ae=c):Sn(t,e),Un(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for($=e,u=e.child;u!==null;){for(h=$=u;$!==null;){switch(d=$,f=d.child,d.tag){case 0:case 11:case 14:case 15:cl(4,d,d.return);break;case 1:vo(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{t=i,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zt(i,n,m)}}break;case 5:vo(d,d.return);break;case 22:if(d.memoizedState!==null){Ww(h);continue}}f!==null?(f.return=d,$=f):Ww(h)}u=u.sibling}t:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qT("display",o))}catch(m){zt(e,e.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){zt(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break t;for(;h.sibling===null;){if(h.return===null||h.return===e)break t;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sn(t,e),Un(e),i&4&&jw(e);break;case 21:break;default:Sn(t,e),Un(e)}}function Un(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(vb(n)){var i=n;break t}n=n.return}throw Error(D(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Rl(r,""),i.flags&=-33);var s=zw(e);bm(e,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=zw(e);Im(e,a,o);break;default:throw Error(D(161))}}catch(l){zt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g2(e,t,n){$=e,xb(e)}function xb(e,t,n){for(var i=(e.mode&1)!==0;$!==null;){var r=$,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Tu;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ae;a=Tu;var c=Ae;if(Tu=o,(Ae=l)&&!c)for($=r;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?Hw(r):l!==null?(l.return=o,$=l):Hw(r);for(;s!==null;)$=s,xb(s),s=s.sibling;$=r,Tu=a,Ae=c}Uw(e)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$=s):Uw(e)}}function Uw(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ae||Ef(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ae)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Cn(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Sw(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sw(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Vl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ae||t.flags&512&&Tm(t)}catch(d){zt(t,t.return,d)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function Ww(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function Hw(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ef(4,t)}catch(l){zt(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){zt(t,r,l)}}var s=t.return;try{Tm(t)}catch(l){zt(t,s,l)}break;case 5:var o=t.return;try{Tm(t)}catch(l){zt(t,o,l)}}}catch(l){zt(t,t.return,l)}if(t===e){$=null;break}var a=t.sibling;if(a!==null){a.return=t.return,$=a;break}$=t.return}}var m2=Math.ceil,ed=Ri.ReactCurrentDispatcher,C_=Ri.ReactCurrentOwner,Tn=Ri.ReactCurrentBatchConfig,ut=0,le=null,Jt=null,we=0,an=0,wo=Rr(0),ee=0,Hl=null,vs=0,xf=0,R_=0,ul=null,Ke=null,k_=0,$o=1/0,di=null,nd=!1,Sm=null,ar=null,Iu=!1,Gi=null,id=0,hl=0,Am=null,hh=-1,dh=0;function Be(){return ut&6?Kt():hh!==-1?hh:hh=Kt()}function lr(e){return e.mode&1?ut&2&&we!==0?we&-we:ZD.transition!==null?(dh===0&&(dh=sI()),dh):(e=yt,e!==0||(e=window.event,e=e===void 0?16:dI(e.type)),e):1}function Nn(e,t,n,i){if(50<hl)throw hl=0,Am=null,Error(D(185));Rc(e,n,i),(!(ut&2)||e!==le)&&(e===le&&(!(ut&2)&&(xf|=n),ee===4&&Wi(e,we)),nn(e,i),n===1&&ut===0&&!(t.mode&1)&&($o=Kt()+500,_f&&kr()))}function nn(e,t){var n=e.callbackNode;Zk(e,t);var i=$h(e,e===le?we:0);if(i===0)n!==null&&tw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&tw(n),t===1)e.tag===0?JD(qw.bind(null,e)):kI(qw.bind(null,e)),GD(function(){!(ut&6)&&kr()}),n=null;else{switch(oI(i)){case 1:n=i_;break;case 4:n=iI;break;case 16:n=Bh;break;case 536870912:n=rI;break;default:n=Bh}n=Rb(n,Tb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Tb(e,t){if(hh=-1,dh=0,ut&6)throw Error(D(327));var n=e.callbackNode;if(Ao()&&e.callbackNode!==n)return null;var i=$h(e,e===le?we:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=rd(e,i);else{t=i;var r=ut;ut|=2;var s=bb();(le!==e||we!==t)&&(di=null,$o=Kt()+500,hs(e,t));do try{v2();break}catch(a){Ib(e,a)}while(1);m_(),ed.current=s,ut=r,Jt!==null?t=0:(le=null,we=0,t=ee)}if(t!==0){if(t===2&&(r=tm(e),r!==0&&(i=r,t=Pm(e,r))),t===1)throw n=Hl,hs(e,0),Wi(e,i),nn(e,Kt()),n;if(t===6)Wi(e,i);else{if(r=e.current.alternate,!(i&30)&&!y2(r)&&(t=rd(e,i),t===2&&(s=tm(e),s!==0&&(i=s,t=Pm(e,s))),t===1))throw n=Hl,hs(e,0),Wi(e,i),nn(e,Kt()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(D(345));case 2:Hr(e,Ke,di);break;case 3:if(Wi(e,i),(i&130023424)===i&&(t=k_+500-Kt(),10<t)){if($h(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){Be(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=lm(Hr.bind(null,e,Ke,di),t);break}Hr(e,Ke,di);break;case 4:if(Wi(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-Vn(i);s=1<<o,o=t[o],o>r&&(r=o),i&=~s}if(i=r,i=Kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*m2(i/1960))-i,10<i){e.timeoutHandle=lm(Hr.bind(null,e,Ke,di),i);break}Hr(e,Ke,di);break;case 5:Hr(e,Ke,di);break;default:throw Error(D(329))}}}return nn(e,Kt()),e.callbackNode===n?Tb.bind(null,e):null}function Pm(e,t){var n=ul;return e.current.memoizedState.isDehydrated&&(hs(e,t).flags|=256),e=rd(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&Cm(t)),e}function Cm(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function y2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Fn(s(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wi(e,t){for(t&=~R_,t&=~xf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),i=1<<n;e[n]=-1,t&=~i}}function qw(e){if(ut&6)throw Error(D(327));Ao();var t=$h(e,0);if(!(t&1))return nn(e,Kt()),null;var n=rd(e,t);if(e.tag!==0&&n===2){var i=tm(e);i!==0&&(t=i,n=Pm(e,i))}if(n===1)throw n=Hl,hs(e,0),Wi(e,t),nn(e,Kt()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hr(e,Ke,di),nn(e,Kt()),null}function D_(e,t){var n=ut;ut|=1;try{return e(t)}finally{ut=n,ut===0&&($o=Kt()+500,_f&&kr())}}function ws(e){Gi!==null&&Gi.tag===0&&!(ut&6)&&Ao();var t=ut;ut|=1;var n=Tn.transition,i=yt;try{if(Tn.transition=null,yt=1,e)return e()}finally{yt=i,Tn.transition=n,ut=t,!(ut&6)&&kr()}}function M_(){an=wo.current,Rt(wo)}function hs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,KD(n)),Jt!==null)for(n=Jt.return;n!==null;){var i=n;switch(f_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Hh();break;case 3:Fo(),Rt(tn),Rt(ke),x_();break;case 5:E_(i);break;case 4:Fo();break;case 13:Rt(Lt);break;case 19:Rt(Lt);break;case 10:y_(i.type._context);break;case 22:case 23:M_()}n=n.return}if(le=e,Jt=e=cr(e.current,null),we=an=t,ee=0,Hl=null,R_=xf=vs=0,Ke=ul=null,is!==null){for(t=0;t<is.length;t++)if(n=is[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}is=null}return e}function Ib(e,t){do{var n=Jt;try{if(m_(),lh.current=td,Zh){for(var i=Ft.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Zh=!1}if(_s=0,se=te=Ft=null,ll=!1,jl=0,C_.current=null,n===null||n.return===null){ee=1,Hl=t,Jt=null;break}t:{var s=e,o=n.return,a=n,l=t;if(t=we,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Mw(o);if(f!==null){f.flags&=-257,Vw(f,o,a,s,t),f.mode&1&&Dw(s,c,t),t=f,l=c;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break t}else{if(!(t&1)){Dw(s,c,t),V_();break t}l=Error(D(426))}}else if(Mt&&a.mode&1){var _=Mw(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Vw(_,o,a,s,t),p_(Bo(l,a));break t}}s=l=Bo(l,a),ee!==4&&(ee=2),ul===null?ul=[s]:ul.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=ab(s,l,t);bw(s,g);break t;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ar===null||!ar.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=lb(s,a,t);bw(s,w);break t}}s=s.return}while(s!==null)}Ab(n)}catch(E){t=E,Jt===n&&n!==null&&(Jt=n=n.return);continue}break}while(1)}function bb(){var e=ed.current;return ed.current=td,e===null?td:e}function V_(){(ee===0||ee===3||ee===2)&&(ee=4),le===null||!(vs&268435455)&&!(xf&268435455)||Wi(le,we)}function rd(e,t){var n=ut;ut|=2;var i=bb();(le!==e||we!==t)&&(di=null,hs(e,t));do try{_2();break}catch(r){Ib(e,r)}while(1);if(m_(),ut=n,ed.current=i,Jt!==null)throw Error(D(261));return le=null,we=0,ee}function _2(){for(;Jt!==null;)Sb(Jt)}function v2(){for(;Jt!==null&&!Wk();)Sb(Jt)}function Sb(e){var t=Cb(e.alternate,e,an);e.memoizedProps=e.pendingProps,t===null?Ab(e):Jt=t,C_.current=null}function Ab(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=d2(n,t),n!==null){n.flags&=32767,Jt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ee=6,Jt=null;return}}else if(n=h2(n,t,an),n!==null){Jt=n;return}if(t=t.sibling,t!==null){Jt=t;return}Jt=t=e}while(t!==null);ee===0&&(ee=5)}function Hr(e,t,n){var i=yt,r=Tn.transition;try{Tn.transition=null,yt=1,w2(e,t,n,i)}finally{Tn.transition=r,yt=i}return null}function w2(e,t,n,i){do Ao();while(Gi!==null);if(ut&6)throw Error(D(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(tD(e,s),e===le&&(Jt=le=null,we=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Iu||(Iu=!0,Rb(Bh,function(){return Ao(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var o=yt;yt=1;var a=ut;ut|=4,C_.current=null,p2(e,n),Eb(n,e),$D(om),zh=!!sm,om=sm=null,e.current=n,g2(n),Hk(),ut=a,yt=o,Tn.transition=s}else e.current=n;if(Iu&&(Iu=!1,Gi=e,id=r),s=e.pendingLanes,s===0&&(ar=null),Gk(n.stateNode),nn(e,Kt()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(nd)throw nd=!1,e=Sm,Sm=null,e;return id&1&&e.tag!==0&&Ao(),s=e.pendingLanes,s&1?e===Am?hl++:(hl=0,Am=e):hl=0,kr(),null}function Ao(){if(Gi!==null){var e=oI(id),t=Tn.transition,n=yt;try{if(Tn.transition=null,yt=16>e?16:e,Gi===null)var i=!1;else{if(e=Gi,Gi=null,id=0,ut&6)throw Error(D(331));var r=ut;for(ut|=4,$=e.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($=c;$!==null;){var u=$;switch(u.tag){case 0:case 11:case 15:cl(8,u,s)}var h=u.child;if(h!==null)h.return=u,$=h;else for(;$!==null;){u=$;var d=u.sibling,f=u.return;if(_b(u),u===c){$=null;break}if(d!==null){d.return=f,$=d;break}$=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else t:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cl(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,$=g;break t}$=s.return}}var y=e.current;for($=y;$!==null;){o=$;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,$=v;else t:for(o=y;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ef(9,a)}}catch(E){zt(a,a.return,E)}if(a===o){$=null;break t}var w=a.sibling;if(w!==null){w.return=a.return,$=w;break t}$=a.return}}if(ut=r,kr(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(ff,e)}catch{}i=!0}return i}finally{yt=n,Tn.transition=t}}return!1}function Kw(e,t,n){t=Bo(n,t),t=ab(e,t,1),e=or(e,t,1),t=Be(),e!==null&&(Rc(e,1,t),nn(e,t))}function zt(e,t,n){if(e.tag===3)Kw(e,e,n);else for(;t!==null;){if(t.tag===3){Kw(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ar===null||!ar.has(i))){e=Bo(n,e),e=lb(t,e,1),t=or(t,e,1),e=Be(),t!==null&&(Rc(t,1,e),nn(t,e));break}}t=t.return}}function E2(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&n,le===e&&(we&n)===n&&(ee===4||ee===3&&(we&130023424)===we&&500>Kt()-k_?hs(e,0):R_|=n),nn(e,t)}function Pb(e,t){t===0&&(e.mode&1?(t=pu,pu<<=1,!(pu&130023424)&&(pu=4194304)):t=1);var n=Be();e=Si(e,t),e!==null&&(Rc(e,t,n),nn(e,n))}function x2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Pb(e,n)}function T2(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(D(314))}i!==null&&i.delete(t),Pb(e,n)}var Cb;Cb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tn.current)Qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qe=!1,u2(e,t,n);Qe=!!(e.flags&131072)}else Qe=!1,Mt&&t.flags&1048576&&DI(t,Gh,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;uh(e,t),e=t.pendingProps;var r=No(t,ke.current);So(t,n),r=I_(null,t,i,e,r,n);var s=b_();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,en(i)?(s=!0,qh(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,v_(t),r.updater=vf,t.stateNode=r,r._reactInternals=t,gm(t,i,e,n),t=_m(null,t,i,!0,s,n)):(t.tag=0,Mt&&s&&d_(t),Ne(null,t,r,n),t=t.child),t;case 16:i=t.elementType;t:{switch(uh(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=b2(i),e=Cn(i,e),r){case 0:t=ym(null,t,i,e,n);break t;case 1:t=Lw(null,t,i,e,n);break t;case 11:t=Nw(null,t,i,e,n);break t;case 14:t=Ow(null,t,i,Cn(i.type,e),n);break t}throw Error(D(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Cn(i,r),ym(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Cn(i,r),Lw(e,t,i,r,n);case 3:t:{if(db(t),e===null)throw Error(D(387));i=t.pendingProps,s=t.memoizedState,r=s.element,OI(e,t),Xh(t,i,null,n);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=Bo(Error(D(423)),t),t=Fw(e,t,i,n,r);break t}else if(i!==r){r=Bo(Error(D(424)),t),t=Fw(e,t,i,n,r);break t}else for(cn=sr(t.stateNode.containerInfo.firstChild),un=t,Mt=!0,kn=null,n=$I(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oo(),i===r){t=Ai(e,t,n);break t}Ne(e,t,i,n)}t=t.child}return t;case 5:return zI(t),e===null&&dm(t),i=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,o=r.children,am(i,r)?o=null:s!==null&&am(i,s)&&(t.flags|=32),hb(e,t),Ne(e,t,o,n),t.child;case 6:return e===null&&dm(t),null;case 13:return fb(e,t,n);case 4:return w_(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Lo(t,null,i,n):Ne(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Cn(i,r),Nw(e,t,i,r,n);case 7:return Ne(e,t,t.pendingProps,n),t.child;case 8:return Ne(e,t,t.pendingProps.children,n),t.child;case 12:return Ne(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,Et(Qh,i._currentValue),i._currentValue=o,s!==null)if(Fn(s.value,o)){if(s.children===r.children&&!tn.current){t=Ai(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=xi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),fm(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fm(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ne(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,So(t,n),r=In(r),i=i(r),t.flags|=1,Ne(e,t,i,n),t.child;case 14:return i=t.type,r=Cn(i,t.pendingProps),r=Cn(i.type,r),Ow(e,t,i,r,n);case 15:return cb(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Cn(i,r),uh(e,t),t.tag=1,en(i)?(e=!0,qh(t)):e=!1,So(t,n),FI(t,i,r),gm(t,i,r,n),_m(null,t,i,!0,e,n);case 19:return pb(e,t,n);case 22:return ub(e,t,n)}throw Error(D(156,t.tag))};function Rb(e,t){return nI(e,t)}function I2(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,t,n,i){return new I2(e,t,n,i)}function N_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function b2(e){if(typeof e=="function")return N_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===t_)return 11;if(e===e_)return 14}return 2}function cr(e,t){var n=e.alternate;return n===null?(n=En(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fh(e,t,n,i,r,s){var o=2;if(i=e,typeof e=="function")N_(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case co:return ds(n.children,r,s,t);case Zy:o=8,r|=8;break;case Bg:return e=En(12,n,t,r|2),e.elementType=Bg,e.lanes=s,e;case $g:return e=En(13,n,t,r),e.elementType=$g,e.lanes=s,e;case zg:return e=En(19,n,t,r),e.elementType=zg,e.lanes=s,e;case BT:return Tf(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case LT:o=10;break t;case FT:o=9;break t;case t_:o=11;break t;case e_:o=14;break t;case zi:o=16,i=null;break t}throw Error(D(130,e==null?e:typeof e,""))}return t=En(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function ds(e,t,n,i){return e=En(7,e,i,t),e.lanes=n,e}function Tf(e,t,n,i){return e=En(22,e,i,t),e.elementType=BT,e.lanes=n,e.stateNode={isHidden:!1},e}function Qp(e,t,n){return e=En(6,e,null,t),e.lanes=n,e}function Yp(e,t,n){return t=En(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S2(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rp(0),this.expirationTimes=Rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function O_(e,t,n,i,r,s,o,a,l){return e=new S2(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=En(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},v_(s),e}function A2(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lo,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function kb(e){if(!e)return gr;e=e._reactInternals;t:{if(Fs(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(en(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(en(n))return RI(e,n,t)}return t}function Db(e,t,n,i,r,s,o,a,l){return e=O_(n,i,!0,e,r,s,o,a,l),e.context=kb(null),n=e.current,i=Be(),r=lr(n),s=xi(i,r),s.callback=t??null,or(n,s,r),e.current.lanes=r,Rc(e,r,i),nn(e,i),e}function If(e,t,n,i){var r=t.current,s=Be(),o=lr(r);return n=kb(n),t.context===null?t.context=n:t.pendingContext=n,t=xi(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=or(r,t,o),e!==null&&(Nn(e,r,o,s),ah(e,r,o)),o}function sd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function L_(e,t){Gw(e,t),(e=e.alternate)&&Gw(e,t)}function P2(){return null}var Mb=typeof reportError=="function"?reportError:function(e){console.error(e)};function F_(e){this._internalRoot=e}bf.prototype.render=F_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));If(e,t,null,null)};bf.prototype.unmount=F_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ws(function(){If(null,e,null,null)}),t[bi]=null}};function bf(e){this._internalRoot=e}bf.prototype.unstable_scheduleHydration=function(e){if(e){var t=cI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ui.length&&t!==0&&t<Ui[n].priority;n++);Ui.splice(n,0,e),n===0&&hI(e)}};function B_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qw(){}function C2(e,t,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=sd(o);s.call(c)}}var o=Db(t,i,e,0,null,!1,!1,"",Qw);return e._reactRootContainer=o,e[bi]=o.current,Ll(e.nodeType===8?e.parentNode:e),ws(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=sd(l);a.call(c)}}var l=O_(e,0,!1,null,null,!1,!1,"",Qw);return e._reactRootContainer=l,e[bi]=l.current,Ll(e.nodeType===8?e.parentNode:e),ws(function(){If(t,l,n,i)}),l}function Af(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=sd(o);a.call(l)}}If(t,o,e,r)}else o=C2(n,t,e,r,i);return sd(o)}aI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ba(t.pendingLanes);n!==0&&(r_(t,n|1),nn(t,Kt()),!(ut&6)&&($o=Kt()+500,kr()))}break;case 13:ws(function(){var i=Si(e,1);if(i!==null){var r=Be();Nn(i,e,1,r)}}),L_(e,1)}};s_=function(e){if(e.tag===13){var t=Si(e,134217728);if(t!==null){var n=Be();Nn(t,e,134217728,n)}L_(e,134217728)}};lI=function(e){if(e.tag===13){var t=lr(e),n=Si(e,t);if(n!==null){var i=Be();Nn(n,e,t,i)}L_(e,t)}};cI=function(){return yt};uI=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}};Xg=function(e,t,n){switch(t){case"input":if(Wg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=yf(i);if(!r)throw Error(D(90));zT(i),Wg(i,r)}}}break;case"textarea":UT(e,n);break;case"select":t=n.value,t!=null&&xo(e,!!n.multiple,t,!1)}};YT=D_;XT=ws;var R2={usingClientEntryPoint:!1,Events:[Dc,po,yf,GT,QT,D_]},Ia={findFiberByHostInstance:ns,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},k2={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tI(e),e===null?null:e.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||P2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{ff=bu.inject(k2),ti=bu}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R2;pn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B_(t))throw Error(D(200));return A2(e,t,null,n)};pn.createRoot=function(e,t){if(!B_(e))throw Error(D(299));var n=!1,i="",r=Mb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=O_(e,1,!1,null,null,n,!1,i,r),e[bi]=t.current,Ll(e.nodeType===8?e.parentNode:e),new F_(t)};pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=tI(t),e=e===null?null:e.stateNode,e};pn.flushSync=function(e){return ws(e)};pn.hydrate=function(e,t,n){if(!Sf(t))throw Error(D(200));return Af(null,e,t,!0,n)};pn.hydrateRoot=function(e,t,n){if(!B_(e))throw Error(D(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Mb;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Db(t,null,e,1,n??null,r,!1,s,o),e[bi]=t.current,Ll(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new bf(t)};pn.render=function(e,t,n){if(!Sf(t))throw Error(D(200));return Af(null,e,t,!1,n)};pn.unmountComponentAtNode=function(e){if(!Sf(e))throw Error(D(40));return e._reactRootContainer?(ws(function(){Af(null,null,e,!1,function(){e._reactRootContainer=null,e[bi]=null})}),!0):!1};pn.unstable_batchedUpdates=D_;pn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Sf(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Af(e,t,n,!1,i)};pn.version="18.2.0-next-9e3b772b8-20220608";function Vb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vb)}catch(e){console.error(e)}}Vb(),DT.exports=pn;var D2=DT.exports,Yw=D2;Lg.createRoot=Yw.createRoot,Lg.hydrateRoot=Yw.hydrateRoot;var Su,M2=new Uint8Array(16);function V2(){if(!Su&&(Su=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Su))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Su(M2)}const N2=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function O2(e){return typeof e=="string"&&N2.test(e)}var ge=[];for(var Xp=0;Xp<256;++Xp)ge.push((Xp+256).toString(16).substr(1));function L2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ge[e[t+0]]+ge[e[t+1]]+ge[e[t+2]]+ge[e[t+3]]+"-"+ge[e[t+4]]+ge[e[t+5]]+"-"+ge[e[t+6]]+ge[e[t+7]]+"-"+ge[e[t+8]]+ge[e[t+9]]+"-"+ge[e[t+10]]+ge[e[t+11]]+ge[e[t+12]]+ge[e[t+13]]+ge[e[t+14]]+ge[e[t+15]]).toLowerCase();if(!O2(n))throw TypeError("Stringified UUID is invalid");return n}function F2(e,t,n){e=e||{};var i=e.random||(e.rng||V2)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return L2(i)}/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ql.apply(this,arguments)}var ss;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ss||(ss={}));const Xw="popstate";function B2(e){e===void 0&&(e={});function t(i,r){let{pathname:s,search:o,hash:a}=i.location;return Rm("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:od(r)}return z2(t,n,null,e)}function On(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $2(){return Math.random().toString(36).substr(2,8)}function Jw(e,t){return{usr:e.state,key:e.key,idx:t}}function Rm(e,t,n,i){return n===void 0&&(n=null),ql({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Pf(t):t,{state:n,key:t&&t.key||i||$2()})}function od(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Pf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function z2(e,t,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=ss.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(ql({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=ss.Pop;let _=u(),g=_==null?null:_-c;c=_,l&&l({action:a,location:m.location,delta:g})}function d(_,g){a=ss.Push;let y=Rm(m.location,_,g);n&&n(y,_),c=u()+1;let v=Jw(y,c),w=m.createHref(y);try{o.pushState(v,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign(w)}s&&l&&l({action:a,location:m.location,delta:1})}function f(_,g){a=ss.Replace;let y=Rm(m.location,_,g);n&&n(y,_),c=u();let v=Jw(y,c),w=m.createHref(y);o.replaceState(v,"",w),s&&l&&l({action:a,location:m.location,delta:0})}function p(_){let g=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof _=="string"?_:od(_);return On(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let m={get action(){return a},get location(){return e(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Xw,h),l=_,()=>{r.removeEventListener(Xw,h),l=null}},createHref(_){return t(r,_)},createURL:p,encodeLocation(_){let g=p(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(_){return o.go(_)}};return m}var Zw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Zw||(Zw={}));function Nb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function j2(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?Pf(e):e;return{pathname:n?n.startsWith("/")?n:U2(n,t):t,search:W2(i),hash:H2(r)}}function U2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Jp(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ob(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Lb(e,t,n,i){i===void 0&&(i=!1);let r;typeof e=="string"?r=Pf(e):(r=ql({},e),On(!r.pathname||!r.pathname.includes("?"),Jp("?","pathname","search",r)),On(!r.pathname||!r.pathname.includes("#"),Jp("#","pathname","hash",r)),On(!r.search||!r.search.includes("#"),Jp("#","search","hash",r)));let s=e===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let h=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}a=h>=0?t[h]:"/"}let l=j2(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Fb=e=>e.join("/").replace(/\/\/+/g,"/"),W2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,H2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Bb=["post","put","patch","delete"];new Set(Bb);const q2=["get",...Bb];new Set(q2);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},km.apply(this,arguments)}const $b=C.createContext(null),Vc=C.createContext(null),$_=C.createContext(null),Cf=C.createContext({outlet:null,matches:[],isDataRoute:!1});function K2(e,t){let{relative:n}=t===void 0?{}:t;Rf()||On(!1);let{basename:i,navigator:r}=C.useContext(Vc),{hash:s,pathname:o,search:a}=jb(e,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Fb([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Rf(){return C.useContext($_)!=null}function z_(){return Rf()||On(!1),C.useContext($_).location}function zb(e){C.useContext(Vc).static||C.useLayoutEffect(e)}function G2(){let{isDataRoute:e}=C.useContext(Cf);return e?Z2():Q2()}function Q2(){Rf()||On(!1);let e=C.useContext($b),{basename:t,navigator:n}=C.useContext(Vc),{matches:i}=C.useContext(Cf),{pathname:r}=z_(),s=JSON.stringify(Ob(i).map(l=>l.pathnameBase)),o=C.useRef(!1);return zb(()=>{o.current=!0}),C.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=Lb(l,JSON.parse(s),r,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Fb([t,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[t,n,s,r,e])}function jb(e,t){let{relative:n}=t===void 0?{}:t,{matches:i}=C.useContext(Cf),{pathname:r}=z_(),s=JSON.stringify(Ob(i).map(o=>o.pathnameBase));return C.useMemo(()=>Lb(e,JSON.parse(s),r,n==="path"),[e,s,r,n])}var Ub=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ub||{}),Wb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wb||{});function Y2(e){let t=C.useContext($b);return t||On(!1),t}function X2(e){let t=C.useContext(Cf);return t||On(!1),t}function J2(e){let t=X2(),n=t.matches[t.matches.length-1];return n.route.id||On(!1),n.route.id}function Z2(){let{router:e}=Y2(Ub.UseNavigateStable),t=J2(Wb.UseNavigateStable),n=C.useRef(!1);return zb(()=>{n.current=!0}),C.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,km({fromRouteId:t},s)))},[e,t])}function tM(e){let{basename:t="/",children:n=null,location:i,navigationType:r=ss.Pop,navigator:s,static:o=!1}=e;Rf()&&On(!1);let a=t.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=Pf(i));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:f="default"}=i,p=C.useMemo(()=>{let m=Nb(c,a);return m==null?null:{location:{pathname:m,search:u,hash:h,state:d,key:f},navigationType:r}},[a,c,u,h,d,f,r]);return p==null?null:C.createElement(Vc.Provider,{value:l},C.createElement($_.Provider,{children:n,value:p}))}new Promise(()=>{});/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dm.apply(this,arguments)}function eM(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function nM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iM(e,t){return e.button===0&&(!t||t==="_self")&&!nM(e)}const rM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],sM="startTransition",t1=xk[sM];function oM(e){let{basename:t,children:n,future:i,window:r}=e,s=C.useRef();s.current==null&&(s.current=B2({window:r,v5Compat:!0}));let o=s.current,[a,l]=C.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=C.useCallback(h=>{c&&t1?t1(()=>l(h)):l(h)},[l,c]);return C.useLayoutEffect(()=>o.listen(u),[o,u]),C.createElement(tM,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}const aM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e1=C.forwardRef(function(t,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:h}=t,d=eM(t,rM),{basename:f}=C.useContext(Vc),p,m=!1;if(typeof c=="string"&&lM.test(c)&&(p=c,aM))try{let v=new URL(window.location.href),w=c.startsWith("//")?new URL(v.protocol+c):new URL(c),E=Nb(w.pathname,f);w.origin===v.origin&&E!=null?c=E+w.search+w.hash:m=!0}catch{}let _=K2(c,{relative:r}),g=cM(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,unstable_viewTransition:h});function y(v){i&&i(v),v.defaultPrevented||g(v)}return C.createElement("a",Dm({},d,{href:p||_,onClick:m||s?i:y,ref:n,target:l}))});var n1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(n1||(n1={}));var i1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(i1||(i1={}));function cM(e,t){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,l=G2(),c=z_(),u=jb(e,{relative:o});return C.useCallback(h=>{if(iM(h,n)){h.preventDefault();let d=i!==void 0?i:od(c)===od(u);l(e,{replace:d,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,i,r,n,e,s,o,a])}const r1=[{path:"/",text:"Home",dom:"home"},{path:"/profile",text:"Profile",dom:"profile"},{path:"/about",text:"About",dom:"about"},{path:"/contact",text:"Contact",dom:"contact"}],uM="/assets/_logo-4c0f2ca5.svg";const hM=()=>{const e=t=>{const n=t.currentTarget.getAttribute("link");document.getElementsByClassName(n)[0].scrollIntoView({behavior:"smooth",block:"start"})};return R.jsx("header",{children:R.jsx("nav",{children:R.jsxs("ul",{children:[r1.slice(0,2).map(t=>R.jsx("li",{children:R.jsx(e1,{to:t.path,link:t.dom,onClick:e,children:t.text})},t.path)),R.jsx("li",{className:"center",children:R.jsx("img",{src:uM,alt:"logo",id:"logo"})}),r1.slice(2,4).map(t=>R.jsx("li",{children:R.jsx(e1,{to:t.path,link:t.dom,onClick:e,children:t.text})},t.path))]})})})},Hb=C.createContext(null),eo="4.18.0";let s1=!1,dl,qb,Kb,Mm,Gb,Qb,Yb,Xb,Jb;function dM(e,t={auto:!1}){if(s1)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(dl)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${dl}'\``);s1=t.auto,dl=e.kind,qb=e.fetch,e.Request,e.Response,e.Headers,Kb=e.FormData,e.Blob,Mm=e.File,Gb=e.ReadableStream,Qb=e.getMultipartRequestOptions,Yb=e.getDefaultAgent,Xb=e.fileFromPath,Jb=e.isFsReadStream}class fM{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function pM({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,i,r,s;try{n=fetch,i=Request,r=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:i,Response:r,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new fM(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}dl||dM(pM(),{auto:!0});class ft extends Error{}class De extends ft{constructor(t,n,i,r){super(`${De.makeMessage(t,n,i)}`),this.status=t,this.headers=r;const s=n;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(t,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,n,i,r){if(!t)return new kf({cause:Nm(n)});const s=n==null?void 0:n.error;return t===400?new Zb(t,s,i,r):t===401?new tS(t,s,i,r):t===403?new eS(t,s,i,r):t===404?new nS(t,s,i,r):t===409?new iS(t,s,i,r):t===422?new rS(t,s,i,r):t===429?new sS(t,s,i,r):t>=500?new oS(t,s,i,r):new De(t,s,i,r)}}class Es extends De{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class kf extends De{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class j_ extends kf{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Zb extends De{constructor(){super(...arguments),this.status=400}}class tS extends De{constructor(){super(...arguments),this.status=401}}class eS extends De{constructor(){super(...arguments),this.status=403}}class nS extends De{constructor(){super(...arguments),this.status=404}}class iS extends De{constructor(){super(...arguments),this.status=409}}class rS extends De{constructor(){super(...arguments),this.status=422}}class sS extends De{constructor(){super(...arguments),this.status=429}}class oS extends De{}class Qi{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let i=!1;const r=new gM;async function*s(){if(!t.body)throw n.abort(),new ft("Attempted to iterate over a response with no body");const a=new xs,l=o1(t.body);for await(const c of l)for(const u of a.decode(c)){const h=r.decode(u);h&&(yield h)}for(const c of a.flush()){const u=r.decode(c);u&&(yield u)}}async function*o(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const l of s())if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null){let c;try{c=JSON.parse(l.data)}catch(u){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),u}if(c&&c.error)throw new De(void 0,c.error,void 0,void 0);yield c}}a=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{a||n.abort()}}return new Qi(o,n)}static fromReadableStream(t,n){let i=!1;async function*r(){const o=new xs,a=o1(t);for await(const l of a)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*s(){if(i)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const a of r())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||n.abort()}}return new Qi(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const o=i.next();t.push(o),n.push(o)}return s.shift()}});return[new Qi(()=>r(t),this.controller),new Qi(()=>r(n),this.controller)]}toReadableStream(){const t=this;let n;const i=new TextEncoder;return new Gb({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:o}=await n.next();if(o)return r.close();const a=i.encode(JSON.stringify(s)+`
`);r.enqueue(a)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}class gM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,r]=mM(t,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}class xs{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const i=xs.NEWLINE_CHARS.has(n[n.length-1]||"");let r=n.split(xs.NEWLINE_REGEXP);return r.length===1&&!i?(this.buffer.push(r[0]),[]):(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),i||(this.buffer=[r.pop()||""]),r)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new ft(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new ft(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new ft("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}xs.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);xs.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function mM(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function o1(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const aS=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",yM=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&lS(e),lS=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",_M=e=>yM(e)||aS(e)||Jb(e);async function cS(e,t,n={}){var r;if(e=await e,aS(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Mm([s],t,n)}const i=await vM(e);if(t||(t=EM(e)??"unknown_file"),!n.type){const s=(r=i[0])==null?void 0:r.type;typeof s=="string"&&(n={...n,type:s})}return new Mm(i,t,n)}async function vM(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(lS(e))t.push(await e.arrayBuffer());else if(xM(e))for await(const i of e)t.push(i);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${wM(e)}`);return t}function wM(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function EM(e){var t;return Zp(e.name)||Zp(e.filename)||((t=Zp(e.path))==null?void 0:t.split(/[\\/]/).pop())}const Zp=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},xM=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",a1=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",Kl=async e=>{const t=await TM(e.body);return Qb(t,e)},TM=async e=>{const t=new Kb;return await Promise.all(Object.entries(e||{}).map(([n,i])=>Vm(t,n,i))),t},Vm=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(_M(n)){const i=await cS(n);e.append(t,i)}else if(Array.isArray(n))await Promise.all(n.map(i=>Vm(e,t+"[]",i)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,r])=>Vm(e,`${t}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var IM=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},bM=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},Au;async function uS(e){const{response:t}=e;if(e.options.stream)return fl("response",t.status,t.url,t.headers,t.body),Qi.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if(n!=null&&n.includes("application/json")){const r=await t.json();return fl("response",t.status,t.url,t.headers,r),r}const i=await t.text();return fl("response",t.status,t.url,t.headers,i),i}class Df extends Promise{constructor(t,n=uS){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new Df(this.responsePromise,async n=>t(await this.parseResponse(n)))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class SM{constructor({baseURL:t,maxRetries:n=2,timeout:i=6e5,httpAgent:r,fetch:s}){this.baseURL=t,this.maxRetries=tg("maxRetries",n),this.timeout=tg("timeout",i),this.httpAgent=r,this.fetch=s??qb}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...DM(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${LM()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(r=>({method:t,path:n,...r})))}getAPIList(t,n,i){return this.requestAPIList(n,{method:"get",path:t,...i})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}return null}buildRequest(t){var p;const{method:n,path:i,query:r,headers:s={}}=t,o=a1(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,a=this.calculateContentLength(o),l=this.buildURL(i,r);"timeout"in t&&tg("timeout",t.timeout);const c=t.timeout??this.timeout,u=t.httpAgent??this.httpAgent??Yb(l),h=c+1e3;typeof((p=u==null?void 0:u.options)==null?void 0:p.timeout)=="number"&&h>(u.options.timeout??0)&&(u.options.timeout=h),this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const d={...a&&{"Content-Length":a},...this.defaultHeaders(t),...s};a1(t.body)&&dl!=="node"&&delete d["Content-Type"],Object.keys(d).forEach(m=>d[m]===null&&delete d[m]);const f={method:n,...o&&{body:o},headers:d,...u&&{agent:u},signal:t.signal??null};return this.validateHeaders(d,s),{req:f,url:l,timeout:c}}async prepareRequest(t,{url:n,options:i}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,i,r){return De.generate(t,n,i,r)}request(t,n=null){return new Df(this.makeRequest(t,n))}async makeRequest(t,n){var u,h;const i=await t;n==null&&(n=i.maxRetries??this.maxRetries);const{req:r,url:s,timeout:o}=this.buildRequest(i);if(await this.prepareRequest(r,{url:s,options:i}),fl("request",s,i,r.headers),(u=i.signal)!=null&&u.aborted)throw new Es;const a=new AbortController,l=await this.fetchWithTimeout(s,r,o,a).catch(Nm);if(l instanceof Error){if((h=i.signal)!=null&&h.aborted)throw new Es;if(n)return this.retryRequest(i,n);throw l.name==="AbortError"?new j_:new kf({cause:l})}const c=PM(l.headers);if(!l.ok){if(n&&this.shouldRetry(l))return this.retryRequest(i,n,c);const d=await l.text().catch(_=>Nm(_).message),f=MM(d),p=f?void 0:d;throw fl("response",l.status,s,c,p),this.makeStatusError(l.status,f,p,c)}return{response:l,options:i,controller:a}}requestAPIList(t,n){const i=this.makeRequest(n,null);return new AM(this,i,t)}buildURL(t,n){const i=NM(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),r=this.defaultQuery();return fS(r)||(n={...r,...n}),n&&(i.search=this.stringifyQuery(n)),i.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new ft(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,i,r){const{signal:s,...o}=n||{};s&&s.addEventListener("abort",()=>r.abort());const a=setTimeout(()=>r.abort(),i);return this.getRequestClient().fetch.call(void 0,t,{signal:r.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i){let r;const s=i==null?void 0:i["retry-after"];if(s){const o=parseInt(s);Number.isNaN(o)?r=Date.parse(s)-Date.now():r=o*1e3}if(!r||!Number.isInteger(r)||r<=0||r>60*1e3){const o=t.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,o)}return await dS(r),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${eo}`}}class hS{constructor(t,n,i,r){Au.set(this,void 0),IM(this,Au,t,"f"),this.options=r,this.response=n,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new ft("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t)n.query={...n.query,...t.params};else if("url"in t){const i=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[r,s]of i)t.url.searchParams.set(r,s);n.query=void 0,n.path=t.url.toString()}return await bM(this,Au,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Au=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class AM extends Df{constructor(t,n,i){super(n,async r=>new i(t,r.response,await uS(r),r.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const PM=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const i=n.toString();return t[i.toLowerCase()]||t[i]}}),CM={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},ri=e=>typeof e=="object"&&e!==null&&!fS(e)&&Object.keys(e).every(t=>OM(CM,t)),RM=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":c1(Deno.build.os),"X-Stainless-Arch":l1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":c1(process.platform),"X-Stainless-Arch":l1(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=kM();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kM(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,o=i[3]||0;return{browser:t,version:`${r}.${s}.${o}`}}}return null}const l1=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",c1=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let u1;const DM=()=>u1??(u1=RM()),MM=e=>{try{return JSON.parse(e)}catch{return}},VM=new RegExp("^(?:[a-z]+:)?//","i"),NM=e=>VM.test(e),dS=e=>new Promise(t=>setTimeout(t,e)),tg=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ft(`${e} must be an integer`);if(t<0)throw new ft(`${e} must be a positive integer`);return t},Nm=e=>e instanceof Error?e:new Error(e),h1=e=>{var t,n,i;if(typeof process<"u")return((t=process.env)==null?void 0:t[e])??void 0;if(typeof Deno<"u")return(i=(n=Deno.env)==null?void 0:n.get)==null?void 0:i.call(n,e)};function fS(e){if(!e)return!0;for(const t in e)return!1;return!0}function OM(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fl(e,...t){typeof process<"u"&&process.env.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const LM=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),FM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Mf extends hS{constructor(t,n,i,r){super(t,n,i,r),this.data=i.data,this.object=i.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class ki extends hS{constructor(t,n,i,r){super(t,n,i,r),this.data=i.data}getPaginatedItems(){return this.data}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var n,i;if(!((n=this.data)!=null&&n.length))return null;const t=(i=this.data[this.data.length-1])==null?void 0:i.id;return t?{params:{after:t}}:null}}class Tt{constructor(t){this.client=t,this.get=t.get.bind(t),this.post=t.post.bind(t),this.patch=t.patch.bind(t),this.put=t.put.bind(t),this.delete=t.delete.bind(t),this.getAPIList=t.getAPIList.bind(t)}}let ad=class extends Tt{create(t,n){return this.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}};ad||(ad={});let ld=class extends Tt{constructor(){super(...arguments),this.completions=new ad(this.client)}};(function(e){e.Completions=ad})(ld||(ld={}));class cd extends Tt{create(t,n){return this.post("/audio/speech",{body:t,...n,__binaryResponse:!0})}}cd||(cd={});class ud extends Tt{create(t,n){return this.post("/audio/transcriptions",Kl({body:t,...n}))}}ud||(ud={});class hd extends Tt{create(t,n){return this.post("/audio/translations",Kl({body:t,...n}))}}hd||(hd={});class dd extends Tt{constructor(){super(...arguments),this.transcriptions=new ud(this.client),this.translations=new hd(this.client),this.speech=new cd(this.client)}}(function(e){e.Transcriptions=ud,e.Translations=hd,e.Speech=cd})(dd||(dd={}));let fd=class extends Tt{create(t,n,i){return this.post(`/assistants/${t}/files`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}retrieve(t,n,i){return this.get(`/assistants/${t}/files/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t,n={},i){return ri(n)?this.list(t,{},n):this.getAPIList(`/assistants/${t}/files`,U_,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}del(t,n,i){return this.delete(`/assistants/${t}/files/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class U_ extends ki{}(function(e){e.AssistantFilesPage=U_})(fd||(fd={}));class pd extends Tt{constructor(){super(...arguments),this.files=new fd(this.client)}create(t,n){return this.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(t,n){return this.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(t,n,i){return this.post(`/assistants/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(t={},n){return ri(t)?this.list({},t):this.getAPIList("/assistants",W_,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(t,n){return this.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class W_ extends ki{}(function(e){e.AssistantsPage=W_,e.Files=fd,e.AssistantFilesPage=U_})(pd||(pd={}));function d1(e){return typeof e.parse=="function"}const Gl=e=>(e==null?void 0:e.role)==="assistant",pS=e=>(e==null?void 0:e.role)==="function",BM=e=>(e==null?void 0:e.role)==="tool";var An=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},nt=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},Ve,ph,gh,za,ja,mh,Ua,ci,Wa,yh,_h,no,Om,Lm,Fm,Bm,$m,zm,gS,jm;const f1=10;class mS{constructor(){Ve.add(this),this.controller=new AbortController,ph.set(this,void 0),gh.set(this,()=>{}),za.set(this,()=>{}),ja.set(this,void 0),mh.set(this,()=>{}),Ua.set(this,()=>{}),ci.set(this,{}),this._chatCompletions=[],this.messages=[],Wa.set(this,!1),yh.set(this,!1),_h.set(this,!1),no.set(this,!1),zm.set(this,t=>{if(An(this,yh,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Es),t instanceof Es)return An(this,_h,!0,"f"),this._emit("abort",t);if(t instanceof ft)return this._emit("error",t);if(t instanceof Error){const n=new ft(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new ft(String(t)))}),An(this,ph,new Promise((t,n)=>{An(this,gh,t,"f"),An(this,za,n,"f")}),"f"),An(this,ja,new Promise((t,n)=>{An(this,mh,t,"f"),An(this,Ua,n,"f")}),"f"),nt(this,ph,"f").catch(()=>{}),nt(this,ja,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},nt(this,zm,"f"))},0)}_addChatCompletion(t){var i;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(i=t.choices[0])==null?void 0:i.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if(this.messages.push(t),n){if(this._emit("message",t),(pS(t)||BM(t))&&t.content)this._emit("functionCallResult",t.content);else if(Gl(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(Gl(t)&&t.tool_calls)for(const i of t.tool_calls)i.type==="function"&&this._emit("functionCall",i.function)}}_connected(){this.ended||(nt(this,gh,"f").call(this),this._emit("connect"))}get ended(){return nt(this,Wa,"f")}get errored(){return nt(this,yh,"f")}get aborted(){return nt(this,_h,"f")}abort(){this.controller.abort()}on(t,n){return(nt(this,ci,"f")[t]||(nt(this,ci,"f")[t]=[])).push({listener:n}),this}off(t,n){const i=nt(this,ci,"f")[t];if(!i)return this;const r=i.findIndex(s=>s.listener===n);return r>=0&&i.splice(r,1),this}once(t,n){return(nt(this,ci,"f")[t]||(nt(this,ci,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,i)=>{An(this,no,!0,"f"),t!=="error"&&this.once("error",i),this.once(t,n)})}async done(){An(this,no,!0,"f"),await nt(this,ja,"f")}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new ft("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),nt(this,Ve,"m",Om).call(this)}async finalMessage(){return await this.done(),nt(this,Ve,"m",Lm).call(this)}async finalFunctionCall(){return await this.done(),nt(this,Ve,"m",Fm).call(this)}async finalFunctionCallResult(){return await this.done(),nt(this,Ve,"m",Bm).call(this)}async totalUsage(){return await this.done(),nt(this,Ve,"m",$m).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...n){if(nt(this,Wa,"f"))return;t==="end"&&(An(this,Wa,!0,"f"),nt(this,mh,"f").call(this));const i=nt(this,ci,"f")[t];if(i&&(nt(this,ci,"f")[t]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...n))),t==="abort"){const r=n[0];!nt(this,no,"f")&&!(i!=null&&i.length)&&Promise.reject(r),nt(this,za,"f").call(this,r),nt(this,Ua,"f").call(this,r),this._emit("end");return}if(t==="error"){const r=n[0];!nt(this,no,"f")&&!(i!=null&&i.length)&&Promise.reject(r),nt(this,za,"f").call(this,r),nt(this,Ua,"f").call(this,r),this._emit("end")}}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=this.messages[this.messages.length-1];n&&this._emit("finalMessage",n);const i=nt(this,Ve,"m",Om).call(this);i&&this._emit("finalContent",i);const r=nt(this,Ve,"m",Fm).call(this);r&&this._emit("finalFunctionCall",r);const s=nt(this,Ve,"m",Bm).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",nt(this,Ve,"m",$m).call(this))}async _createChatCompletion(t,n,i){const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),nt(this,Ve,"m",gS).call(this,n);const s=await t.create({...n,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(t,n,i){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(t,n,i)}async _runFunctions(t,n,i){var d;const r="function",{function_call:s="auto",stream:o,...a}=n,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:c=f1}=i||{},u={};for(const f of n.functions)u[f.name||f.function.name]=f;const h=n.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of n.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const m=(d=(await this._createChatCompletion(t,{...a,function_call:s,functions:h,messages:[...this.messages]},i)).choices[0])==null?void 0:d.message;if(!m)throw new ft("missing message in ChatCompletion response");if(!m.function_call)return;const{name:_,arguments:g}=m.function_call,y=u[_];if(y){if(l&&l!==_){const x=`Invalid function_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,name:_,content:x});continue}}else{const x=`Invalid function_call: ${JSON.stringify(_)}. Available options are: ${h.map(T=>JSON.stringify(T.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:_,content:x});continue}let v;try{v=d1(y)?await y.parse(g):g}catch(x){this._addMessage({role:r,name:_,content:x instanceof Error?x.message:String(x)});continue}const w=await y.function(v,this),E=nt(this,Ve,"m",jm).call(this,w);if(this._addMessage({role:r,name:_,content:E}),l)return}}async _runTools(t,n,i){var d,f;const r="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&((d=s==null?void 0:s.function)==null?void 0:d.name),{maxChatCompletions:c=f1}=i||{},u={};for(const p of n.tools)p.type==="function"&&(u[p.function.name||p.function.function.name]=p.function);const h="tools"in n?n.tools.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description}}:p):void 0;for(const p of n.messages)this._addMessage(p,!1);for(let p=0;p<c;++p){const _=(f=(await this._createChatCompletion(t,{...a,tool_choice:s,tools:h,messages:[...this.messages]},i)).choices[0])==null?void 0:f.message;if(!_)throw new ft("missing message in ChatCompletion response");if(!_.tool_calls)return;for(const g of _.tool_calls){if(g.type!=="function")continue;const y=g.id,{name:v,arguments:w}=g.function,E=u[v];if(E){if(l&&l!==v){const k=`Invalid tool_call: ${JSON.stringify(v)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:y,content:k});continue}}else{const k=`Invalid tool_call: ${JSON.stringify(v)}. Available options are: ${h.map(M=>JSON.stringify(M.function.name)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:y,content:k});continue}let x;try{x=d1(E)?await E.parse(w):w}catch(k){const M=k instanceof Error?k.message:String(k);this._addMessage({role:r,tool_call_id:y,content:M});continue}const T=await E.function(x,this),I=nt(this,Ve,"m",jm).call(this,T);if(this._addMessage({role:r,tool_call_id:y,content:I}),l)return}}}}ph=new WeakMap,gh=new WeakMap,za=new WeakMap,ja=new WeakMap,mh=new WeakMap,Ua=new WeakMap,ci=new WeakMap,Wa=new WeakMap,yh=new WeakMap,_h=new WeakMap,no=new WeakMap,zm=new WeakMap,Ve=new WeakSet,Om=function(){return nt(this,Ve,"m",Lm).call(this).content},Lm=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(Gl(n))return n}throw new ft("stream ended without producing a ChatCompletionMessage with role=assistant")},Fm=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(Gl(n)&&(n!=null&&n.function_call))return n.function_call}},Bm=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(pS(n)&&n.content!=null)return n.content}},$m=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},gS=function(t){if(t.n!=null&&t.n>1)throw new ft("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},jm=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Ql extends mS{static runFunctions(t,n,i){const r=new Ql;return r._run(()=>r._runFunctions(t,n,i)),r}static runTools(t,n,i){const r=new Ql;return r._run(()=>r._runTools(t,n,i)),r}_addMessage(t){super._addMessage(t),Gl(t)&&t.content&&this._emit("content",t.content)}}var Pn=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},eg=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},Wn,Oi,ng,ig,Pu,p1;class Yl extends mS{constructor(){super(...arguments),Wn.add(this),Oi.set(this,void 0)}get currentChatCompletionSnapshot(){return Pn(this,Oi,"f")}static fromReadableStream(t){const n=new Yl;return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,i){const r=new Yl;return r._run(()=>r._runChatCompletion(t,{...n,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(t,n,i){var o;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Pn(this,Wn,"m",ng).call(this);const s=await t.create({...n,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const a of s)Pn(this,Wn,"m",ig).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new Es;return this._addChatCompletion(Pn(this,Wn,"m",Pu).call(this))}async _fromReadableStream(t,n){var o;const i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Pn(this,Wn,"m",ng).call(this),this._connected();const r=Qi.fromReadableStream(t,this.controller);let s;for await(const a of r)s&&s!==a.id&&this._addChatCompletion(Pn(this,Wn,"m",Pu).call(this)),Pn(this,Wn,"m",ig).call(this,a),s=a.id;if((o=r.controller.signal)!=null&&o.aborted)throw new Es;return this._addChatCompletion(Pn(this,Wn,"m",Pu).call(this))}[(Oi=new WeakMap,Wn=new WeakSet,ng=function(){this.ended||eg(this,Oi,void 0,"f")},ig=function(n){var o,a,l;if(this.ended)return;const i=Pn(this,Wn,"m",p1).call(this,n);this._emit("chunk",n,i);const r=(a=(o=n.choices[0])==null?void 0:o.delta)==null?void 0:a.content,s=(l=i.choices[0])==null?void 0:l.message;r!=null&&(s==null?void 0:s.role)==="assistant"&&(s!=null&&s.content)&&this._emit("content",r,s.content)},Pu=function(){if(this.ended)throw new ft("stream has ended, this shouldn't happen");const n=Pn(this,Oi,"f");if(!n)throw new ft("request ended without sending any chunks");return eg(this,Oi,void 0,"f"),$M(n)},p1=function(n){var i,r;let s=Pn(this,Oi,"f");const{choices:o,...a}=n;s?Object.assign(s,a):s=eg(this,Oi,{...a,choices:[]},"f");for(const{delta:l,finish_reason:c,index:u,...h}of n.choices){let d=s.choices[u];if(!d){s.choices[u]={finish_reason:c,index:u,message:l,...h};continue}if(c&&(d.finish_reason=c),Object.assign(d,h),!l)continue;const{content:f,function_call:p,role:m,tool_calls:_}=l;if(f&&(d.message.content=(d.message.content||"")+f),m&&(d.message.role=m),p&&(d.message.function_call?(p.name&&(d.message.function_call.name=p.name),p.arguments&&((i=d.message.function_call).arguments??(i.arguments=""),d.message.function_call.arguments+=p.arguments)):d.message.function_call=p),_){d.message.tool_calls||(d.message.tool_calls=[]);for(const{index:g,id:y,type:v,function:w}of _){const E=(r=d.message.tool_calls)[g]??(r[g]={});y&&(E.id=y),v&&(E.type=v),w&&(E.function??(E.function={arguments:""})),w!=null&&w.name&&(E.function.name=w.name),w!=null&&w.arguments&&(E.function.arguments+=w.arguments)}}}return s},Symbol.asyncIterator)](){const t=[],n=[];let i=!1;return this.on("chunk",r=>{const s=n.shift();s?s(r):t.push(r)}),this.on("end",()=>{i=!0;for(const r of n)r(void 0);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise(s=>n.push(s)).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0})}}toReadableStream(){return new Qi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function $M(e){const{id:t,choices:n,created:i,model:r}=e;return{id:t,choices:n.map(({message:s,finish_reason:o,index:a})=>{if(!o)throw new ft(`missing finish_reason for choice ${a}`);const{content:l=null,function_call:c,tool_calls:u}=s,h=s.role;if(!h)throw new ft(`missing role for choice ${a}`);if(c){const{arguments:d,name:f}=c;if(d==null)throw new ft(`missing function_call.arguments for choice ${a}`);if(!f)throw new ft(`missing function_call.name for choice ${a}`);return{message:{content:l,function_call:{arguments:d,name:f},role:h},finish_reason:o,index:a}}return u?{index:a,finish_reason:o,message:{role:h,content:l,tool_calls:u.map((d,f)=>{const{function:p,type:m,id:_}=d,{arguments:g,name:y}=p||{};if(_==null)throw new ft(`missing choices[${a}].tool_calls[${f}].id
${Cu(e)}`);if(m==null)throw new ft(`missing choices[${a}].tool_calls[${f}].type
${Cu(e)}`);if(y==null)throw new ft(`missing choices[${a}].tool_calls[${f}].function.name
${Cu(e)}`);if(g==null)throw new ft(`missing choices[${a}].tool_calls[${f}].function.arguments
${Cu(e)}`);return{id:_,type:m,function:{name:y,arguments:g}}})}}:{message:{content:l,role:h},finish_reason:o,index:a}}),created:i,model:r,object:"chat.completion"}}function Cu(e){return JSON.stringify(e)}class Po extends Yl{static fromReadableStream(t){const n=new Po;return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,i){const r=new Po;return r._run(()=>r._runFunctions(t,n,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runFunctions"}})),r}static runTools(t,n,i){const r=new Po;return r._run(()=>r._runTools(t,n,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}})),r}}let yS=class extends Tt{runFunctions(t,n){return t.stream?Po.runFunctions(this.client.chat.completions,t,n):Ql.runFunctions(this.client.chat.completions,t,n)}runTools(t,n){return t.stream?Po.runTools(this.client.chat.completions,t,n):Ql.runTools(this.client.chat.completions,t,n)}stream(t,n){return Yl.createChatCompletion(this.client.chat.completions,t,n)}};class gd extends Tt{constructor(){super(...arguments),this.completions=new yS(this.client)}}(function(e){e.Completions=yS})(gd||(gd={}));let md=class extends Tt{retrieve(t,n,i,r){return this.get(`/threads/${t}/messages/${n}/files/${i}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(t,n,i={},r){return ri(i)?this.list(t,n,{},i):this.getAPIList(`/threads/${t}/messages/${n}/files`,H_,{query:i,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}};class H_ extends ki{}(function(e){e.MessageFilesPage=H_})(md||(md={}));class yd extends Tt{constructor(){super(...arguments),this.files=new md(this.client)}create(t,n,i){return this.post(`/threads/${t}/messages`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}retrieve(t,n,i){return this.get(`/threads/${t}/messages/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}update(t,n,i,r){return this.post(`/threads/${t}/messages/${n}`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(t,n={},i){return ri(n)?this.list(t,{},n):this.getAPIList(`/threads/${t}/messages`,q_,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class q_ extends ki{}(function(e){e.ThreadMessagesPage=q_,e.Files=md,e.MessageFilesPage=H_})(yd||(yd={}));class _d extends Tt{retrieve(t,n,i,r){return this.get(`/threads/${t}/runs/${n}/steps/${i}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(t,n,i={},r){return ri(i)?this.list(t,n,{},i):this.getAPIList(`/threads/${t}/runs/${n}/steps`,K_,{query:i,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class K_ extends ki{}(function(e){e.RunStepsPage=K_})(_d||(_d={}));class vd extends Tt{constructor(){super(...arguments),this.steps=new _d(this.client)}create(t,n,i){return this.post(`/threads/${t}/runs`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}retrieve(t,n,i){return this.get(`/threads/${t}/runs/${n}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}update(t,n,i,r){return this.post(`/threads/${t}/runs/${n}`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(t,n={},i){return ri(n)?this.list(t,{},n):this.getAPIList(`/threads/${t}/runs`,G_,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}cancel(t,n,i){return this.post(`/threads/${t}/runs/${n}/cancel`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}submitToolOutputs(t,n,i,r){return this.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:i,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class G_ extends ki{}(function(e){e.RunsPage=G_,e.Steps=_d,e.RunStepsPage=K_})(vd||(vd={}));class wd extends Tt{constructor(){super(...arguments),this.runs=new vd(this.client),this.messages=new yd(this.client)}create(t={},n){return ri(t)?this.create({},t):this.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(t,n){return this.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(t,n,i){return this.post(`/threads/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}del(t,n){return this.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}createAndRun(t,n){return this.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}(function(e){e.Runs=vd,e.RunsPage=G_,e.Messages=yd,e.ThreadMessagesPage=q_})(wd||(wd={}));class Ed extends Tt{constructor(){super(...arguments),this.chat=new gd(this.client),this.assistants=new pd(this.client),this.threads=new wd(this.client)}}(function(e){e.Chat=gd,e.Assistants=pd,e.AssistantsPage=W_,e.Threads=wd})(Ed||(Ed={}));class xd extends Tt{create(t,n){return this.post("/completions",{body:t,...n,stream:t.stream??!1})}}xd||(xd={});class Td extends Tt{create(t,n){return this.post("/embeddings",{body:t,...n})}}Td||(Td={});class Id extends Tt{create(t,n){return this.post("/edits",{body:t,...n})}}Id||(Id={});class bd extends Tt{create(t,n){return this.post("/files",Kl({body:t,...n}))}retrieve(t,n){return this.get(`/files/${t}`,n)}list(t={},n){return ri(t)?this.list({},t):this.getAPIList("/files",Q_,{query:t,...n})}del(t,n){return this.delete(`/files/${t}`,n)}content(t,n){return this.get(`/files/${t}/content`,{...n,__binaryResponse:!0})}retrieveContent(t,n){return this.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:i=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(t);for(;!o.status||!r.has(o.status);)if(await dS(n),o=await this.retrieve(t),Date.now()-s>i)throw new j_({message:`Giving up on waiting for file ${t} to finish processing after ${i} milliseconds.`});return o}}class Q_ extends Mf{}(function(e){e.FileObjectsPage=Q_})(bd||(bd={}));class Sd extends Tt{create(t,n){return this.post("/fine-tunes",{body:t,...n})}retrieve(t,n){return this.get(`/fine-tunes/${t}`,n)}list(t){return this.getAPIList("/fine-tunes",Y_,t)}cancel(t,n){return this.post(`/fine-tunes/${t}/cancel`,n)}listEvents(t,n,i){return this.get(`/fine-tunes/${t}/events`,{query:n,timeout:864e5,...i,stream:(n==null?void 0:n.stream)??!1})}}class Y_ extends Mf{}(function(e){e.FineTunesPage=Y_})(Sd||(Sd={}));class Ad extends Tt{create(t,n){return this.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return ri(t)?this.list({},t):this.getAPIList("/fine_tuning/jobs",X_,{query:t,...n})}cancel(t,n){return this.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},i){return ri(n)?this.listEvents(t,{},n):this.getAPIList(`/fine_tuning/jobs/${t}/events`,J_,{query:n,...i})}}class X_ extends ki{}class J_ extends ki{}(function(e){e.FineTuningJobsPage=X_,e.FineTuningJobEventsPage=J_})(Ad||(Ad={}));class Pd extends Tt{constructor(){super(...arguments),this.jobs=new Ad(this.client)}}(function(e){e.Jobs=Ad,e.FineTuningJobsPage=X_,e.FineTuningJobEventsPage=J_})(Pd||(Pd={}));class Cd extends Tt{createVariation(t,n){return this.post("/images/variations",Kl({body:t,...n}))}edit(t,n){return this.post("/images/edits",Kl({body:t,...n}))}generate(t,n){return this.post("/images/generations",{body:t,...n})}}Cd||(Cd={});class Rd extends Tt{retrieve(t,n){return this.get(`/models/${t}`,n)}list(t){return this.getAPIList("/models",Z_,t)}del(t,n){return this.delete(`/models/${t}`,n)}}class Z_ extends Mf{}(function(e){e.ModelsPage=Z_})(Rd||(Rd={}));class kd extends Tt{create(t,n){return this.post("/moderations",{body:t,...n})}}kd||(kd={});var _S;class ue extends SM{constructor({apiKey:t=h1("OPENAI_API_KEY"),organization:n=h1("OPENAI_ORG_ID")??null,...i}={}){if(t===void 0)throw new ft("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const r={apiKey:t,organization:n,...i,baseURL:i.baseURL??"https://api.openai.com/v1"};if(!r.dangerouslyAllowBrowser&&FM())throw new ft(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:r.baseURL,timeout:r.timeout??6e5,httpAgent:r.httpAgent,maxRetries:r.maxRetries,fetch:r.fetch}),this.completions=new xd(this),this.chat=new ld(this),this.edits=new Id(this),this.embeddings=new Td(this),this.files=new bd(this),this.images=new Cd(this),this.audio=new dd(this),this.moderations=new kd(this),this.models=new Rd(this),this.fineTuning=new Pd(this),this.fineTunes=new Sd(this),this.beta=new Ed(this),this._options=r,this.apiKey=t,this.organization=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}_S=ue;ue.OpenAI=_S;ue.OpenAIError=ft;ue.APIError=De;ue.APIConnectionError=kf;ue.APIConnectionTimeoutError=j_;ue.APIUserAbortError=Es;ue.NotFoundError=nS;ue.ConflictError=iS;ue.RateLimitError=sS;ue.BadRequestError=Zb;ue.AuthenticationError=tS;ue.InternalServerError=oS;ue.PermissionDeniedError=eS;ue.UnprocessableEntityError=rS;(function(e){e.toFile=cS,e.fileFromPath=Xb,e.Page=Mf,e.CursorPage=ki,e.Completions=xd,e.Chat=ld,e.Edits=Id,e.Embeddings=Td,e.Files=bd,e.FileObjectsPage=Q_,e.Images=Cd,e.Audio=dd,e.Moderations=kd,e.Models=Rd,e.ModelsPage=Z_,e.FineTuning=Pd,e.FineTunes=Sd,e.FineTunesPage=Y_,e.Beta=Ed})(ue||(ue={}));const zM=new ue({apiKey:"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",dangerouslyAllowBrowser:!0}),jM=({children:e})=>R.jsx(Hb.Provider,{value:{openai:zM},children:e}),Nc=C.createContext(null);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},UM=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},wS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vS(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):UM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const h=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new WM;const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class WM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HM=function(e){const t=vS(e);return wS.encodeByteArray(t,!0)},Dd=function(e){return HM(e).replace(/\./g,"")},qM=function(e){try{return wS.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Md(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!KM(n)||(e[n]=Md(e[n],t[n]));return e}function KM(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=()=>GM().__FIREBASE_DEFAULTS__,YM=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},XM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&qM(e[1]);return t&&JSON.parse(t)},ES=()=>{try{return QM()||YM()||XM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},xS=()=>{var e;return(e=ES())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Dd(JSON.stringify(n)),Dd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tV(){var e;const t=(e=ES())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eV(){return typeof self=="object"&&self.self===self}function nV(){return!tV()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TS(){try{return typeof indexedDB=="object"}catch{return!1}}function iV(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="FirebaseError";class Bs extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=rV,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vf.prototype.create)}}class Vf{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?sV(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Bs(r,a,i)}}function sV(e,t){return e.replace(oV,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const oV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wm(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(m1(s)&&m1(o)){if(!Wm(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function m1(e){return e!==null&&typeof e=="object"}function aV(e,t){const n=new lV(e,t);return n.subscribe.bind(n)}class lV{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");cV(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=rg),r.error===void 0&&(r.error=rg),r.complete===void 0&&(r.complete=rg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cV(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function rg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(e){return e&&e._delegate?e._delegate:e}class Ts{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new JM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dV(t))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=qr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=qr){return this.instances.has(t)}getOptions(t=qr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hV(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=qr){return this.component?this.component.multipleInstances?t:qr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hV(e){return e===qr?void 0:e}function dV(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new uV(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=[];var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const IS={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},pV=ot.INFO,gV={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},mV=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=gV[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class e0{constructor(t){this.name=t,this._logLevel=pV,this._logHandler=mV,this._userLogHandler=null,t0.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?IS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}function yV(e){t0.forEach(t=>{t.setLogLevel(e)})}function _V(e,t){for(const n of t0){let i=null;t&&t.level&&(i=IS[t.level]),e===null?n.userLogHandler=null:n.userLogHandler=(r,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&e({level:ot[s].toLowerCase(),message:a,args:o,type:r.name})}}}const vV=(e,t)=>t.some(n=>e instanceof n);let y1,_1;function wV(){return y1||(y1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EV(){return _1||(_1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,Hm=new WeakMap,SS=new WeakMap,sg=new WeakMap,n0=new WeakMap;function xV(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(ur(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&bS.set(n,e)}).catch(()=>{}),n0.set(t,e),t}function TV(e){if(Hm.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Hm.set(e,t)}let qm={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Hm.get(e);if(t==="objectStoreNames")return e.objectStoreNames||SS.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function IV(e){qm=e(qm)}function bV(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(og(this),t,...n);return SS.set(i,t.sort?t.sort():[t]),ur(i)}:EV().includes(e)?function(...t){return e.apply(og(this),t),ur(bS.get(this))}:function(...t){return ur(e.apply(og(this),t))}}function SV(e){return typeof e=="function"?bV(e):(e instanceof IDBTransaction&&TV(e),vV(e,wV())?new Proxy(e,qm):e)}function ur(e){if(e instanceof IDBRequest)return xV(e);if(sg.has(e))return sg.get(e);const t=SV(e);return t!==e&&(sg.set(e,t),n0.set(t,e)),t}const og=e=>n0.get(e);function AV(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=ur(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ur(o.result),l.oldVersion,l.newVersion,ur(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const PV=["get","getKey","getAll","getAllKeys","count"],CV=["put","add","delete","clear"],ag=new Map;function v1(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ag.get(t))return ag.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=CV.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||PV.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return ag.set(t,s),s}IV(e=>({...e,get:(t,n,i)=>v1(t,n)||e.get(t,n,i),has:(t,n)=>!!v1(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kV(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function kV(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Km="@firebase/app",w1="0.9.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new e0("@firebase/app"),DV="@firebase/app-compat",MV="@firebase/analytics-compat",VV="@firebase/analytics",NV="@firebase/app-check-compat",OV="@firebase/app-check",LV="@firebase/auth",FV="@firebase/auth-compat",BV="@firebase/database",$V="@firebase/database-compat",zV="@firebase/functions",jV="@firebase/functions-compat",UV="@firebase/installations",WV="@firebase/installations-compat",HV="@firebase/messaging",qV="@firebase/messaging-compat",KV="@firebase/performance",GV="@firebase/performance-compat",QV="@firebase/remote-config",YV="@firebase/remote-config-compat",XV="@firebase/storage",JV="@firebase/storage-compat",ZV="@firebase/firestore",tN="@firebase/firestore-compat",eN="firebase",nN="10.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="[DEFAULT]",iN={[Km]:"fire-core",[DV]:"fire-core-compat",[VV]:"fire-analytics",[MV]:"fire-analytics-compat",[OV]:"fire-app-check",[NV]:"fire-app-check-compat",[LV]:"fire-auth",[FV]:"fire-auth-compat",[BV]:"fire-rtdb",[$V]:"fire-rtdb-compat",[zV]:"fire-fn",[jV]:"fire-fn-compat",[UV]:"fire-iid",[WV]:"fire-iid-compat",[HV]:"fire-fcm",[qV]:"fire-fcm-compat",[KV]:"fire-perf",[GV]:"fire-perf-compat",[QV]:"fire-rc",[YV]:"fire-rc-compat",[XV]:"fire-gcs",[JV]:"fire-gcs-compat",[ZV]:"fire-fst",[tN]:"fire-fst-compat","fire-js":"fire-js",[eN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Map,Xl=new Map;function Vd(e,t){try{e.container.addComponent(t)}catch(n){Is.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function AS(e,t){e.container.addOrOverwriteComponent(t)}function zo(e){const t=e.name;if(Xl.has(t))return Is.debug(`There were multiple attempts to register component ${t}.`),!1;Xl.set(t,e);for(const n of yr.values())Vd(n,e);return!0}function PS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rN(e,t,n=mr){PS(e,t).clearInstance(n)}function sN(){Xl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ti=new Vf("app","Firebase",oN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aN=class{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=nN;function r0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:mr,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Ti.create("bad-app-name",{appName:String(r)});if(n||(n=xS()),!n)throw Ti.create("no-options");const s=yr.get(r);if(s){if(Wm(n,s.options)&&Wm(i,s.config))return s;throw Ti.create("duplicate-app",{appName:r})}const o=new fV(r);for(const l of Xl.values())o.addComponent(l);const a=new aN(n,i,o);return yr.set(r,a),a}function lN(e=mr){const t=yr.get(e);if(!t&&e===mr&&xS())return r0();if(!t)throw Ti.create("no-app",{appName:e});return t}function cN(){return Array.from(yr.values())}async function CS(e){const t=e.name;yr.has(t)&&(yr.delete(t),await Promise.all(e.container.getProviders().map(n=>n.delete())),e.isDeleted=!0)}function hr(e,t,n){var i;let r=(i=iN[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Is.warn(a.join(" "));return}zo(new Ts(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function RS(e,t){if(e!==null&&typeof e!="function")throw Ti.create("invalid-log-argument");_V(e,t)}function kS(e){yV(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firebase-heartbeat-database",hN=1,Jl="firebase-heartbeat-store";let lg=null;function DS(){return lg||(lg=AV(uN,hN,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Jl)}}}).catch(e=>{throw Ti.create("idb-open",{originalErrorMessage:e.message})})),lg}async function dN(e){try{return await(await DS()).transaction(Jl).objectStore(Jl).get(MS(e))}catch(t){if(t instanceof Bs)Is.warn(t.message);else{const n=Ti.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Is.warn(n.message)}}}async function E1(e,t){try{const i=(await DS()).transaction(Jl,"readwrite");await i.objectStore(Jl).put(t,MS(e)),await i.done}catch(n){if(n instanceof Bs)Is.warn(n.message);else{const i=Ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Is.warn(i.message)}}}function MS(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=1024,pN=30*24*60*60*1e3;class gN{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=x1();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=pN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=x1(),{heartbeatsToSend:i,unsentEntries:r}=mN(this._heartbeatsCache.heartbeats),s=Dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function x1(){return new Date().toISOString().substring(0,10)}function mN(e,t=fN){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),T1(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),T1(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class yN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TS()?iV().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await dN(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return E1(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return E1(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function T1(e){return Dd(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(e){zo(new Ts("platform-logger",t=>new RV(t),"PRIVATE")),zo(new Ts("heartbeat",t=>new gN(t),"PRIVATE")),hr(Km,w1,e),hr(Km,w1,"esm2017"),hr("fire-js","")}_N("");const vN=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Bs,SDK_VERSION:i0,_DEFAULT_ENTRY_NAME:mr,_addComponent:Vd,_addOrOverwriteComponent:AS,_apps:yr,_clearComponents:sN,_components:Xl,_getProvider:PS,_registerComponent:zo,_removeServiceInstance:rN,deleteApp:CS,getApp:lN,getApps:cN,initializeApp:r0,onLog:RS,registerVersion:hr,setLogLevel:kS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t,n){this._delegate=t,this.firebase=n,Vd(t,new Ts("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),CS(this._delegate)))}_getService(t,n=mr){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(t);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(t,n=mr){this._delegate.container.getProvider(t).clearInstance(n)}_addComponent(t){Vd(this._delegate,t)}_addOrOverwriteComponent(t){AS(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},I1=new Vf("app-compat","Firebase",EN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(e){const t={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:hr,setLogLevel:kS,onLog:RS,apps:null,SDK_VERSION:i0,INTERNAL:{registerComponent:a,removeApp:i,useAsService:l,modularAPIs:vN}};n.default=n,Object.defineProperty(n,"apps",{get:o});function i(c){delete t[c]}function r(c){if(c=c||mr,!g1(t,c))throw I1.create("no-app",{appName:c});return t[c]}r.App=e;function s(c,u={}){const h=r0(c,u);if(g1(t,h.name))return t[h.name];const d=new e(h,n);return t[h.name]=d,d}function o(){return Object.keys(t).map(c=>t[c])}function a(c){const u=c.name,h=u.replace("-compat","");if(zo(c)&&c.type==="PUBLIC"){const d=(f=r())=>{if(typeof f[h]!="function")throw I1.create("invalid-app-argument",{appName:u});return f[h]()};c.serviceProps!==void 0&&Md(d,c.serviceProps),n[h]=d,e.prototype[h]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[h]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){const e=xN(wN);e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:VS,extendNamespace:t,createSubscribe:aV,ErrorFactory:Vf,deepExtend:Md});function t(n){Md(e,n)}return e}const TN=VS();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new e0("@firebase/app-compat"),IN="@firebase/app-compat",bN="0.2.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(e){hr(IN,bN,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(eV()&&self.firebase!==void 0){b1.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&b1.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Nf=TN;SN();var AN="firebase",PN="10.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nf.registerVersion(AN,PN,"app-compat");var CN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F,s0=s0||{},Q=CN||self;function Of(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Oc(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function RN(e){return Object.prototype.hasOwnProperty.call(e,cg)&&e[cg]||(e[cg]=++kN)}var cg="closure_uid_"+(1e9*Math.random()>>>0),kN=0;function DN(e,t,n){return e.call.apply(e.bind,arguments)}function MN(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function Ce(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ce=DN:Ce=MN,Ce.apply(null,arguments)}function Ru(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function de(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[r].apply(i,o)}}function Dr(){this.s=this.s,this.o=this.o}var VN=0;Dr.prototype.s=!1;Dr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),VN!=0)&&RN(this)};Dr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NS=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function o0(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function S1(e,t){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Of(i)){const r=e.length||0,s=i.length||0;e.length=r+s;for(let o=0;o<s;o++)e[r+o]=i[o]}else e.push(i)}}function Re(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var NN=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Q.addEventListener("test",()=>{},t),Q.removeEventListener("test",()=>{},t)}catch{}return e}();function Zl(e){return/^[\s\xa0]*$/.test(e)}function Lf(){var e=Q.navigator;return e&&(e=e.userAgent)?e:""}function Qn(e){return Lf().indexOf(e)!=-1}function a0(e){return a0[" "](e),e}a0[" "]=function(){};function ON(e,t){var n=PO;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var LN=Qn("Opera"),jo=Qn("Trident")||Qn("MSIE"),OS=Qn("Edge"),Gm=OS||jo,LS=Qn("Gecko")&&!(Lf().toLowerCase().indexOf("webkit")!=-1&&!Qn("Edge"))&&!(Qn("Trident")||Qn("MSIE"))&&!Qn("Edge"),FN=Lf().toLowerCase().indexOf("webkit")!=-1&&!Qn("Edge");function FS(){var e=Q.document;return e?e.documentMode:void 0}var Qm;t:{var ug="",hg=function(){var e=Lf();if(LS)return/rv:([^\);]+)(\)|;)/.exec(e);if(OS)return/Edge\/([\d\.]+)/.exec(e);if(jo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(FN)return/WebKit\/(\S+)/.exec(e);if(LN)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(hg&&(ug=hg?hg[1]:""),jo){var dg=FS();if(dg!=null&&dg>parseFloat(ug)){Qm=String(dg);break t}}Qm=ug}var Ym;if(Q.document&&jo){var A1=FS();Ym=A1||parseInt(Qm,10)||void 0}else Ym=void 0;var BN=Ym;function tc(e,t){if(Re.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(LS){t:{try{a0(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:$N[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&tc.$.h.call(this)}}de(tc,Re);var $N={2:"touch",3:"pen",4:"mouse"};tc.prototype.h=function(){tc.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Lc="closure_listenable_"+(1e6*Math.random()|0),zN=0;function jN(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++zN,this.fa=this.ia=!1}function Ff(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function l0(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function UN(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function BS(e){const t={};for(const n in e)t[n]=e[n];return t}const P1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $S(e,t){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)e[n]=i[n];for(let s=0;s<P1.length;s++)n=P1[s],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Bf(e){this.src=e,this.g={},this.h=0}Bf.prototype.add=function(e,t,n,i,r){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=Jm(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new jN(t,this.src,s,!!i,r),t.ia=n,e.push(t)),t};function Xm(e,t){var n=t.type;if(n in e.g){var i=e.g[n],r=NS(i,t),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Ff(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Jm(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}var c0="closure_lm_"+(1e6*Math.random()|0),fg={};function zS(e,t,n,i,r){if(i&&i.once)return US(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)zS(e,t[s],n,i,r);return null}return n=d0(n),e&&e[Lc]?e.O(t,n,Oc(i)?!!i.capture:!!i,r):jS(e,t,n,!1,i,r)}function jS(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=Oc(r)?!!r.capture:!!r,a=h0(e);if(a||(e[c0]=a=new Bf(e)),n=a.add(t,n,i,o,s),n.proxy)return n;if(i=WN(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)NN||(r=o),r===void 0&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(HS(t.toString()),i);else if(e.addListener&&e.removeListener)e.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function WN(){function e(n){return t.call(e.src,e.listener,n)}const t=HN;return e}function US(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)US(e,t[s],n,i,r);return null}return n=d0(n),e&&e[Lc]?e.P(t,n,Oc(i)?!!i.capture:!!i,r):jS(e,t,n,!0,i,r)}function WS(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)WS(e,t[s],n,i,r);else i=Oc(i)?!!i.capture:!!i,n=d0(n),e&&e[Lc]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=Jm(s,n,i,r),-1<n&&(Ff(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=h0(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Jm(t,n,i,r)),(n=-1<e?t[e]:null)&&u0(n))}function u0(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Lc])Xm(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(HS(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=h0(t))?(Xm(n,e),n.h==0&&(n.src=null,t[c0]=null)):Ff(e)}}}function HS(e){return e in fg?fg[e]:fg[e]="on"+e}function HN(e,t){if(e.fa)e=!0;else{t=new tc(t,this);var n=e.listener,i=e.la||e.src;e.ia&&u0(e),e=n.call(i,t)}return e}function h0(e){return e=e[c0],e instanceof Bf?e:null}var pg="__closure_events_fn_"+(1e9*Math.random()>>>0);function d0(e){return typeof e=="function"?e:(e[pg]||(e[pg]=function(t){return e.handleEvent(t)}),e[pg])}function he(){Dr.call(this),this.i=new Bf(this),this.S=this,this.J=null}de(he,Dr);he.prototype[Lc]=!0;he.prototype.removeEventListener=function(e,t,n,i){WS(this,e,t,n,i)};function Ee(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,typeof t=="string")t=new Re(t,e);else if(t instanceof Re)t.target=t.target||e;else{var r=t;t=new Re(i,e),$S(t,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=ku(o,i,!0,t)&&r}if(o=t.g=e,r=ku(o,i,!0,t)&&r,r=ku(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)o=t.g=n[s],r=ku(o,i,!1,t)&&r}he.prototype.N=function(){if(he.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Ff(n[i]);delete e.g[t],e.h--}}this.J=null};he.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)};he.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};function ku(e,t,n,i){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Xm(e.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var f0=Q.JSON.stringify;class qN{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function KN(){var e=p0;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class GN{constructor(){this.h=this.g=null}add(t,n){const i=qS.get();i.set(t,n),this.h?this.h.next=i:this.g=i,this.h=i}}var qS=new qN(()=>new QN,e=>e.reset());class QN{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function YN(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function XN(e){Q.setTimeout(()=>{throw e},0)}let ec,nc=!1,p0=new GN,KS=()=>{const e=Q.Promise.resolve(void 0);ec=()=>{e.then(JN)}};var JN=()=>{for(var e;e=KN();){try{e.h.call(e.g)}catch(n){XN(n)}var t=qS;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}nc=!1};function $f(e,t){he.call(this),this.h=e||1,this.g=t||Q,this.j=Ce(this.qb,this),this.l=Date.now()}de($f,he);F=$f.prototype;F.ga=!1;F.T=null;F.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ee(this,"tick"),this.ga&&(g0(this),this.start()))}};F.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function g0(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}F.N=function(){$f.$.N.call(this),g0(this),delete this.g};function m0(e,t,n){if(typeof e=="function")n&&(e=Ce(e,n));else if(e&&typeof e.handleEvent=="function")e=Ce(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Q.setTimeout(e,t||0)}function GS(e){e.g=m0(()=>{e.g=null,e.i&&(e.i=!1,GS(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class ZN extends Dr{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:GS(this)}N(){super.N(),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ic(e){Dr.call(this),this.h=e,this.g={}}de(ic,Dr);var C1=[];function QS(e,t,n,i){Array.isArray(n)||(n&&(C1[0]=n.toString()),n=C1);for(var r=0;r<n.length;r++){var s=zS(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function YS(e){l0(e.g,function(t,n){this.g.hasOwnProperty(n)&&u0(t)},e),e.g={}}ic.prototype.N=function(){ic.$.N.call(this),YS(this)};ic.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function zf(){this.g=!0}zf.prototype.Ea=function(){this.g=!1};function tO(e,t,n,i,r,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+`
`+n+`
`+o})}function eO(e,t,n,i,r,s,o){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+`
`+n+`
`+s+" "+o})}function Eo(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+iO(e,n)+(i?" "+i:"")})}function nO(e,t){e.info(function(){return"TIMEOUT: "+t})}zf.prototype.info=function(){};function iO(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return f0(n)}catch{return t}}var $s={},R1=null;function jf(){return R1=R1||new he}$s.Ta="serverreachability";function XS(e){Re.call(this,$s.Ta,e)}de(XS,Re);function rc(e){const t=jf();Ee(t,new XS(t))}$s.STAT_EVENT="statevent";function JS(e,t){Re.call(this,$s.STAT_EVENT,e),this.stat=t}de(JS,Re);function Fe(e){const t=jf();Ee(t,new JS(t,e))}$s.Ua="timingevent";function ZS(e,t){Re.call(this,$s.Ua,e),this.size=t}de(ZS,Re);function Fc(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){e()},t)}var Uf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function y0(){}y0.prototype.h=null;function k1(e){return e.h||(e.h=e.i())}function eA(){}var Bc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _0(){Re.call(this,"d")}de(_0,Re);function v0(){Re.call(this,"c")}de(v0,Re);var Zm;function Wf(){}de(Wf,y0);Wf.prototype.g=function(){return new XMLHttpRequest};Wf.prototype.i=function(){return{}};Zm=new Wf;function $c(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new ic(this),this.P=rO,e=Gm?125:void 0,this.V=new $f(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nA}function nA(){this.i=null,this.g="",this.h=!1}var rO=45e3,ty={},Nd={};F=$c.prototype;F.setTimeout=function(e){this.P=e};function ey(e,t,n){e.L=1,e.v=qf(Pi(t)),e.s=n,e.S=!0,iA(e,null)}function iA(e,t){e.G=Date.now(),zc(e),e.A=Pi(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),hA(n.i,"t",i),e.C=0,n=e.l.J,e.h=new nA,e.g=DA(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ZN(Ce(e.Pa,e,e.g),e.O)),QS(e.U,e.g,"readystatechange",e.nb),t=e.I?BS(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),rc(),tO(e.j,e.u,e.A,e.m,e.W,e.s)}F.nb=function(e){e=e.target;const t=this.M;t&&Yn(e)==3?t.l():this.Pa(e)};F.Pa=function(e){try{if(e==this.g)t:{const u=Yn(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Gm||this.g&&(this.h.h||this.g.ja()||N1(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?rc(3):rc(2)),Hf(this);var n=this.g.da();this.ca=n;e:if(rA(this)){var i=N1(this.g);e="";var r=i.length,s=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),pl(this);var o="";break e}this.h.i=new Q.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,eO(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zl(a)){var c=a;break e}}c=null}if(n=c)Eo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ny(this,n);else{this.i=!1,this.o=3,Fe(12),os(this),pl(this);break t}}this.S?(sA(this,u,o),Gm&&this.i&&u==3&&(QS(this.U,this.V,"tick",this.mb),this.V.start())):(Eo(this.j,this.m,o,null),ny(this,o)),u==4&&os(this),this.i&&!this.J&&(u==4?PA(this.l,this):(this.i=!1,zc(this)))}else bO(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Fe(12)):(this.o=0,Fe(13)),os(this),pl(this)}}}catch{}finally{}};function rA(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function sA(e,t,n){let i=!0,r;for(;!e.J&&e.C<n.length;)if(r=sO(e,n),r==Nd){t==4&&(e.o=4,Fe(14),i=!1),Eo(e.j,e.m,null,"[Incomplete Response]");break}else if(r==ty){e.o=4,Fe(15),Eo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}else Eo(e.j,e.m,r,null),ny(e,r);rA(e)&&r!=Nd&&r!=ty&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Fe(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),b0(t),t.M=!0,Fe(11))):(Eo(e.j,e.m,n,"[Invalid Chunked Response]"),os(e),pl(e))}F.mb=function(){if(this.g){var e=Yn(this.g),t=this.g.ja();this.C<t.length&&(Hf(this),sA(this,e,t),this.i&&e!=4&&zc(this))}};function sO(e,t){var n=e.C,i=t.indexOf(`
`,n);return i==-1?Nd:(n=Number(t.substring(n,i)),isNaN(n)?ty:(i+=1,i+n>t.length?Nd:(t=t.slice(i,i+n),e.C=i+n,t)))}F.cancel=function(){this.J=!0,os(this)};function zc(e){e.Y=Date.now()+e.P,oA(e,e.P)}function oA(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Fc(Ce(e.lb,e),t)}function Hf(e){e.B&&(Q.clearTimeout(e.B),e.B=null)}F.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(nO(this.j,this.A),this.L!=2&&(rc(),Fe(17)),os(this),this.o=2,pl(this)):oA(this,this.Y-e)};function pl(e){e.l.H==0||e.J||PA(e.l,e)}function os(e){Hf(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,g0(e.V),YS(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ny(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||iy(n.i,e))){if(!e.K&&iy(n.i,e)&&n.H==3){try{var i=n.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Fd(n),Qf(n);else break t;I0(n),Fe(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=Fc(Ce(n.ib,n),6e3));if(1>=pA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else as(n,11)}else if((e.K||n.g==e)&&Fd(n),!Zl(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=e.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(w0(s,s.h),s.h=null))}if(i.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(i.Da=m,At(i.I,i.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=e;if(i.wa=kA(i,i.J?i.pa:null,i.Y),o.K){gA(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(Hf(a),zc(a)),i.g=o}else SA(i);0<n.j.length&&Yf(n)}else c[0]!="stop"&&c[0]!="close"||as(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?as(n,7):T0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}rc(4)}catch{}}function oO(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Of(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}t=[],n=0;for(i in e)t[n++]=e[i];return t}function aO(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Of(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}function aA(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Of(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=aO(e),i=oO(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}var lA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lO(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function fs(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof fs){this.h=e.h,Od(this,e.j),this.s=e.s,this.g=e.g,Ld(this,e.m),this.l=e.l;var t=e.i,n=new sc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),D1(this,n),this.o=e.o}else e&&(t=String(e).match(lA))?(this.h=!1,Od(this,t[1]||"",!0),this.s=Ha(t[2]||""),this.g=Ha(t[3]||"",!0),Ld(this,t[4]),this.l=Ha(t[5]||"",!0),D1(this,t[6]||"",!0),this.o=Ha(t[7]||"")):(this.h=!1,this.i=new sc(null,this.h))}fs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(qa(t,M1,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(qa(t,M1,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(qa(n,n.charAt(0)=="/"?hO:uO,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",qa(n,fO)),e.join("")};function Pi(e){return new fs(e)}function Od(e,t,n){e.j=n?Ha(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ld(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function D1(e,t,n){t instanceof sc?(e.i=t,pO(e.i,e.h)):(n||(t=qa(t,dO)),e.i=new sc(t,e.h))}function At(e,t,n){e.i.set(t,n)}function qf(e){return At(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ha(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qa(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,cO),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cO(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var M1=/[#\/\?@]/g,uO=/[#\?:]/g,hO=/[#\?]/g,dO=/[#\?@]/g,fO=/#/g;function sc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mr(e){e.g||(e.g=new Map,e.h=0,e.i&&lO(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}F=sc.prototype;F.add=function(e,t){Mr(this),this.i=null,e=aa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function cA(e,t){Mr(e),t=aa(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function uA(e,t){return Mr(e),t=aa(e,t),e.g.has(t)}F.forEach=function(e,t){Mr(this),this.g.forEach(function(n,i){n.forEach(function(r){e.call(t,r,i,this)},this)},this)};F.ta=function(){Mr(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let s=0;s<r.length;s++)n.push(t[i])}return n};F.Z=function(e){Mr(this);let t=[];if(typeof e=="string")uA(this,e)&&(t=t.concat(this.g.get(aa(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};F.set=function(e,t){return Mr(this),this.i=null,e=aa(this,e),uA(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};F.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function hA(e,t,n){cA(e,t),0<n.length&&(e.i=null,e.g.set(aa(e,t),o0(n)),e.h+=n.length)}F.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};function aa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function pO(e,t){t&&!e.j&&(Mr(e),e.i=null,e.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(cA(this,i),hA(this,r,n))},e)),e.j=t}var gO=class{constructor(e,t){this.g=e,this.map=t}};function dA(e){this.l=e||mO,Q.PerformanceNavigationTiming?(e=Q.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Q.g&&Q.g.Ka&&Q.g.Ka()&&Q.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mO=10;function fA(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function pA(e){return e.h?1:e.g?e.g.size:0}function iy(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function w0(e,t){e.g?e.g.add(t):e.h=t}function gA(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}dA.prototype.cancel=function(){if(this.i=mA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function mA(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return o0(e.i)}var yO=class{stringify(e){return Q.JSON.stringify(e,void 0)}parse(e){return Q.JSON.parse(e,void 0)}};function _O(){this.g=new yO}function vO(e,t,n){const i=n||"";try{aA(e,function(r,s){let o=r;Oc(r)&&(o=f0(r)),t.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function wO(e,t){const n=new zf;if(Q.Image){const i=new Image;i.onload=Ru(Du,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Ru(Du,n,i,"TestLoadImage: error",!1,t),i.onabort=Ru(Du,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Ru(Du,n,i,"TestLoadImage: timeout",!1,t),Q.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}function Du(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function jc(e){this.l=e.ec||null,this.j=e.ob||!1}de(jc,y0);jc.prototype.g=function(){return new Kf(this.l,this.j)};jc.prototype.i=function(e){return function(){return e}}({});function Kf(e,t){he.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=E0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}de(Kf,he);var E0=0;F=Kf.prototype;F.open=function(e,t){if(this.readyState!=E0)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,oc(this)};F.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Q).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};F.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uc(this)),this.readyState=E0};F.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,oc(this)),this.g&&(this.readyState=3,oc(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Q.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yA(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function yA(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}F.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Uc(this):oc(this),this.readyState==3&&yA(this)}};F.Za=function(e){this.g&&(this.response=this.responseText=e,Uc(this))};F.Ya=function(e){this.g&&(this.response=e,Uc(this))};F.ka=function(){this.g&&Uc(this)};function Uc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,oc(e)}F.setRequestHeader=function(e,t){this.v.append(e,t)};F.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};F.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function oc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var EO=Q.JSON.parse;function Ht(e){he.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_A,this.L=this.M=!1}de(Ht,he);var _A="",xO=/^https?$/i,TO=["POST","PUT"];F=Ht.prototype;F.Oa=function(e){this.M=e};F.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zm.g(),this.C=this.u?k1(this.u):k1(Zm),this.g.onreadystatechange=Ce(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){V1(this,s);return}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=Q.FormData&&e instanceof Q.FormData,!(0<=NS(TO,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{EA(this),0<this.B&&((this.L=IO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ce(this.ua,this)):this.A=m0(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){V1(this,s)}};function IO(e){return jo&&typeof e.timeout=="number"&&e.ontimeout!==void 0}F.ua=function(){typeof s0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ee(this,"timeout"),this.abort(8))};function V1(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,vA(e),Gf(e)}function vA(e){e.F||(e.F=!0,Ee(e,"complete"),Ee(e,"error"))}F.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ee(this,"complete"),Ee(this,"abort"),Gf(this))};F.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gf(this,!0)),Ht.$.N.call(this)};F.La=function(){this.s||(this.G||this.v||this.l?wA(this):this.kb())};F.kb=function(){wA(this)};function wA(e){if(e.h&&typeof s0<"u"&&(!e.C[1]||Yn(e)!=4||e.da()!=2)){if(e.v&&Yn(e)==4)m0(e.La,0,e);else if(Ee(e,"readystatechange"),Yn(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var i;if(i=o===0){var r=String(e.I).match(lA)[1]||null;!r&&Q.self&&Q.self.location&&(r=Q.self.location.protocol.slice(0,-1)),i=!xO.test(r?r.toLowerCase():"")}n=i}if(n)Ee(e,"complete"),Ee(e,"success");else{e.m=6;try{var s=2<Yn(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",vA(e)}}finally{Gf(e)}}}}function Gf(e,t){if(e.g){EA(e);const n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ee(e,"ready");try{n.onreadystatechange=i}catch{}}}function EA(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Q.clearTimeout(e.A),e.A=null)}F.isActive=function(){return!!this.g};function Yn(e){return e.g?e.g.readyState:0}F.da=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}};F.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};F.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),EO(t)}};function N1(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case _A:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function bO(e){const t={};e=(e.g&&2<=Yn(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<e.length;i++){if(Zl(e[i]))continue;var n=YN(e[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}UN(t,function(i){return i.join(", ")})}F.Ia=function(){return this.m};F.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function xA(e){let t="";return l0(e,function(n,i){t+=i,t+=":",t+=n,t+=`\r
`}),t}function x0(e,t,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=xA(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):At(e,t,n))}function ba(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function TA(e){this.Ga=0,this.j=[],this.l=new zf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ba("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ba("baseRetryDelayMs",5e3,e),this.hb=ba("retryDelaySeedMs",1e4,e),this.eb=ba("forwardChannelMaxRetries",2,e),this.xa=ba("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new dA(e&&e.concurrentRequestLimit),this.Ja=new _O,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}F=TA.prototype;F.ra=8;F.H=1;function T0(e){if(IA(e),e.H==3){var t=e.W++,n=Pi(e.I);if(At(n,"SID",e.K),At(n,"RID",t),At(n,"TYPE","terminate"),Wc(e,n),t=new $c(e,e.l,t),t.L=2,t.v=qf(Pi(n)),n=!1,Q.navigator&&Q.navigator.sendBeacon)try{n=Q.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&Q.Image&&(new Image().src=t.v,n=!0),n||(t.g=DA(t.l,null),t.g.ha(t.v)),t.G=Date.now(),zc(t)}RA(e)}function Qf(e){e.g&&(b0(e),e.g.cancel(),e.g=null)}function IA(e){Qf(e),e.u&&(Q.clearTimeout(e.u),e.u=null),Fd(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Q.clearTimeout(e.m),e.m=null)}function Yf(e){if(!fA(e.i)&&!e.m){e.m=!0;var t=e.Na;ec||KS(),nc||(ec(),nc=!0),p0.add(t,e),e.C=0}}function SO(e,t){return pA(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Fc(Ce(e.Na,e,t),CA(e,e.C)),e.C++,!0)}F.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new $c(this,this.l,e);let s=this.s;if(this.U&&(s?(s=BS(s),$S(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break e}i=void 0}if(i===void 0)break;if(t+=i,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=bA(this,r,t),n=Pi(this.I),At(n,"RID",e),At(n,"CVER",22),this.F&&At(n,"X-HTTP-Session-Id",this.F),Wc(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(xA(s)))+"&"+t:this.o&&x0(n,this.o,s)),w0(this.i,r),this.bb&&At(n,"TYPE","init"),this.P?(At(n,"$req",t),At(n,"SID","null"),r.aa=!0,ey(r,n,null)):ey(r,n,t),this.H=2}}else this.H==3&&(e?O1(this,e):this.j.length==0||fA(this.i)||O1(this))};function O1(e,t){var n;t?n=t.m:n=e.W++;const i=Pi(e.I);At(i,"SID",e.K),At(i,"RID",n),At(i,"AID",e.V),Wc(e,i),e.o&&e.s&&x0(i,e.o,e.s),n=new $c(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=bA(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),w0(e.i,n),ey(n,i,t)}function Wc(e,t){e.na&&l0(e.na,function(n,i){At(t,i,n)}),e.h&&aA({},function(n,i){At(t,i,n)})}function bA(e,t,n){n=Math.min(e.j.length,n);var i=e.h?Ce(e.h.Va,e.h,e):null;t:{var r=e.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].g;const u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{vO(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,i}function SA(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ec||KS(),nc||(ec(),nc=!0),p0.add(t,e),e.A=0}}function I0(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Fc(Ce(e.Ma,e),CA(e,e.A)),e.A++,!0)}F.Ma=function(){if(this.u=null,AA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Fc(Ce(this.jb,this),e)}};F.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fe(10),Qf(this),AA(this))};function b0(e){e.B!=null&&(Q.clearTimeout(e.B),e.B=null)}function AA(e){e.g=new $c(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Pi(e.wa);At(t,"RID","rpc"),At(t,"SID",e.K),At(t,"AID",e.V),At(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&At(t,"TO",e.qa),At(t,"TYPE","xmlhttp"),Wc(e,t),e.o&&e.s&&x0(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=qf(Pi(t)),n.s=null,n.S=!0,iA(n,e)}F.ib=function(){this.v!=null&&(this.v=null,Qf(this),I0(this),Fe(19))};function Fd(e){e.v!=null&&(Q.clearTimeout(e.v),e.v=null)}function PA(e,t){var n=null;if(e.g==t){Fd(e),b0(e),e.g=null;var i=2}else if(iy(e.i,t))n=t.F,gA(e.i,t),i=1;else return;if(e.H!=0){if(t.i)if(i==1){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;i=jf(),Ee(i,new ZS(i,n)),Yf(e)}else SA(e);else if(r=t.o,r==3||r==0&&0<t.ca||!(i==1&&SO(e,t)||i==2&&I0(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:as(e,5);break;case 4:as(e,10);break;case 3:as(e,6);break;default:as(e,2)}}}function CA(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function as(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var i=Ce(e.pb,e);n||(n=new fs("//www.google.com/images/cleardot.gif"),Q.location&&Q.location.protocol=="http"||Od(n,"https"),qf(n)),wO(n.toString(),i)}else Fe(2);e.H=0,e.h&&e.h.za(t),RA(e),IA(e)}F.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Fe(2)):(this.l.info("Failed to ping google.com"),Fe(1))};function RA(e){if(e.H=0,e.ma=[],e.h){const t=mA(e.i);(t.length!=0||e.j.length!=0)&&(S1(e.ma,t),S1(e.ma,e.j),e.i.i.length=0,o0(e.j),e.j.length=0),e.h.ya()}}function kA(e,t,n){var i=n instanceof fs?Pi(n):new fs(n);if(i.g!="")t&&(i.g=t+"."+i.g),Ld(i,i.m);else{var r=Q.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new fs(null);i&&Od(s,i),t&&(s.g=t),r&&Ld(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&At(i,n,t),At(i,"VER",e.ra),Wc(e,i),i}function DA(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new Ht(new jc({ob:!0})):new Ht(e.va),t.Oa(e.J),t}F.isActive=function(){return!!this.h&&this.h.isActive(this)};function MA(){}F=MA.prototype;F.Ba=function(){};F.Aa=function(){};F.za=function(){};F.ya=function(){};F.isActive=function(){return!0};F.Va=function(){};function Bd(){if(jo&&!(10<=Number(BN)))throw Error("Environmental error: no available transport.")}Bd.prototype.g=function(e,t){return new dn(e,t)};function dn(e,t){he.call(this),this.g=new TA(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Zl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zl(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new la(this)}de(dn,he);dn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Fe(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=kA(e,null,e.Y),Yf(e)};dn.prototype.close=function(){T0(this.g)};dn.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=f0(e),e=n);t.j.push(new gO(t.fb++,e)),t.H==3&&Yf(t)};dn.prototype.N=function(){this.g.h=null,delete this.j,T0(this.g),delete this.g,dn.$.N.call(this)};function VA(e){_0.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}de(VA,_0);function NA(){v0.call(this),this.status=1}de(NA,v0);function la(e){this.g=e}de(la,MA);la.prototype.Ba=function(){Ee(this.g,"a")};la.prototype.Aa=function(e){Ee(this.g,new VA(e))};la.prototype.za=function(e){Ee(this.g,new NA)};la.prototype.ya=function(){Ee(this.g,"b")};function AO(){this.blockSize=-1}function Bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}de(Bn,AO);Bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function gg(e,t,n){n||(n=0);var i=Array(16);if(typeof t=="string")for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(s^n&(r^s))+i[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(s^n&(r^s))+i[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(s^n&(r^s))+i[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(r^s&(n^r))+i[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(r^s&(n^r))+i[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(r^s&(n^r))+i[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(r^s&(n^r))+i[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(n^r^s)+i[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(n^r^s)+i[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(n^r^s)+i[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(n^r^s)+i[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(r^(n|~s))+i[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=t+(r^(n|~s))+i[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=t+(r^(n|~s))+i[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=t+(r^(n|~s))+i[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}Bn.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(r==0)for(;s<=n;)gg(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){gg(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){gg(this,i),r=0;break}}this.h=r,this.i+=t};Bn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};function _t(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=e[r]|0;i&&s==t||(n[r]=s,i=!1)}this.g=n}var PO={};function S0(e){return-128<=e&&128>e?ON(e,function(t){return new _t([t|0],0>t?-1:0)}):new _t([e|0],0>e?-1:0)}function Xn(e){if(isNaN(e)||!isFinite(e))return Co;if(0>e)return _e(Xn(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=ry;return new _t(t,0)}function OA(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return _e(OA(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Xn(Math.pow(t,8)),i=Co,r=0;r<e.length;r+=8){var s=Math.min(8,e.length-r),o=parseInt(e.substring(r,r+s),t);8>s?(s=Xn(Math.pow(t,s)),i=i.R(s).add(Xn(o))):(i=i.R(n),i=i.add(Xn(o)))}return i}var ry=4294967296,Co=S0(0),sy=S0(1),L1=S0(16777216);F=_t.prototype;F.ea=function(){if(wn(this))return-_e(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:ry+i)*t,t*=ry}return e};F.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(yi(this))return"0";if(wn(this))return"-"+_e(this).toString(e);for(var t=Xn(Math.pow(e,6)),n=this,i="";;){var r=zd(n,t).g;n=$d(n,r.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=r,yi(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};F.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function yi(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function wn(e){return e.h==-1}F.X=function(e){return e=$d(this,e),wn(e)?-1:yi(e)?0:1};function _e(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new _t(n,~e.h).add(sy)}F.abs=function(){return wn(this)?_e(this):this};F.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(this.D(r)&65535)+(e.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new _t(n,n[n.length-1]&-2147483648?-1:0)};function $d(e,t){return e.add(_e(t))}F.R=function(e){if(yi(this)||yi(e))return Co;if(wn(this))return wn(e)?_e(this).R(_e(e)):_e(_e(this).R(e));if(wn(e))return _e(this.R(_e(e)));if(0>this.X(L1)&&0>e.X(L1))return Xn(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=e.D(r)>>>16,l=e.D(r)&65535;n[2*i+2*r]+=o*l,Mu(n,2*i+2*r),n[2*i+2*r+1]+=s*l,Mu(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Mu(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Mu(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new _t(n,0)};function Mu(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Sa(e,t){this.g=e,this.h=t}function zd(e,t){if(yi(t))throw Error("division by zero");if(yi(e))return new Sa(Co,Co);if(wn(e))return t=zd(_e(e),t),new Sa(_e(t.g),_e(t.h));if(wn(t))return t=zd(e,_e(t)),new Sa(_e(t.g),t.h);if(30<e.g.length){if(wn(e)||wn(t))throw Error("slowDivide_ only works with positive integers.");for(var n=sy,i=t;0>=i.X(e);)n=F1(n),i=F1(i);var r=Gs(n,1),s=Gs(i,1);for(i=Gs(i,2),n=Gs(n,2);!yi(i);){var o=s.add(i);0>=o.X(e)&&(r=r.add(n),s=o),i=Gs(i,1),n=Gs(n,1)}return t=$d(e,r.R(t)),new Sa(r,t)}for(r=Co;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Xn(n),o=s.R(t);wn(o)||0<o.X(e);)n-=i,s=Xn(n),o=s.R(t);yi(s)&&(s=sy),r=r.add(s),e=$d(e,o)}return new Sa(r,e)}F.gb=function(e){return zd(this,e).h};F.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new _t(n,this.h&e.h)};F.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new _t(n,this.h|e.h)};F.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new _t(n,this.h^e.h)};function F1(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new _t(n,e.h)}function Gs(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new _t(r,e.h)}Bd.prototype.createWebChannel=Bd.prototype.g;dn.prototype.send=dn.prototype.u;dn.prototype.open=dn.prototype.m;dn.prototype.close=dn.prototype.close;Uf.NO_ERROR=0;Uf.TIMEOUT=8;Uf.HTTP_ERROR=6;tA.COMPLETE="complete";eA.EventType=Bc;Bc.OPEN="a";Bc.CLOSE="b";Bc.ERROR="c";Bc.MESSAGE="d";he.prototype.listen=he.prototype.O;Ht.prototype.listenOnce=Ht.prototype.P;Ht.prototype.getLastError=Ht.prototype.Sa;Ht.prototype.getLastErrorCode=Ht.prototype.Ia;Ht.prototype.getStatus=Ht.prototype.da;Ht.prototype.getResponseJson=Ht.prototype.Wa;Ht.prototype.getResponseText=Ht.prototype.ja;Ht.prototype.send=Ht.prototype.ha;Ht.prototype.setWithCredentials=Ht.prototype.Oa;Bn.prototype.digest=Bn.prototype.l;Bn.prototype.reset=Bn.prototype.reset;Bn.prototype.update=Bn.prototype.j;_t.prototype.add=_t.prototype.add;_t.prototype.multiply=_t.prototype.R;_t.prototype.modulo=_t.prototype.gb;_t.prototype.compare=_t.prototype.X;_t.prototype.toNumber=_t.prototype.ea;_t.prototype.toString=_t.prototype.toString;_t.prototype.getBits=_t.prototype.D;_t.fromNumber=Xn;_t.fromString=OA;var CO=function(){return new Bd},RO=function(){return jf()},mg=Uf,kO=tA,DO=$s,B1={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},MO=jc,Vu=eA,VO=Ht,NO=Bn,Ro=_t;const $1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new e0("@firebase/firestore");function io(){return _r.logLevel}function OO(e){_r.setLogLevel(e)}function P(e,...t){if(_r.logLevel<=ot.DEBUG){const n=t.map(A0);_r.debug(`Firestore (${ca}): ${e}`,...n)}}function Gt(e,...t){if(_r.logLevel<=ot.ERROR){const n=t.map(A0);_r.error(`Firestore (${ca}): ${e}`,...n)}}function $n(e,...t){if(_r.logLevel<=ot.WARN){const n=t.map(A0);_r.warn(`Firestore (${ca}): ${e}`,...n)}}function A0(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e="Unexpected state"){const t=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: `+e;throw Gt(t),new Error(t)}function W(e,t){e||B()}function LO(e,t){e||B()}function L(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class A extends Bs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class FO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(oe.UNAUTHENTICATED))}shutdown(){}}class BO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $O{constructor(t){this.t=t,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new ce;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ce,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ce)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(W(typeof i.accessToken=="string"),new LA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return W(t===null||typeof t=="string"),new oe(t)}}class zO{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jO{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new zO(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WO{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const i=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(W(typeof n.token=="string"),this.R=n.token,new UO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=HO(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%t.length))}return i}}function X(e,t){return e<t?-1:e>t?1:0}function Uo(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}function BA(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new A(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new A(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new A(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new A(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ot.fromMillis(Date.now())}static fromDate(t){return Ot.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new Ot(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?X(this.nanoseconds,t.nanoseconds):X(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.timestamp=t}static fromTimestamp(t){return new U(t)}static min(){return new U(new Ot(0,0))}static max(){return new U(new Ot(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,n,i){n===void 0?n=0:n>t.length&&B(),i===void 0?i=t.length-n:i>t.length-n&&B(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ac.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ac?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=t.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ct extends ac{construct(t,n,i){return new ct(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new A(S.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const qO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends ac{construct(t,n,i){return new Vt(t,n,i)}static isValidIdentifier(t){return qO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new A(S.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new A(S.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new A(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new A(S.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(t){this.path=t}static fromPath(t){return new O(ct.fromString(t))}static fromName(t){return new O(ct.fromString(t).popFirst(5))}static empty(){return new O(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ct.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ct.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new O(new ct(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(t,n,i,r){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=r}}function oy(e){return e.fields.find(t=>t.kind===2)}function Kr(e){return e.fields.filter(t=>t.kind!==2)}jd.UNKNOWN_ID=-1;class vh{constructor(t,n){this.fieldPath=t,this.kind=n}}class lc{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new lc(0,fn.min())}}function $A(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=U.fromTimestamp(i===1e9?new Ot(n+1,0):new Ot(n,i));return new fn(r,O.empty(),t)}function zA(e){return new fn(e.readTime,e.key,-1)}class fn{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new fn(U.min(),O.empty(),-1)}static max(){return new fn(U.max(),O.empty(),-1)}}function P0(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=O.comparator(e.documentKey,t.documentKey),n!==0?n:X(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vr(e){if(e.code!==S.FAILED_PRECONDITION||e.message!==jA)throw e;P("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new b((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):b.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):b.reject(n)}static resolve(t){return new b((n,i)=>{n(t)})}static reject(t){return new b((n,i)=>{i(t)})}static waitFor(t){return new b((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=b.resolve(!1);for(const i of t)n=n.next(r=>r?b.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new b((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new b((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new ce,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new gl(t,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=C0(i.target.error);this.V.reject(new gl(t,r))}}static open(t,n,i,r){try{return new Xf(n,t.transaction(r,i))}catch(s){throw new gl(n,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(P("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new GO(n)}}class Dn{constructor(t,n,i){this.name=t,this.version=n,this.p=i,Dn.S(Um())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return P("SimpleDb","Removing database:",t),Xr(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!TS())return!1;if(Dn.C())return!0;const t=Um(),n=Dn.S(t),i=0<n&&n<10,r=Dn.v(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(t){const n=t.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async O(t){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;n(o)},r.onblocked=()=>{i(new gl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new A(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new A(S.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new gl(t,o))},r.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,i,r){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=Xf.open(this.db,t,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),b.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class KO{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Xr(this.k.delete())}}class gl extends A{constructor(t,n){super(S.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Nr(e){return e.name==="IndexedDbTransactionError"}class GO{constructor(t){this.store=t}put(t,n){let i;return n!==void 0?(P("SimpleDb","PUT",this.store.name,t,n),i=this.store.put(n,t)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Xr(i)}add(t){return P("SimpleDb","ADD",this.store.name,t,t),Xr(this.store.add(t))}get(t){return Xr(this.store.get(t)).next(n=>(n===void 0&&(n=null),P("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return P("SimpleDb","DELETE",this.store.name,t),Xr(this.store.delete(t))}count(){return P("SimpleDb","COUNT",this.store.name),Xr(this.store.count())}W(t,n){const i=this.options(t,n);if(i.index||typeof this.store.getAll!="function"){const r=this.cursor(i),s=[];return this.G(r,(o,a)=>{s.push(a)}).next(()=>s)}{const r=this.store.getAll(i.range);return new b((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}j(t,n){const i=this.store.getAll(t,n===null?void 0:n);return new b((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(t,n){P("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,n);i.J=!1;const r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(t,n){let i;n?i=t:(i={},n=t);const r=this.cursor(i);return this.G(r,n)}Z(t){const n=this.cursor({});return new b((i,r)=>{n.onerror=s=>{const o=C0(s.target.error);r(o)},n.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(t,n){const i=[];return new b((r,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new KO(a),c=n(a.primaryKey,a.value,l);if(c instanceof b){const u=c.catch(h=>(l.done(),b.reject(h)));i.push(u)}l.isDone?r():l.$===null?a.continue():a.continue(l.$)}}).next(()=>b.waitFor(i))}options(t,n){let i;return t!==void 0&&(typeof t=="string"?i=t:n=t),{index:i,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const i=this.store.index(t.index);return t.J?i.openKeyCursor(t.range,n):i.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function Xr(e){return new b((t,n)=>{e.onsuccess=i=>{const r=i.target.result;t(r)},e.onerror=i=>{const r=C0(i.target.error);n(r)}})}let z1=!1;function C0(e){const t=Dn.S(Um());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const i=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return z1||(z1=!0,setTimeout(()=>{throw i},0)),i}}return e}class QO{constructor(t,n){this.asyncQueue=t,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(t){P("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{P("IndexBackiller",`Documents written: ${await this.X.te()}`)}catch(n){Nr(n)?P("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Vr(n)}await this.ee(6e4)})}}class YO{constructor(t,n){this.localStore=t,this.persistence=n}async te(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,t))}ne(t,n){const i=new Set;let r=n,s=!0;return b.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(o!==null&&!i.has(o))return P("IndexBackiller",`Processing collection: ${o}`),this.re(t,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}re(t,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next(r=>this.localStore.localDocuments.getNextDocuments(t,n,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.ie(r,s)).next(a=>(P("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,n,a))).next(()=>o.size)}))}ie(t,n){let i=t;return n.changes.forEach((r,s)=>{const o=zA(s);P0(o,i)>0&&(i=o)}),new fn(i.readTime,i.documentKey,Math.max(n.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.se(i),this.oe=i=>n.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}Ye._e=-1;function Hc(e){return e==null}function cc(e){return e===0&&1/e==-1/0}function WA(e){return typeof e=="number"&&Number.isInteger(e)&&!cc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=j1(t)),t=XO(e.get(n),t);return j1(t)}function XO(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function j1(e){return e+""}function Jn(e){const t=e.length;if(W(t>=2),t===2)return W(e.charAt(0)===""&&e.charAt(1)===""),ct.emptyPath();const n=t-2,i=[];let r="";for(let s=0;s<t;){const o=e.indexOf("",s);switch((o<0||o>n)&&B(),e.charAt(o+1)){case"":const a=e.substring(s,o);let l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=e.substring(s,o),r+="\0";break;case"":r+=e.substring(s,o+1);break;default:B()}s=o+2}return new ct(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(e,t){return[e,$e(t)]}function HA(e,t,n){return[e,$e(t),n]}const JO={},ZO=["prefixPath","collectionGroup","readTime","documentId"],tL=["prefixPath","collectionGroup","documentId"],eL=["collectionGroup","readTime","prefixPath","documentId"],nL=["canonicalId","targetId"],iL=["targetId","path"],rL=["path","targetId"],sL=["collectionId","parent"],oL=["indexId","uid"],aL=["uid","sequenceNumber"],lL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cL=["indexId","uid","orderedDocumentKey"],uL=["userId","collectionPath","documentId"],hL=["userId","collectionPath","largestBatchId"],dL=["userId","collectionGroup","largestBatchId"],qA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fL=[...qA,"documentOverlays"],KA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GA=KA,pL=[...GA,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends UA{constructor(t,n){super(),this.ae=t,this.currentSequenceNumber=n}}function fe(e,t){const n=L(e);return Dn.M(n.ae,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function QA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,n){this.comparator=t,this.root=n||ye.EMPTY}insert(t,n){return new xt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ye.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ye.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nu(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nu(this.root,t,this.comparator,!0)}}class Nu{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ye{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??ye.RED,this.left=r??ye.EMPTY,this.right=s??ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new ye(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ye.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ye.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const t=this.left.check();if(t!==this.right.check())throw B();return t+(this.isRed()?0:1)}}ye.EMPTY=null,ye.RED=!0,ye.BLACK=!1;ye.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(t,n,i,r,s){return this}insert(t,n,i){return new ye(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new H1(this.data.getIterator())}getIteratorFrom(t){return new H1(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof vt)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new vt(this.comparator);return n.data=t,n}}class H1{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qs(e){return e.hasNext()?e.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.fields=t,t.sort(Vt.comparator)}static empty(){return new Xe([])}unionWith(t){let n=new vt(Vt.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Xe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Uo(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new YA("Invalid base64 string: "+s):s}}(t);return new ie(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new ie(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return X(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ie.EMPTY_BYTE_STRING=new ie("");const mL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(e){if(W(!!e),typeof e=="string"){let t=0;const n=mL.exec(e);if(W(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jt(e.seconds),nanos:jt(e.nanos)}}function jt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function wr(e){return typeof e=="string"?ie.fromBase64String(e):ie.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function R0(e){const t=e.mapValue.fields.__previous_value__;return Jf(t)?R0(t):t}function uc(e){const t=vr(e.mapValue.fields.__local_write_time__.timestampValue);return new Ot(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(t,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Er{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Er("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Er&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Eh={nullValue:"NULL_VALUE"};function bs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jf(e)?4:XA(e)?9007199254740991:10:B()}function si(e,t){if(e===t)return!0;const n=bs(e);if(n!==bs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return uc(e).isEqual(uc(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=vr(r.timestampValue),a=vr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return wr(r.bytesValue).isEqual(wr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return jt(r.geoPointValue.latitude)===jt(s.geoPointValue.latitude)&&jt(r.geoPointValue.longitude)===jt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return jt(r.integerValue)===jt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=jt(r.doubleValue),a=jt(s.doubleValue);return o===a?cc(o)===cc(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Uo(e.arrayValue.values||[],t.arrayValue.values||[],si);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(W1(o)!==W1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!si(o[l],a[l])))return!1;return!0}(e,t);default:return B()}}function hc(e,t){return(e.values||[]).find(n=>si(n,t))!==void 0}function xr(e,t){if(e===t)return 0;const n=bs(e),i=bs(t);if(n!==i)return X(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return X(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=jt(s.integerValue||s.doubleValue),l=jt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return q1(e.timestampValue,t.timestampValue);case 4:return q1(uc(e),uc(t));case 5:return X(e.stringValue,t.stringValue);case 6:return function(s,o){const a=wr(s),l=wr(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=X(a[c],l[c]);if(u!==0)return u}return X(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=X(jt(s.latitude),jt(o.latitude));return a!==0?a:X(jt(s.longitude),jt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=xr(a[c],l[c]);if(u)return u}return X(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Yi.mapValue&&o===Yi.mapValue)return 0;if(s===Yi.mapValue)return 1;if(o===Yi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=X(l[h],u[h]);if(d!==0)return d;const f=xr(a[l[h]],c[u[h]]);if(f!==0)return f}return X(l.length,u.length)}(e.mapValue,t.mapValue);default:throw B()}}function q1(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return X(e,t);const n=vr(e),i=vr(t),r=X(n.seconds,i.seconds);return r!==0?r:X(n.nanos,i.nanos)}function Wo(e){return ly(e)}function ly(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=vr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return wr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return O.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=ly(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${ly(n.fields[o])}`;return r+"}"}(e.mapValue):B()}function Ss(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function cy(e){return!!e&&"integerValue"in e}function dc(e){return!!e&&"arrayValue"in e}function K1(e){return!!e&&"nullValue"in e}function G1(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xh(e){return!!e&&"mapValue"in e}function ml(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return zs(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=ml(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ml(e.arrayValue.values[n]);return t}return Object.assign({},e)}function XA(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function _L(e){return"nullValue"in e?Eh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ss(Er.empty(),O.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:B()}function vL(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ss(Er.empty(),O.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Yi:B()}function Q1(e,t){const n=xr(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Y1(e,t){const n=xr(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.value=t}static empty(){return new ve({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!xh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ml(n)}setAll(t){let n=Vt.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ml(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return si(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];xh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){zs(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new ve(ml(this.value))}}function JA(e){const t=[];return zs(e.fields,(n,i)=>{const r=new Vt([n]);if(xh(i)){const s=JA(i.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Pt(t,0,U.min(),U.min(),U.min(),ve.empty(),0)}static newFoundDocument(t,n,i,r){return new Pt(t,1,n,U.min(),i,r,0)}static newNoDocument(t,n){return new Pt(t,2,n,U.min(),U.min(),ve.empty(),0)}static newUnknownDocument(t,n){return new Pt(t,3,n,U.min(),U.min(),ve.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(U.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ve.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ve.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Pt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t,n){this.position=t,this.inclusive=n}}function X1(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=O.comparator(O.fromName(o.referenceValue),n.key):i=xr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function J1(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!si(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,n="asc"){this.field=t,this.dir=n}}function wL(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{}class it extends ZA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new EL(t,n,i):n==="array-contains"?new IL(t,i):n==="in"?new sP(t,i):n==="not-in"?new bL(t,i):n==="array-contains-any"?new SL(t,i):new it(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new xL(t,i):new TL(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xr(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(xr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends ZA{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new mt(t,n)}matches(t){return Ho(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ho(e){return e.op==="and"}function uy(e){return e.op==="or"}function k0(e){return tP(e)&&Ho(e)}function tP(e){for(const t of e.filters)if(t instanceof mt)return!1;return!0}function hy(e){if(e instanceof it)return e.field.canonicalString()+e.op.toString()+Wo(e.value);if(k0(e))return e.filters.map(t=>hy(t)).join(",");{const t=e.filters.map(n=>hy(n)).join(",");return`${e.op}(${t})`}}function eP(e,t){return e instanceof it?function(i,r){return r instanceof it&&i.op===r.op&&i.field.isEqual(r.field)&&si(i.value,r.value)}(e,t):e instanceof mt?function(i,r){return r instanceof mt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&eP(o,r.filters[a]),!0):!1}(e,t):void B()}function nP(e,t){const n=e.filters.concat(t);return mt.create(n,e.op)}function iP(e){return e instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Wo(n.value)}`}(e):e instanceof mt?function(n){return n.op.toString()+" {"+n.getFilters().map(iP).join(" ,")+"}"}(e):"Filter"}class EL extends it{constructor(t,n,i){super(t,n,i),this.key=O.fromName(i.referenceValue)}matches(t){const n=O.comparator(t.key,this.key);return this.matchesComparison(n)}}class xL extends it{constructor(t,n){super(t,"in",n),this.keys=rP("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class TL extends it{constructor(t,n){super(t,"not-in",n),this.keys=rP("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function rP(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>O.fromName(i.referenceValue))}class IL extends it{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return dc(n)&&hc(n.arrayValue,this.value)}}class sP extends it{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&hc(this.value.arrayValue,n)}}class bL extends it{constructor(t,n){super(t,"not-in",n)}matches(t){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!hc(this.value.arrayValue,n)}}class SL extends it{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!dc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>hc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function dy(e,t=null,n=[],i=[],r=null,s=null,o=null){return new AL(e,t,n,i,r,s,o)}function As(e){const t=L(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>hy(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Hc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Wo(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Wo(i)).join(",")),t.ce=n}return t.ce}function qc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wL(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!eP(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!J1(e.startAt,t.startAt)&&J1(e.endAt,t.endAt)}function Ud(e){return O.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Wd(e,t){return e.filters.filter(n=>n instanceof it&&n.field.isEqual(t))}function Z1(e,t,n){let i=Eh,r=!0;for(const s of Wd(e,t)){let o=Eh,a=!0;switch(s.op){case"<":case"<=":o=_L(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Eh}Q1({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const o=n.position[s];Q1({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function tE(e,t,n){let i=Yi,r=!0;for(const s of Wd(e,t)){let o=Yi,a=!0;switch(s.op){case">=":case">":o=vL(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Yi}Y1({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const o=n.position[s];Y1({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function oP(e,t,n,i,r,s,o,a){return new Di(e,t,n,i,r,s,o,a)}function ua(e){return new Di(e)}function eE(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function D0(e){return e.collectionGroup!==null}function ko(e){const t=L(e);if(t.le===null){t.le=[];const n=new Set;for(const s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vt(Vt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new fc(s,i))}),n.has(Vt.keyField().canonicalString())||t.le.push(new fc(Vt.keyField(),i))}return t.le}function ze(e){const t=L(e);return t.he||(t.he=PL(t,ko(e))),t.he}function PL(e,t){if(e.limitType==="F")return dy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new fc(r.field,s)});const n=e.endAt?new Tr(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Tr(e.startAt.position,e.startAt.inclusive):null;return dy(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function fy(e,t){const n=e.filters.concat([t]);return new Di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hd(e,t,n){return new Di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kc(e,t){return qc(ze(e),ze(t))&&e.limitType===t.limitType}function aP(e){return`${As(ze(e))}|lt:${e.limitType}`}function ro(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>iP(r)).join(", ")}]`),Hc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Wo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Wo(r)).join(",")),`Target(${i})`}(ze(e))}; limitType=${e.limitType})`}function Gc(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):O.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of ko(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=X1(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,ko(i),r)||i.endAt&&!function(o,a,l){const c=X1(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,ko(i),r))}(e,t)}function lP(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cP(e){return(t,n)=>{let i=!1;for(const r of ko(e)){const s=CL(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function CL(e,t,n){const i=e.field.isKeyField()?O.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?xr(l,c):B()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return B()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){zs(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return QA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new xt(O.comparator);function Je(){return RL}const uP=new xt(O.comparator);function Ka(...e){let t=uP;for(const n of e)t=t.insert(n.key,n);return t}function hP(e){let t=uP;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Zn(){return yl()}function dP(){return yl()}function yl(){return new Or(e=>e.toString(),(e,t)=>e.isEqual(t))}const kL=new xt(O.comparator),DL=new vt(O.comparator);function Z(...e){let t=DL;for(const n of e)t=t.add(n);return t}const ML=new vt(X);function M0(){return ML}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(t)?"-0":t}}function pP(e){return{integerValue:""+e}}function gP(e,t){return WA(t)?pP(t):fP(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this._=void 0}}function VL(e,t,n){return e instanceof qo?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Jf(s)&&(s=R0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof Ps?yP(e,t):e instanceof Cs?_P(e,t):function(r,s){const o=mP(r,s),a=nE(o)+nE(r.Ie);return cy(o)&&cy(r.Ie)?pP(a):fP(r.serializer,a)}(e,t)}function NL(e,t,n){return e instanceof Ps?yP(e,t):e instanceof Cs?_P(e,t):n}function mP(e,t){return e instanceof Ko?function(i){return cy(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class qo extends Zf{}class Ps extends Zf{constructor(t){super(),this.elements=t}}function yP(e,t){const n=vP(t);for(const i of e.elements)n.some(r=>si(r,i))||n.push(i);return{arrayValue:{values:n}}}class Cs extends Zf{constructor(t){super(),this.elements=t}}function _P(e,t){let n=vP(t);for(const i of e.elements)n=n.filter(r=>!si(r,i));return{arrayValue:{values:n}}}class Ko extends Zf{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function nE(e){return jt(e.integerValue||e.doubleValue)}function vP(e){return dc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n){this.field=t,this.transform=n}}function OL(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Ps&&r instanceof Ps||i instanceof Cs&&r instanceof Cs?Uo(i.elements,r.elements,si):i instanceof Ko&&r instanceof Ko?si(i.Ie,r.Ie):i instanceof qo&&r instanceof qo}(e.transform,t.transform)}class LL{constructor(t,n){this.version=t,this.transformResults=n}}class Nt{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Nt}static exists(t){return new Nt(void 0,t)}static updateTime(t){return new Nt(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Th(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class tp{}function wP(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new da(e.key,Nt.none()):new ha(e.key,e.data,Nt.none());{const n=e.data,i=ve.empty();let r=new vt(Vt.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Mi(e.key,i,new Xe(r.toArray()),Nt.none())}}function FL(e,t,n){e instanceof ha?function(r,s,o){const a=r.value.clone(),l=rE(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Mi?function(r,s,o){if(!Th(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=rE(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(EP(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function _l(e,t,n,i){return e instanceof ha?function(s,o,a,l){if(!Th(s.precondition,o))return a;const c=s.value.clone(),u=sE(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Mi?function(s,o,a,l){if(!Th(s.precondition,o))return a;const c=sE(s.fieldTransforms,l,o),u=o.data;return u.setAll(EP(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(e,t,n,i):function(s,o,a){return Th(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function BL(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=mP(i.transform,r||null);s!=null&&(n===null&&(n=ve.empty()),n.set(i.field,s))}return n||null}function iE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Uo(i,r,(s,o)=>OL(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ha extends tp{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mi extends tp{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EP(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function rE(e,t,n){const i=new Map;W(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,NL(o,a,n[r]))}return i}function sE(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,VL(s,o,t))}return i}class da extends tp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V0 extends tp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&FL(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=_l(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=_l(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=dP();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=wP(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(U.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Z())}isEqual(t){return this.batchId===t.batchId&&Uo(this.mutations,t.mutations,(n,i)=>iE(n,i))&&Uo(this.baseMutations,t.baseMutations,(n,i)=>iE(n,i))}}class O0{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){W(t.mutations.length===i.length);let r=function(){return kL}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new O0(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,lt;function xP(e){switch(e){default:return B();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function TP(e){if(e===void 0)return Gt("GRPC error has no .code"),S.UNKNOWN;switch(e){case Xt.OK:return S.OK;case Xt.CANCELLED:return S.CANCELLED;case Xt.UNKNOWN:return S.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return S.INTERNAL;case Xt.UNAVAILABLE:return S.UNAVAILABLE;case Xt.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Xt.NOT_FOUND:return S.NOT_FOUND;case Xt.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Xt.ABORTED:return S.ABORTED;case Xt.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Xt.DATA_LOSS:return S.DATA_LOSS;default:return B()}}(lt=Xt||(Xt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=new Ro([4294967295,4294967295],0);function oE(e){const t=IP().encode(e),n=new NO;return n.update(t),new Uint8Array(n.digest())}function aE(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ro([n,i],0),new Ro([r,s],0)]}class F0{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ga(`Invalid padding: ${n}`);if(i<0)throw new Ga(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Ro.fromNumber(this.Te)}de(t,n,i){let r=t.add(n.multiply(Ro.fromNumber(i)));return r.compare(zL)===1&&(r=new Ro([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=oE(t),[i,r]=aE(n);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new F0(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=oE(t),[i,r]=aE(n);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);this.Re(o)}}Re(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Xc.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Yc(U.min(),r,new xt(X),Je(),Z())}}class Xc{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Xc(i,n,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(t,n,i,r){this.Ve=t,this.removedTargetIds=n,this.key=i,this.me=r}}class bP{constructor(t,n){this.targetId=t,this.fe=n}}class SP{constructor(t,n,i=ie.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class lE{constructor(){this.ge=0,this.pe=uE(),this.ye=ie.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Z(),n=Z(),i=Z();return this.pe.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:B()}}),new Xc(this.ye,this.we,t,n,i)}Fe(){this.Se=!1,this.pe=uE()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class jL{constructor(t){this.Le=t,this.ke=new Map,this.qe=Je(),this.Qe=cE(),this.Ke=new xt(X)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const i=this.ze(n);switch(t.state){case 0:this.je(n)&&i.Ce(t.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(t.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(t.resumeToken));break;default:B()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(t){const n=t.targetId,i=t.fe.count,r=this.Ye(n);if(r){const s=r.target;if(Ud(s))if(i===0){const o=new O(s.path);this.We(n,o,Pt.newNoDocument(o,U.min()))}else W(i===1);else{const o=this.Ze(n);if(o!==i){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=wr(i).toUint8Array()}catch(l){if(l instanceof YA)return $n("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new F0(o,r,s)}catch(l){return $n(l instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,i){return n.fe.count===i-this.rt(t,n.targetId)?0:2}rt(t,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),r++)}),r}it(t){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Ud(a.target)){const l=new O(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Pt.newNoDocument(l,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let i=Z();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));const r=new Yc(t,n,this.Ke,this.qe,i);return this.qe=Je(),this.Qe=cE(),this.Ke=new xt(X),r}Ue(t,n){if(!this.je(t))return;const i=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,i){if(!this.je(t))return;const r=this.ze(t);this.st(t,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new lE,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new vt(X),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||P("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new lE),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function cE(){return new xt(O.comparator)}function uE(){return new xt(O.comparator)}const UL=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),WL=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),HL=(()=>({and:"AND",or:"OR"}))();class qL{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function py(e,t){return e.useProto3Json||Hc(t)?t:{value:t}}function Go(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function AP(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function KL(e,t){return Go(e,t.toTimestamp())}function Yt(e){return W(!!e),U.fromTimestamp(function(n){const i=vr(n);return new Ot(i.seconds,i.nanos)}(e))}function B0(e,t){return function(i){return new ct(["projects",i.projectId,"databases",i.database])}(e).child("documents").child(t).canonicalString()}function PP(e){const t=ct.fromString(e);return W(LP(t)),t}function pc(e,t){return B0(e.databaseId,t.path)}function ni(e,t){const n=PP(t);if(n.get(1)!==e.databaseId.projectId)throw new A(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new A(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new O(RP(n))}function gy(e,t){return B0(e.databaseId,t)}function CP(e){const t=PP(e);return t.length===4?ct.emptyPath():RP(t)}function gc(e){return new ct(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function RP(e){return W(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function hE(e,t,n){return{name:pc(e,t),fields:n.value.mapValue.fields}}function kP(e,t,n){const i=ni(e,t.name),r=Yt(t.updateTime),s=t.createTime?Yt(t.createTime):U.min(),o=new ve({mapValue:{fields:t.fields}}),a=Pt.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function GL(e,t){return"found"in t?function(i,r){W(!!r.found),r.found.name,r.found.updateTime;const s=ni(i,r.found.name),o=Yt(r.found.updateTime),a=r.found.createTime?Yt(r.found.createTime):U.min(),l=new ve({mapValue:{fields:r.found.fields}});return Pt.newFoundDocument(s,o,a,l)}(e,t):"missing"in t?function(i,r){W(!!r.missing),W(!!r.readTime);const s=ni(i,r.missing),o=Yt(r.readTime);return Pt.newNoDocument(s,o)}(e,t):B()}function QL(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:B()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(W(u===void 0||typeof u=="string"),ie.fromBase64String(u||"")):(W(u===void 0||u instanceof Uint8Array),ie.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?S.UNKNOWN:TP(c.code);return new A(u,c.message||"")}(o);n=new SP(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=ni(e,i.document.name),s=Yt(i.document.updateTime),o=i.document.createTime?Yt(i.document.createTime):U.min(),a=new ve({mapValue:{fields:i.document.fields}}),l=Pt.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Ih(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=ni(e,i.document),s=i.readTime?Yt(i.readTime):U.min(),o=Pt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Ih([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=ni(e,i.document),s=i.removedTargetIds||[];n=new Ih([],s,r,null)}else{if(!("filter"in t))return B();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new $L(r,s),a=i.targetId;n=new bP(a,o)}}return n}function mc(e,t){let n;if(t instanceof ha)n={update:hE(e,t.key,t.value)};else if(t instanceof da)n={delete:pc(e,t.key)};else if(t instanceof Mi)n={update:hE(e,t.key,t.data),updateMask:eF(t.fieldMask)};else{if(!(t instanceof V0))return B();n={verify:pc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof qo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ps)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ko)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw B()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:KL(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(e,t.precondition)),n}function my(e,t){const n=t.currentDocument?function(s){return s.updateTime!==void 0?Nt.updateTime(Yt(s.updateTime)):s.exists!==void 0?Nt.exists(s.exists):Nt.none()}(t.currentDocument):Nt.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,a){let l=null;if("setToServerValue"in a)W(a.setToServerValue==="REQUEST_TIME"),l=new qo;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new Ps(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new Cs(u)}else"increment"in a?l=new Ko(o,a.increment):B();const c=Vt.fromServerFormat(a.fieldPath);return new Qc(c,l)}(e,r)):[];if(t.update){t.update.name;const r=ni(e,t.update.name),s=new ve({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Xe(c.map(u=>Vt.fromServerFormat(u)))}(t.updateMask);return new Mi(r,s,o,n,i)}return new ha(r,s,n,i)}if(t.delete){const r=ni(e,t.delete);return new da(r,n)}if(t.verify){const r=ni(e,t.verify);return new V0(r,n)}return B()}function YL(e,t){return e&&e.length>0?(W(t!==void 0),e.map(n=>function(r,s){let o=r.updateTime?Yt(r.updateTime):Yt(s);return o.isEqual(U.min())&&(o=Yt(s)),new LL(o,r.transformResults||[])}(n,t))):[]}function DP(e,t){return{documents:[gy(e,t.path)]}}function MP(e,t){const n={structuredQuery:{}},i=t.path;t.collectionGroup!==null?(n.parent=gy(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=gy(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(l.length!==0)return OP(mt.create(l,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:so(h.field),direction:JL(h.dir)}}(c))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=py(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function VP(e){let t=CP(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){W(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=NP(h);return d instanceof mt&&k0(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new fc(oo(p.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Hc(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Tr(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Tr(f,d)}(n.endAt)),oP(t,r,o,s,a,"F",l,c)}function XL(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function NP(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=oo(n.unaryFilter.field);return it.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=oo(n.unaryFilter.field);return it.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=oo(n.unaryFilter.field);return it.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oo(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(e):e.fieldFilter!==void 0?function(n){return it.create(oo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return mt.create(n.compositeFilter.filters.map(i=>NP(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return B()}}(n.compositeFilter.op))}(e):B()}function JL(e){return UL[e]}function ZL(e){return WL[e]}function tF(e){return HL[e]}function so(e){return{fieldPath:e.canonicalString()}}function oo(e){return Vt.fromServerFormat(e.fieldPath)}function OP(e){return e instanceof it?function(n){if(n.op==="=="){if(G1(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(K1(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G1(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(K1(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:ZL(n.op),value:n.value}}}(e):e instanceof mt?function(n){const i=n.getFilters().map(r=>OP(r));return i.length===1?i[0]:{compositeFilter:{op:tF(n.op),filters:i}}}(e):B()}function eF(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function LP(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,n,i,r,s=U.min(),o=U.min(),a=ie.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new _i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(t){this.ut=t}}function nF(e,t){let n;if(t.document)n=kP(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=O.fromSegments(t.noDocument.path),r=ks(t.noDocument.readTime);n=Pt.newNoDocument(i,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return B();{const i=O.fromSegments(t.unknownDocument.path),r=ks(t.unknownDocument.version);n=Pt.newUnknownDocument(i,r)}}return t.readTime&&n.setReadTime(function(r){const s=new Ot(r[0],r[1]);return U.fromTimestamp(s)}(t.readTime)),n}function dE(e,t){const n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(s,o){return{name:pc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Go(s,o.version.toTimestamp()),createTime:Go(s,o.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Rs(t.version)};else{if(!t.isUnknownDocument())return B();i.unknownDocument={path:n.path.toArray(),version:Rs(t.version)}}return i}function qd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Rs(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ks(e){const t=new Ot(e.seconds,e.nanoseconds);return U.fromTimestamp(t)}function Jr(e,t){const n=(t.baseMutations||[]).map(s=>my(e.ut,s));for(let s=0;s<t.mutations.length-1;++s){const o=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){const a=t.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const i=t.mutations.map(s=>my(e.ut,s)),r=Ot.fromMillis(t.localWriteTimeMs);return new N0(t.batchId,r,n,i)}function Qa(e){const t=ks(e.readTime),n=e.lastLimboFreeSnapshotVersion!==void 0?ks(e.lastLimboFreeSnapshotVersion):U.min();let i;return i=function(s){return s.documents!==void 0}(e.query)?function(s){return W(s.documents.length===1),ze(ua(CP(s.documents[0])))}(e.query):function(s){return ze(VP(s))}(e.query),new _i(i,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ie.fromBase64String(e.resumeToken))}function BP(e,t){const n=Rs(t.snapshotVersion),i=Rs(t.lastLimboFreeSnapshotVersion);let r;r=Ud(t.target)?DP(e.ut,t.target):MP(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:As(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function $0(e){const t=VP({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Hd(t,t.limit,"L"):t}function yg(e,t){return new L0(t.largestBatchId,my(e.ut,t.overlayMutation))}function fE(e,t){const n=t.path.lastSegment();return[e,$e(t.path.popLast()),n]}function pE(e,t,n,i){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Rs(i.readTime),documentKey:$e(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{getBundleMetadata(t,n){return gE(t).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:ks(s.createTime),version:s.version}}(i)})}saveBundleMetadata(t,n){return gE(t).put(function(r){return{bundleId:r.id,createTime:Rs(Yt(r.createTime)),version:r.version}}(n))}getNamedQuery(t,n){return mE(t).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:$0(s.bundledQuery),readTime:ks(s.readTime)}}(i)})}saveNamedQuery(t,n){return mE(t).put(function(r){return{name:r.name,readTime:Rs(Yt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function gE(e){return fe(e,"bundles")}function mE(e){return fe(e,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t,n){this.serializer=t,this.userId=n}static ct(t,n){const i=n.uid||"";return new ep(t,i)}getOverlay(t,n){return Aa(t).get(fE(this.userId,n)).next(i=>i?yg(this.serializer,i):null)}getOverlays(t,n){const i=Zn();return b.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){const r=[];return i.forEach((s,o)=>{const a=new L0(n,o);r.push(this.lt(t,a))}),b.waitFor(r)}removeOverlaysForBatchId(t,n,i){const r=new Set;n.forEach(o=>r.add($e(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Aa(t).H("collectionPathOverlayIndex",a))}),b.waitFor(s)}getOverlaysForCollection(t,n,i){const r=Zn(),s=$e(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Aa(t).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=yg(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(t,n,i,r){const s=Zn();let o;const a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Aa(t).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=yg(this.serializer,c);s.size()<r||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}lt(t,n){return Aa(t).put(function(r,s,o){const[a,l,c]=fE(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:mc(r.ut,o.mutation)}}(this.serializer,this.userId,n))}}function Aa(e){return fe(e,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){}ht(t,n){this.Pt(t,n),n.It()}Pt(t,n){if("nullValue"in t)this.Tt(n,5);else if("booleanValue"in t)this.Tt(n,10),n.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(n,15),n.Et(jt(t.integerValue));else if("doubleValue"in t){const i=jt(t.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),cc(i)?n.Et(0):n.Et(i))}else if("timestampValue"in t){const i=t.timestampValue;this.Tt(n,20),typeof i=="string"?n.dt(i):(n.dt(`${i.seconds||""}`),n.Et(i.nanos||0))}else if("stringValue"in t)this.At(t.stringValue,n),this.Rt(n);else if("bytesValue"in t)this.Tt(n,30),n.Vt(wr(t.bytesValue)),this.Rt(n);else if("referenceValue"in t)this.ft(t.referenceValue,n);else if("geoPointValue"in t){const i=t.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in t?XA(t)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,n),this.Rt(n)):"arrayValue"in t?(this.yt(t.arrayValue,n),this.Rt(n)):B()}At(t,n){this.Tt(n,25),this.wt(t,n)}wt(t,n){n.dt(t)}gt(t,n){const i=t.fields||{};this.Tt(n,55);for(const r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(t,n){const i=t.values||[];this.Tt(n,50);for(const r of i)this.Pt(r,n)}ft(t,n){this.Tt(n,37),O.fromName(t).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(t,n){t.Et(n)}Rt(t){t.Et(2)}}Zr.St=new Zr;function rF(e){if(e===0)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function yE(e){const t=64-function(i){let r=0;for(let s=0;s<8;++s){const o=rF(255&i[s]);if(r+=o,o!==8)break}return r}(e);return Math.ceil(t/8)}class sF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(t){const n=t[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Dt(i.value),i=n.next();this.Ct()}vt(t){const n=t[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(t){for(const n of t){const i=n.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{const r=n.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(t){for(const n of t){const i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(t){const n=this.Bt(t),i=yE(n);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}kt(t){const n=this.Bt(t),i=yE(n);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(t){this.Lt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Ut(){return this.buffer.slice(0,this.position)}Bt(t){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(t),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Dt(t){const n=255&t;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(t){const n=255&t;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(t)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(t){this.Lt(1),this.buffer[this.position++]=t}$t(t){this.Lt(1),this.buffer[this.position++]=~t}Lt(t){const n=t+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class oF{constructor(t){this.Wt=t}Vt(t){this.Wt.bt(t)}dt(t){this.Wt.xt(t)}Et(t){this.Wt.Nt(t)}It(){this.Wt.qt()}}class aF{constructor(t){this.Wt=t}Vt(t){this.Wt.vt(t)}dt(t){this.Wt.Ot(t)}Et(t){this.Wt.kt(t)}It(){this.Wt.Kt()}}class Pa{constructor(){this.Wt=new sF,this.Gt=new oF(this.Wt),this.zt=new aF(this.Wt)}seed(t){this.Wt.seed(t)}jt(t){return t===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t,n,i,r){this.indexId=t,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Ht(){const t=this.directionalValue.length,n=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new ts(this.indexId,this.documentKey,this.arrayValue,i)}}function Li(e,t){let n=e.indexId-t.indexId;return n!==0?n:(n=_E(e.arrayValue,t.arrayValue),n!==0?n:(n=_E(e.directionalValue,t.directionalValue),n!==0?n:O.comparator(e.documentKey,t.documentKey)))}function _E(e,t){for(let n=0;n<e.length&&n<t.length;++n){const i=e[n]-t[n];if(i!==0)return i}return e.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t){this.Jt=new vt((n,i)=>Vt.comparator(n.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];for(const n of t.filters){const i=n;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(t){if(W(t.collectionGroup===this.collectionId),this.Xt)return!1;const n=oy(t);if(n!==void 0&&!this.tn(n))return!1;const i=Kr(t);let r=new Set,s=0,o=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<i.length;++s){const a=i[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let t=new vt(Vt.comparator);const n=[];for(const i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new vh(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new vh(i.field,0))}for(const i of this.Yt)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),n.push(new vh(i.field,i.dir==="asc"?0:1)));return new jd(jd.UNKNOWN_ID,this.collectionId,n,lc.empty())}tn(t){for(const n of this.Zt)if(this.nn(n,t))return!0;return!1}nn(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;const i=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===i}rn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(e){var t,n;if(W(e instanceof it||e instanceof mt),e instanceof it){if(e instanceof sP){const r=((n=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||n===void 0?void 0:n.map(s=>it.create(e.field,"==",s)))||[];return mt.create(r,"or")}return e}const i=e.filters.map(r=>$P(r));return mt.create(i,e.op)}function lF(e){if(e.getFilters().length===0)return[];const t=vy($P(e));return W(zP(t)),yy(t)||_y(t)?[t]:t.getFilters()}function yy(e){return e instanceof it}function _y(e){return e instanceof mt&&k0(e)}function zP(e){return yy(e)||_y(e)||function(n){if(n instanceof mt&&uy(n)){for(const i of n.getFilters())if(!yy(i)&&!_y(i))return!1;return!0}return!1}(e)}function vy(e){if(W(e instanceof it||e instanceof mt),e instanceof it)return e;if(e.filters.length===1)return vy(e.filters[0]);const t=e.filters.map(i=>vy(i));let n=mt.create(t,e.op);return n=Kd(n),zP(n)?n:(W(n instanceof mt),W(Ho(n)),W(n.filters.length>1),n.filters.reduce((i,r)=>z0(i,r)))}function z0(e,t){let n;return W(e instanceof it||e instanceof mt),W(t instanceof it||t instanceof mt),n=e instanceof it?t instanceof it?function(r,s){return mt.create([r,s],"and")}(e,t):wE(e,t):t instanceof it?wE(t,e):function(r,s){if(W(r.filters.length>0&&s.filters.length>0),Ho(r)&&Ho(s))return nP(r,s.getFilters());const o=uy(r)?r:s,a=uy(r)?s:r,l=o.filters.map(c=>z0(c,a));return mt.create(l,"or")}(e,t),Kd(n)}function wE(e,t){if(Ho(t))return nP(t,e.getFilters());{const n=t.filters.map(i=>z0(e,i));return mt.create(n,"or")}}function Kd(e){if(W(e instanceof it||e instanceof mt),e instanceof it)return e;const t=e.getFilters();if(t.length===1)return Kd(t[0]);if(tP(e))return e;const n=t.map(r=>Kd(r)),i=[];return n.forEach(r=>{r instanceof it?i.push(r):r instanceof mt&&(r.op===e.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:mt.create(i,e.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this.on=new j0}addToCollectionParentIndex(t,n){return this.on.add(n),b.resolve()}getCollectionParents(t,n){return b.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return b.resolve()}deleteFieldIndex(t,n){return b.resolve()}deleteAllFieldIndexes(t){return b.resolve()}createTargetIndexes(t,n){return b.resolve()}getDocumentsMatchingTarget(t,n){return b.resolve(null)}getIndexType(t,n){return b.resolve(0)}getFieldIndexes(t,n){return b.resolve([])}getNextCollectionGroupToUpdate(t){return b.resolve(null)}getMinOffset(t,n){return b.resolve(fn.min())}getMinOffsetFromCollectionGroup(t,n){return b.resolve(fn.min())}updateCollectionGroup(t,n,i){return b.resolve()}updateIndexEntries(t,n){return b.resolve()}}class j0{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new vt(ct.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new vt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new Uint8Array(0);class uF{constructor(t,n){this.user=t,this.databaseId=n,this._n=new j0,this.an=new Or(i=>As(i),(i,r)=>qc(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this._n.has(n)){const i=n.lastSegment(),r=n.popLast();t.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:i,parent:$e(r)};return EE(t).put(s)}return b.resolve()}getCollectionParents(t,n){const i=[],r=IDBKeyRange.bound([n,""],[BA(n),""],!1,!0);return EE(t).W(r).next(s=>{for(const o of s){if(o.collectionId!==n)break;i.push(Jn(o.parent))}return i})}addFieldIndex(t,n){const i=Ca(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const o=Xs(t);return s.next(a=>{o.put(pE(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(t,n){const i=Ca(t),r=Xs(t),s=Ys(t);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const n=Ca(t),i=Ys(t),r=Xs(t);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(t,n){return b.forEach(this.un(n),i=>this.getIndexType(t,i).next(r=>{if(r===0||r===1){const s=new vE(i).sn();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,n){const i=Ys(t);let r=!0;const s=new Map;return b.forEach(this.un(n),o=>this.cn(t,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Z();const a=[];return b.forEach(s,(l,c)=>{P("IndexedDbIndexManager",`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(l)} to execute ${As(n)}`);const u=function(v,w){const E=oy(w);if(E===void 0)return null;for(const x of Wd(v,E.fieldPath))switch(x.op){case"array-contains-any":return x.value.arrayValue.values||[];case"array-contains":return[x.value]}return null}(c,l),h=function(v,w){const E=new Map;for(const x of Kr(w))for(const T of Wd(v,x.fieldPath))switch(T.op){case"==":case"in":E.set(x.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return E.set(x.fieldPath.canonicalString(),T.value),Array.from(E.values())}return null}(c,l),d=function(v,w){const E=[];let x=!0;for(const T of Kr(w)){const I=T.kind===0?Z1(v,T.fieldPath,v.startAt):tE(v,T.fieldPath,v.startAt);E.push(I.value),x&&(x=I.inclusive)}return new Tr(E,x)}(c,l),f=function(v,w){const E=[];let x=!0;for(const T of Kr(w)){const I=T.kind===0?tE(v,T.fieldPath,v.endAt):Z1(v,T.fieldPath,v.endAt);E.push(I.value),x&&(x=I.inclusive)}return new Tr(E,x)}(c,l),p=this.ln(l,c,d),m=this.ln(l,c,f),_=this.hn(l,c,h),g=this.Pn(l.indexId,u,p,d.inclusive,m,f.inclusive,_);return b.forEach(g,y=>i.j(y,n.limit).next(v=>{v.forEach(w=>{const E=O.fromSegments(w.documentKey);o.has(E)||(o=o.add(E),a.push(E))})}))}).next(()=>a)}return b.resolve(null)})}un(t){let n=this.an.get(t);return n||(t.filters.length===0?n=[t]:n=lF(mt.create(t.filters,"and")).map(i=>dy(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.an.set(t,n),n)}Pn(t,n,i,r,s,o,a){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const d=n?this.In(n[h/c]):Ou,f=this.Tn(t,d,i[h%c],r),p=this.En(t,d,s[h%c],o),m=a.map(_=>this.Tn(t,d,_,!0));u.push(...this.createRange(f,p,m))}return u}Tn(t,n,i,r){const s=new ts(t,O.empty(),n,i);return r?s:s.Ht()}En(t,n,i,r){const s=new ts(t,O.empty(),n,i);return r?s.Ht():s}cn(t,n){const i=new vE(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let o=null;for(const a of s)i.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,n){let i=2;const r=this.un(n);return b.forEach(r,s=>this.cn(t,s).next(o=>{o?i!==0&&o.fields.length<function(l){let c=new vt(Vt.comparator),u=!1;for(const h of l.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?u=!0:c=c.add(d.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&i===2?1:i)}dn(t,n){const i=new Pa;for(const r of Kr(t)){const s=n.data.field(r.fieldPath);if(s==null)return null;const o=i.jt(r.kind);Zr.St.ht(s,o)}return i.Ut()}In(t){const n=new Pa;return Zr.St.ht(t,n.jt(0)),n.Ut()}An(t,n){const i=new Pa;return Zr.St.ht(Ss(this.databaseId,n),i.jt(function(s){const o=Kr(s);return o.length===0?0:o[o.length-1].kind}(t))),i.Ut()}hn(t,n,i){if(i===null)return[];let r=[];r.push(new Pa);let s=0;for(const o of Kr(t)){const a=i[s++];for(const l of r)if(this.Rn(n,o.fieldPath)&&dc(a))r=this.Vn(r,o,a);else{const c=l.jt(o.kind);Zr.St.ht(a,c)}}return this.mn(r)}ln(t,n,i){return this.hn(t,n,i.position)}mn(t){const n=[];for(let i=0;i<t.length;++i)n[i]=t[i].Ut();return n}Vn(t,n,i){const r=[...t],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new Pa;l.seed(a.Ut()),Zr.St.ht(o,l.jt(n.kind)),s.push(l)}return s}Rn(t,n){return!!t.filters.find(i=>i instanceof it&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,n){const i=Ca(t),r=Xs(t);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(s=>{const o=[];return b.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const d=h?new lc(h.sequenceNumber,new fn(ks(h.readTime),new O(Jn(h.documentKey)),h.largestBatchId)):lc.empty(),f=u.fields.map(([p,m])=>new vh(Vt.fromServerFormat(p),m));return new jd(u.indexId,u.collectionGroup,f,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:X(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(t,n,i){const r=Ca(t),s=Xs(t);return this.fn(t).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>b.forEach(a,l=>s.put(pE(l.indexId,this.user,o,i)))))}updateIndexEntries(t,n){const i=new Map;return b.forEach(n,(r,s)=>{const o=i.get(r.collectionGroup);return(o?b.resolve(o):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),b.forEach(a,l=>this.gn(t,r,l).next(c=>{const u=this.pn(s,l);return c.isEqual(u)?b.resolve():this.yn(t,s,l,c,u)}))))})}wn(t,n,i,r){return Ys(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,n.key),documentKey:n.key.path.toArray()})}Sn(t,n,i,r){return Ys(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,n.key),n.key.path.toArray()])}gn(t,n,i){const r=Ys(t);let s=new vt(Li);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,n)])},(o,a)=>{s=s.add(new ts(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(t,n){let i=new vt(Li);const r=this.dn(n,t);if(r==null)return i;const s=oy(n);if(s!=null){const o=t.data.field(s.fieldPath);if(dc(o))for(const a of o.arrayValue.values||[])i=i.add(new ts(n.indexId,t.key,this.In(a),r))}else i=i.add(new ts(n.indexId,t.key,Ou,r));return i}yn(t,n,i,r,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,h,d){const f=l.getIterator(),p=c.getIterator();let m=Qs(f),_=Qs(p);for(;m||_;){let g=!1,y=!1;if(m&&_){const v=u(m,_);v<0?y=!0:v>0&&(g=!0)}else m!=null?y=!0:g=!0;g?(h(_),_=Qs(p)):y?(d(m),m=Qs(f)):(m=Qs(f),_=Qs(p))}}(r,s,Li,a=>{o.push(this.wn(t,n,i,a))},a=>{o.push(this.Sn(t,n,i,a))}),b.waitFor(o)}fn(t){let n=1;return Xs(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(t,n,i){i=i.sort((o,a)=>Li(o,a)).filter((o,a,l)=>!a||Li(o,l[a-1])!==0);const r=[];r.push(t);for(const o of i){const a=Li(o,t),l=Li(o,n);if(a===0)r[0]=t.Ht();else if(a>0&&l<0)r.push(o),r.push(o.Ht());else if(l>0)break}r.push(n);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];const a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Ou,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Ou,[]];s.push(IDBKeyRange.bound(a,l))}return s}bn(t,n){return Li(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(xE)}getMinOffset(t,n){return b.mapArray(this.un(n),i=>this.cn(t,i).next(r=>r||B())).next(xE)}}function EE(e){return fe(e,"collectionParents")}function Ys(e){return fe(e,"indexEntries")}function Ca(e){return fe(e,"indexConfiguration")}function Xs(e){return fe(e,"indexState")}function xE(e){W(e.length!==0);let t=e[0].indexState.offset,n=t.largestBatchId;for(let i=1;i<e.length;i++){const r=e[i].indexState.offset;P0(r,t)<0&&(t=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new fn(t.readTime,t.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qe{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new qe(t,qe.DEFAULT_COLLECTION_PERCENTILE,qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(e,t,n){const i=e.store("mutations"),r=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.Y({range:o},(u,h,d)=>(a++,d.delete()));s.push(l.next(()=>{W(a===1)}));const c=[];for(const u of n.mutations){const h=HA(t,u.key.path,n.batchId);s.push(r.delete(h)),c.push(u.key)}return b.waitFor(s).next(()=>c)}function Gd(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw B();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qe.DEFAULT_COLLECTION_PERCENTILE=10,qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qe.DEFAULT=new qe(41943040,qe.DEFAULT_COLLECTION_PERCENTILE,qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qe.DISABLED=new qe(-1,0,0);class np{constructor(t,n,i,r){this.userId=t,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(t,n,i,r){W(t.uid!=="");const s=t.isAuthenticated()?t.uid:"";return new np(s,n,i,r)}checkEmpty(t){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fi(t).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(t,n,i,r){const s=ao(t),o=Fi(t);return o.add({}).next(a=>{W(typeof a=="number");const l=new N0(a,n,i,r),c=function(f,p,m){const _=m.baseMutations.map(y=>mc(f.ut,y)),g=m.mutations.map(y=>mc(f.ut,y));return{userId:p,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:_,mutations:g}}(this.serializer,this.userId,l),u=[];let h=new vt((d,f)=>X(d.canonicalString(),f.canonicalString()));for(const d of r){const f=HA(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,JO))}return h.forEach(d=>{u.push(this.indexManager.addToCollectionParentIndex(t,d))}),t.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),b.waitFor(u).next(()=>l)})}lookupMutationBatch(t,n){return Fi(t).get(n).next(i=>i?(W(i.userId===this.userId),Jr(this.serializer,i)):null)}Cn(t,n){return this.Dn[n]?b.resolve(this.Dn[n]):this.lookupMutationBatch(t,n).next(i=>{if(i){const r=i.keys();return this.Dn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Fi(t).Y({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(W(a.batchId>=i),s=Jr(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Fi(t).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fi(t).W("userMutationsIndex",n).next(i=>i.map(r=>Jr(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,n){const i=wh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return ao(t).Y({range:r},(o,a,l)=>{const[c,u,h]=o,d=Jn(u);if(c===this.userId&&n.path.isEqual(d))return Fi(t).get(h).next(f=>{if(!f)throw B();W(f.userId===this.userId),s.push(Jr(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new vt(X);const r=[];return n.forEach(s=>{const o=wh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ao(t).Y({range:a},(c,u,h)=>{const[d,f,p]=c,m=Jn(f);d===this.userId&&s.path.isEqual(m)?i=i.add(p):h.done()});r.push(l)}),b.waitFor(r).next(()=>this.vn(t,i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1,s=wh(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new vt(X);return ao(t).Y({range:o},(l,c,u)=>{const[h,d,f]=l,p=Jn(d);h===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.vn(t,a))}vn(t,n){const i=[],r=[];return n.forEach(s=>{r.push(Fi(t).get(s).next(o=>{if(o===null)throw B();W(o.userId===this.userId),i.push(Jr(this.serializer,o))}))}),b.waitFor(r).next(()=>i)}removeMutationBatch(t,n){return jP(t.ae,this.userId,n).next(i=>(t.addOnCommittedListener(()=>{this.Fn(n.batchId)}),b.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Fn(t){delete this.Dn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(n=>{if(!n)return b.resolve();const i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return ao(t).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Jn(s[1]);r.push(l)}else a.done()}).next(()=>{W(r.length===0)})})}containsKey(t,n){return UP(t,this.userId,n)}Mn(t){return WP(t).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function UP(e,t,n){const i=wh(t,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return ao(e).Y({range:s,J:!0},(a,l,c)=>{const[u,h,d]=a;u===t&&h===r&&(o=!0),c.done()}).next(()=>o)}function Fi(e){return fe(e,"mutations")}function ao(e){return fe(e,"documentMutations")}function WP(e){return fe(e,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new Ds(0)}static Nn(){return new Ds(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.Bn(t).next(n=>{const i=new Ds(n.highestTargetId);return n.highestTargetId=i.next(),this.Ln(t,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(n=>U.fromTimestamp(new Ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(t,n,i){return this.Bn(t).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Ln(t,r)))}addTargetData(t,n){return this.kn(t,n).next(()=>this.Bn(t).next(i=>(i.targetCount+=1,this.qn(n,i),this.Ln(t,i))))}updateTargetData(t,n){return this.kn(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next(()=>Js(t).delete(n.targetId)).next(()=>this.Bn(t)).next(i=>(W(i.targetCount>0),i.targetCount-=1,this.Ln(t,i)))}removeTargets(t,n,i){let r=0;const s=[];return Js(t).Y((o,a)=>{const l=Qa(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(t,l)))}).next(()=>b.waitFor(s)).next(()=>r)}forEachTarget(t,n){return Js(t).Y((i,r)=>{const s=Qa(r);n(s)})}Bn(t){return IE(t).get("targetGlobalKey").next(n=>(W(n!==null),n))}Ln(t,n){return IE(t).put("targetGlobalKey",n)}kn(t,n){return Js(t).put(BP(this.serializer,n))}qn(t,n){let i=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,i=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Bn(t).next(n=>n.targetCount)}getTargetData(t,n){const i=As(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Js(t).Y({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=Qa(a);qc(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(t,n,i){const r=[],s=Hi(t);return n.forEach(o=>{const a=$e(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,o))}),b.waitFor(r)}removeMatchingKeys(t,n,i){const r=Hi(t);return b.forEach(n,s=>{const o=$e(s.path);return b.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,n){const i=Hi(t),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Hi(t);let s=Z();return r.Y({range:i,J:!0},(o,a,l)=>{const c=Jn(o[1]),u=new O(c);s=s.add(u)}).next(()=>s)}containsKey(t,n){const i=$e(n.path),r=IDBKeyRange.bound([i],[BA(i)],!1,!0);let s=0;return Hi(t).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}_t(t,n){return Js(t).get(n).next(i=>i?Qa(i):null)}}function Js(e){return fe(e,"targets")}function IE(e){return fe(e,"targetGlobal")}function Hi(e){return fe(e,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE([e,t],[n,i]){const r=X(e,n);return r===0?X(t,i):r}class dF{constructor(t){this.Qn=t,this.buffer=new vt(bE),this.Kn=0}$n(){return++this.Kn}Un(t){const n=[t,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();bE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fF{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(t){P("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nr(n)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Vr(n)}await this.Gn(3e5)})}}class pF{constructor(t,n){this.zn=t,this.params=n}calculateTargetCount(t,n){return this.zn.jn(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return b.resolve(Ye._e);const i=new dF(n);return this.zn.forEachTarget(t,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(t,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.zn.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),b.resolve(TE)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TE):this.Jn(t,n))}getCacheSize(t){return this.zn.getCacheSize(t)}Jn(t,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(t,r))).next(h=>(i=h,a=Date.now(),this.removeTargets(t,i,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(h=>(c=Date.now(),io()<=ot.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),b.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:h})))}}function gF(e,t){return new pF(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(t,n){this.db=t,this.garbageCollector=gF(this,n)}jn(t){const n=this.Yn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}Yn(t){let n=0;return this.Hn(t,i=>{n++}).next(()=>n)}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}Hn(t,n){return this.Zn(t,(i,r)=>n(r))}addReference(t,n,i){return Lu(t,i)}removeReference(t,n,i){return Lu(t,i)}removeTargets(t,n,i){return this.db.getTargetCache().removeTargets(t,n,i)}markPotentiallyOrphaned(t,n){return Lu(t,n)}Xn(t,n){return function(r,s){let o=!1;return WP(r).Z(a=>UP(r,a,s).next(l=>(l&&(o=!0),b.resolve(!l)))).next(()=>o)}(t,n)}removeOrphanedDocuments(t,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Zn(t,(o,a)=>{if(a<=n){const l=this.Xn(t,o).next(c=>{if(!c)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,U.min()),Hi(t).delete(function(h){return[0,$e(h.path)]}(o))))});r.push(l)}}).next(()=>b.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,n){return Lu(t,n)}Zn(t,n){const i=Hi(t);let r,s=Ye._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Ye._e&&n(new O(Jn(r)),s),s=c,r=l):s=Ye._e}).next(()=>{s!==Ye._e&&n(new O(Jn(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Lu(e,t){return Hi(e).put(function(i,r){return{targetId:0,path:$e(i.path),sequenceNumber:r}}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.changes=new Or(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Pt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?b.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,i){return Br(t).put(i)}removeEntry(t,n,i){return Br(t).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qd(o),a[a.length-1]]}(n,i))}updateMetadata(t,n){return this.getMetadata(t).next(i=>(i.byteSize+=n,this.er(t,i)))}getEntry(t,n){let i=Pt.newInvalidDocument(n);return Br(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ra(n))},(r,s)=>{i=this.tr(n,s)}).next(()=>i)}nr(t,n){let i={size:0,document:Pt.newInvalidDocument(n)};return Br(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ra(n))},(r,s)=>{i={document:this.tr(n,s),size:Gd(s)}}).next(()=>i)}getEntries(t,n){let i=Je();return this.rr(t,n,(r,s)=>{const o=this.tr(r,s);i=i.insert(r,o)}).next(()=>i)}ir(t,n){let i=Je(),r=new xt(O.comparator);return this.rr(t,n,(s,o)=>{const a=this.tr(s,o);i=i.insert(s,a),r=r.insert(s,Gd(o))}).next(()=>({documents:i,sr:r}))}rr(t,n,i){if(n.isEmpty())return b.resolve();let r=new vt(PE);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Ra(r.first()),Ra(r.last())),o=r.getIterator();let a=o.getNext();return Br(t).Y({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=O.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&PE(a,h)<0;)i(a,null),a=o.getNext();a&&a.isEqual(h)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.U(Ra(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,n,i,r,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),qd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Br(t).W(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=Je();for(const h of c){const d=this.tr(O.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(Gc(n,d)||r.has(d.key))&&(u=u.insert(d.key,d))}return u})}getAllFromCollectionGroup(t,n,i,r){let s=Je();const o=AE(n,i),a=AE(n,fn.max());return Br(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.tr(O.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(t){return new _F(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(n=>n.byteSize)}getMetadata(t){return SE(t).get("remoteDocumentGlobalKey").next(n=>(W(!!n),n))}er(t,n){return SE(t).put("remoteDocumentGlobalKey",n)}tr(t,n){if(n){const i=nF(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(U.min())))return i}return Pt.newInvalidDocument(t)}}function qP(e){return new yF(e)}class _F extends HP{constructor(t,n){super(),this._r=t,this.trackRemovals=n,this.ar=new Or(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const n=[];let i=0,r=new vt((s,o)=>X(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(t,s,a.readTime)),o.isValidDocument()){const l=dE(this._r.serializer,o);r=r.add(s.path.popLast());const c=Gd(l);i+=c-a.size,n.push(this._r.addEntry(t,s,l))}else if(i-=a.size,this.trackRemovals){const l=dE(this._r.serializer,o.convertToNoDocument(U.min()));n.push(this._r.addEntry(t,s,l))}}),r.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(t,s))}),n.push(this._r.updateMetadata(t,i)),b.waitFor(n)}getFromCache(t,n){return this._r.nr(t,n).next(i=>(this.ar.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,n){return this._r.ir(t,n).next(({documents:i,sr:r})=>(r.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function SE(e){return fe(e,"remoteDocumentGlobal")}function Br(e){return fe(e,"remoteDocumentsV14")}function Ra(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function AE(e,t){const n=t.documentKey.path.toArray();return[e,qd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function PE(e,t){const n=e.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=X(n[s],i[s]),r)return r;return r=X(n.length,i.length),r||(r=X(n[n.length-2],i[i.length-2]),r||X(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&_l(i.mutation,r,Xe.empty(),Ot.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Z()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Z()){const r=Zn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=Ka();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Zn();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Z()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=Je();const o=yl(),a=function(){return yl()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Mi)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),_l(u.mutation,c,u.mutation.getFieldMask(),Ot.now())):o.set(c.key,Xe.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new vF(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const i=yl();let r=new xt((o,a)=>o-a),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Xe.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(r.get(a.batchId)||Z()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=dP();u.forEach(d=>{if(!s.has(d)){const f=wP(n.get(d),i.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return b.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return O.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):D0(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):b.resolve(Zn());let a=-1,l=s;return o.next(c=>b.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?b.resolve():this.remoteDocumentCache.getEntry(t,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,Z())).next(u=>({batchId:a,changes:hP(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new O(n)).next(i=>{let r=Ka();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=Ka();return this.indexManager.getCollectionParents(t,s).next(a=>b.forEach(a,l=>{const c=function(h,d){return new Di(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Pt.newInvalidDocument(u)))});let a=Ka();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&_l(u.mutation,c,Xe.empty(),Ot.now()),Gc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return b.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Yt(r.createTime)}}(n)),b.resolve()}getNamedQuery(t,n){return b.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(r){return{name:r.name,query:$0(r.bundledQuery),readTime:Yt(r.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.overlays=new xt(O.comparator),this.lr=new Map}getOverlay(t,n){return b.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Zn();return b.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.lt(t,n,s)}),b.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),b.resolve()}getOverlaysForCollection(t,n,i){const r=Zn(),s=n.length+1,o=new O(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return b.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new xt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Zn(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Zn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return b.resolve(a)}lt(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new L0(n,i));let s=this.lr.get(n);s===void 0&&(s=Z(),this.lr.set(n,s)),this.lr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.hr=new vt(re.Pr),this.Ir=new vt(re.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const i=new re(t,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.dr(new re(t,n))}Ar(t,n){t.forEach(i=>this.removeReference(i,n))}Rr(t){const n=new O(new ct([])),i=new re(n,t),r=new re(n,t+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new O(new ct([])),i=new re(n,t),r=new re(n,t+1);let s=Z();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new re(t,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class re{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return O.comparator(t.key,n.key)||X(t.gr,n.gr)}static Tr(t,n){return X(t.gr,n.gr)||O.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new vt(re.Pr)}checkEmpty(t){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new N0(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.yr=this.yr.add(new re(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(t,n){return b.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.Sr(i),s=r<0?0:r;return b.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new re(n,0),r=new re(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{const a=this.wr(o.gr);s.push(a)}),b.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new vt(X);return n.forEach(r=>{const s=new re(r,0),o=new re(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),b.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;O.isDocumentKey(s)||(s=s.child(""));const o=new re(new O(s),0);let a=new vt(X);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},o),b.resolve(this.br(a))}br(t){const n=[];return t.forEach(i=>{const r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){W(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return b.forEach(n.mutations,r=>{const s=new re(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.yr=i})}Fn(t){}containsKey(t,n){const i=new re(n,0),r=this.yr.firstAfterOrEqual(i);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,b.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(t){this.Cr=t,this.docs=function(){return new xt(O.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return b.resolve(i?i.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(t,n){let i=Je();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Pt.newInvalidDocument(r))}),b.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Je();const o=n.path,a=new O(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||P0(zA(u),i)<=0||(r.has(u.key)||Gc(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return b.resolve(s)}getAllFromCollectionGroup(t,n,i,r){B()}vr(t,n){return b.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new IF(this)}getSize(t){return b.resolve(this.size)}}class IF extends HP{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(t,r)):this._r.removeEntry(i)}),b.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(t){this.persistence=t,this.Fr=new Or(n=>As(n),qc),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Mr=0,this.Or=new U0,this.targetCount=0,this.Nr=Ds.On()}forEachTarget(t,n){return this.Fr.forEach((i,r)=>n(r)),b.resolve()}getLastRemoteSnapshotVersion(t){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return b.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),b.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new Ds(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,b.resolve()}updateTargetData(t,n){return this.kn(n),b.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),b.waitFor(s).next(()=>r)}getTargetCount(t){return b.resolve(this.targetCount)}getTargetData(t,n){const i=this.Fr.get(n)||null;return b.resolve(i)}addMatchingKeys(t,n,i){return this.Or.Er(n,i),b.resolve()}removeMatchingKeys(t,n,i){this.Or.Ar(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),b.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),b.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Or.mr(n);return b.resolve(i)}containsKey(t,n){return b.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(t,n){this.Br={},this.overlays={},this.Lr=new Ye(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new bF(this),this.indexManager=new cF,this.remoteDocumentCache=function(r){return new TF(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new FP(n),this.Kr=new wF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new EF,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Br[t.toKey()];return i||(i=new xF(n,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,i){P("MemoryPersistence","Starting transaction:",t);const r=new SF(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(t,n){return b.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,n)))}}class SF extends UA{constructor(t){super(),this.currentSequenceNumber=t}}class ip{constructor(t){this.persistence=t,this.Gr=new U0,this.zr=null}static jr(t){return new ip(t)}get Hr(){if(this.zr)return this.zr;throw B()}addReference(t,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),b.resolve()}removeReference(t,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),b.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),b.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Hr,i=>{const r=O.fromPath(i);return this.Jr(t,r).next(s=>{s||n.removeEntry(r,U.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return b.or([()=>b.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(t){this.serializer=t}N(t,n,i,r){const s=new Xf("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(t),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U1,{unique:!0}),l.createObjectStore("documentMutations")}(t),CE(t),function(l){l.createObjectStore("remoteDocuments")}(t));let o=b.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),CE(t)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:U.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U1,{unique:!0});const h=c.store("mutations"),d=u.map(f=>h.put(f));return b.waitFor(d)})}(t,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&r>=5&&(o=o.next(()=>this.Zr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.Xr(s)))),i<7&&r>=7&&(o=o.next(()=>this.ei(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(t,s))),i<9&&r>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&r>=10&&(o=o.next(()=>this.ni(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:uL});c.createIndex("collectionPathOverlayIndex",hL,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",dL,{unique:!1})})(t)})),i<13&&r>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:ZO});c.createIndex("documentKeyIndex",tL),c.createIndex("collectionGroupIndex",eL)}(t)).next(()=>this.ri(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ii(t,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:oL}).createIndex("sequenceNumberIndex",aL,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:lL}).createIndex("documentKeyIndex",cL,{unique:!1})}(t))),o}Xr(t){let n=0;return t.store("remoteDocuments").Y((i,r)=>{n+=Gd(r)}).next(()=>{const i={byteSize:n};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(t){const n=t.store("mutationQueues"),i=t.store("mutations");return n.W().next(r=>b.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>b.forEach(a,l=>{W(l.userId===s.userId);const c=Jr(this.serializer,l);return jP(t,s.userId,c).next(()=>{})}))}))}ei(t){const n=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Y((o,a)=>{const l=new ct(o),c=function(h){return[0,$e(h)]}(l);s.push(n.get(c).next(u=>u?b.resolve():(h=>n.put({targetId:0,path:$e(h),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>b.waitFor(s))})}ti(t,n){t.createObjectStore("collectionParents",{keyPath:sL});const i=n.store("collectionParents"),r=new j0,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:$e(l)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new ct(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,l],c)=>{const u=Jn(a);return s(u.popLast())}))}ni(t){const n=t.store("targets");return n.Y((i,r)=>{const s=Qa(r),o=BP(this.serializer,s);return n.put(o)})}ri(t,n){const i=n.store("remoteDocuments"),r=[];return i.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new O(ct.fromString(h.document.name).popFirst(5)):h.noDocument?O.fromSegments(h.noDocument.path):h.unknownDocument?O.fromSegments(h.unknownDocument.path):B()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(c))}).next(()=>b.waitFor(r))}ii(t,n){const i=n.store("mutations"),r=qP(this.serializer),s=new GP(ip.jr,this.serializer.ut);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:Z();Jr(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),b.forEach(a,(l,c)=>{const u=new oe(c),h=ep.ct(this.serializer,u),d=s.getIndexManager(u),f=np.ct(u,this.serializer,d,s.referenceDelegate);return new KP(r,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new ay(n,Ye._e),l).next()})})}}function CE(e){e.createObjectStore("targetDocuments",{keyPath:iL}).createIndex("documentTargetsIndex",rL,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nL,{unique:!0}),e.createObjectStore("targetGlobal")}const _g="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class W0{constructor(t,n,i,r,s,o,a,l,c,u,h=15){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=i,this.si=s,this.window=o,this.document=a,this.oi=c,this._i=u,this.ai=h,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=d=>Promise.resolve(),!W0.D())throw new A(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mF(this,r),this.Ii=n+"main",this.serializer=new FP(l),this.Ti=new Dn(this.Ii,this.ai,new AF(this.serializer)),this.qr=new hF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qP(this.serializer),this.Kr=new iF,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,u===!1&&Gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new A(S.FAILED_PRECONDITION,_g);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.qr.getHighestSequenceNumber(t))}).then(t=>{this.Lr=new Ye(t,this.oi)}).then(()=>{this.kr=!0}).catch(t=>(this.Ti&&this.Ti.close(),Promise.reject(t)))}mi(t){return this.Pi=async n=>{if(this.started)return t(n)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ti.L(async n=>{n.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.si.enqueueAndForget(async()=>{this.started&&await this.di()}))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Fu(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(t)).next(n=>this.isPrimary&&!n?this.pi(t).next(()=>!1):!!n&&this.yi(t).next(()=>!0))).catch(t=>{if(Nr(t))return P("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.si.enqueueRetryable(()=>this.Pi(t)),this.isPrimary=t})}fi(t){return ka(t).get("owner").next(n=>b.resolve(this.wi(n)))}Si(t){return Fu(t).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=fe(n,"clientMetadata");return i.W().next(r=>{const s=this.Ci(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return b.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(const n of t)this.Ei.removeItem(this.vi(n.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(t){return!!t&&t.ownerId===this.clientId}gi(t){return this._i?b.resolve(!0):ka(t).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new A(S.FAILED_PRECONDITION,_g);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fu(t).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&P("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const n=new ay(t,Ye._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()}Ci(t,n){return t.filter(i=>this.Di(i.updateTimeMs,n)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>Fu(t).W().next(n=>this.Ci(n,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(t,n){return np.ct(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new uF(t,this.serializer.ut.databaseId)}getDocumentOverlayCache(t){return ep.ct(this.serializer,t)}getBundleCache(){return this.Kr}runTransaction(t,n,i){P("IndexedDbPersistence","Starting transaction:",t);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?pL:l===14?GA:l===13?KA:l===12?fL:l===11?qA:void B()}(this.ai);let o;return this.Ti.runTransaction(t,r,s,a=>(o=new ay(a,this.Lr?this.Lr.next():Ye._e),n==="readwrite-primary"?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw Gt(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new A(S.FAILED_PRECONDITION,jA);return i(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(t){return ka(t).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new A(S.FAILED_PRECONDITION,_g)})}yi(t){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ka(t).put("owner",n)}static D(){return Dn.D()}pi(t){const n=ka(t);return n.get("owner").next(i=>this.wi(i)?(P("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):b.resolve())}Di(t,n){const i=Date.now();return!(t<i-n)&&(!(t>i)||(Gt(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;nV()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(t){var n;try{const i=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(t)))!==null;return P("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Gt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(t){Gt("Failed to set zombie client id.",t)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ka(e){return fe(e,"owner")}function Fu(e){return fe(e,"clientMetadata")}function H0(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.ki=i,this.qi=r}static Qi(t,n){let i=Z(),r=Z();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new q0(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.zi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PF;return this.Hi(t,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>s.result)}Ji(t,n,i,r){return i.documentReadCount<this.Ui?(io()<=ot.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),b.resolve()):(io()<=ot.DEBUG&&P("QueryEngine","Query:",ro(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(io()<=ot.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ze(n))):b.resolve())}zi(t,n){if(eE(n))return b.resolve(null);let i=ze(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Hd(n,null,"F"),i=ze(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=Z(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(t,Hd(n,null,"F")):this.Xi(t,c,n,l)}))})))}ji(t,n,i,r){return eE(n)||r.isEqual(U.min())?b.resolve(null):this.Gi.getDocuments(t,i).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,i,r)?b.resolve(null):(io()<=ot.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ro(n)),this.Xi(t,o,n,$A(r,-1)).next(a=>a))})}Yi(t,n){let i=new vt(cP(t));return n.forEach((r,s)=>{Gc(t,s)&&(i=i.add(s))}),i}Zi(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(t,n,i){return io()<=ot.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",ro(n)),this.Gi.getDocumentsMatchingQuery(t,n,fn.min(),i)}Xi(t,n,i,r){return this.Gi.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(t,n,i,r){this.persistence=t,this.es=n,this.serializer=r,this.ts=new xt(X),this.ns=new Or(s=>As(s),qc),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(i)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new KP(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function YP(e,t,n,i){return new CF(e,t,n,i)}async function XP(e,t){const n=L(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.os(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Z();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function RF(e,t){const n=L(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=b.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const _=c.docVersions.get(p);W(_!==null),m.version.compareTo(_)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Z();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function JP(e){const t=L(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function kF(e,t){const n=L(e),i=t.snapshotVersion;let r=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});r=n.ts;const a=[];t.targetChanges.forEach((u,h)=>{const d=r.get(h);if(!d)return;a.push(n.qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?f=f.withResumeToken(ie.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(h,f),function(m,_,g){return m.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(d,f,u)&&a.push(n.qr.updateTargetData(s,f))});let l=Je(),c=Z();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(ZP(s,o,t.documentUpdates).next(u=>{l=u.us,c=u.cs})),!i.isEqual(U.min())){const u=n.qr.getLastRemoteSnapshotVersion(s).next(h=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return b.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ts=r,s))}function ZP(e,t,n){let i=Z(),r=Z();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=Je();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(U.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:r}})}function DF(e,t){const n=L(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Qo(e,t){const n=L(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.qr.getTargetData(i,t).next(s=>s?(r=s,b.resolve(r)):n.qr.allocateTargetId(i).next(o=>(r=new _i(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(i.targetId,i),n.ns.set(t,i.targetId)),i})}async function Yo(e,t,n){const i=L(e),r=i.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Nr(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ts=i.ts.remove(t),i.ns.delete(r.target)}function Qd(e,t,n){const i=L(e);let r=U.min(),s=Z();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=L(l),d=h.ns.get(u);return d!==void 0?b.resolve(h.ts.get(d)):h.qr.getTargetData(c,u)}(i,o,ze(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.es.getDocumentsMatchingQuery(o,t,n?r:U.min(),n?s:Z())).next(a=>(nC(i,lP(t),a),{documents:a,ls:s})))}function tC(e,t){const n=L(e),i=L(n.qr),r=n.ts.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i._t(s,t).next(o=>o?o.target:null))}function eC(e,t){const n=L(e),i=n.rs.get(t)||U.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.ss.getAllFromCollectionGroup(r,t,$A(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(nC(n,t,r),r))}function nC(e,t,n){let i=e.rs.get(t)||U.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.rs.set(t,i)}async function MF(e,t,n,i){const r=L(e);let s=Z(),o=Je();for(const c of n){const u=t.hs(c.metadata.name);c.document&&(s=s.add(u));const h=t.Ps(c);h.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(u,h)}const a=r.ss.newChangeBuffer({trackRemovals:!0}),l=await Qo(r,function(u){return ze(ua(ct.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>ZP(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.qr.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.us,u.cs)).next(()=>u.us)))}async function VF(e,t,n=Z()){const i=await Qo(e,ze($0(t.bundledQuery))),r=L(e);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=Yt(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Kr.saveNamedQuery(s,t);const a=i.withResumeToken(ie.EMPTY_BYTE_STRING,o);return r.ts=r.ts.insert(a.targetId,a),r.qr.updateTargetData(s,a).next(()=>r.qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.qr.addMatchingKeys(s,n,i.targetId)).next(()=>r.Kr.saveNamedQuery(s,t))})}function RE(e,t){return`firestore_clients_${e}_${t}`}function kE(e,t,n){let i=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function vg(e,t){return`firestore_targets_${e}_${t}`}class Yd{constructor(t,n,i,r){this.user=t,this.batchId=n,this.state=i,this.error=r}static Ts(t,n,i){const r=JSON.parse(i);let s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new A(r.error.code,r.error.message))),o?new Yd(t,n,r.state,s):(Gt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Es(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class vl{constructor(t,n,i){this.targetId=t,this.state=n,this.error=i}static Ts(t,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new A(i.error.code,i.error.message))),s?new vl(t,i.state,r):(Gt("SharedClientState",`Failed to parse target state for ID '${t}': ${n}`),null)}Es(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Xd{constructor(t,n){this.clientId=t,this.activeTargetIds=n}static Ts(t,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=M0();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=WA(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new Xd(t,s):(Gt("SharedClientState",`Failed to parse client data for instance '${t}': ${n}`),null)}}class K0{constructor(t,n){this.clientId=t,this.onlineState=n}static Ts(t){const n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new K0(n.clientId,n.onlineState):(Gt("SharedClientState",`Failed to parse online state: ${t}`),null)}}class wy{constructor(){this.activeTargetIds=M0()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wg{constructor(t,n,i,r,s){this.window=t,this.si=n,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new xt(X),this.started=!1,this.ps=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=RE(this.persistenceKey,this.Rs),this.ws=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new wy),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Bi();for(const i of t){if(i===this.Rs)continue;const r=this.getItem(RE(this.persistenceKey,i));if(r){const s=Xd.Ts(i,r);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();const n=this.storage.getItem(this.Cs);if(n){const i=this.Ms(n);i&&this.xs(i)}for(const i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.ws,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(t){let n=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(t)&&(n=!0)}),n}addPendingMutation(t){this.Ns(t,"pending")}updateMutationState(t,n,i){this.Ns(t,n,i),this.Bs(t)}addLocalQueryTarget(t){let n="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(vg(this.persistenceKey,t));if(i){const r=vl.Ts(t,i);r&&(n=r.state)}}return this.Ls.ds(t),this.Fs(),n}removeLocalQueryTarget(t){this.Ls.As(t),this.Fs()}isLocalQueryTarget(t){return this.Ls.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(vg(this.persistenceKey,t))}updateQueryState(t,n,i){this.ks(t,n,i)}handleUserChange(t,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.qs(t)}notifyBundleLoaded(t){this.Qs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(t){const n=this.storage.getItem(t);return P("SharedClientState","READ",t,n),n}setItem(t,n){P("SharedClientState","SET",t,n),this.storage.setItem(t,n)}removeItem(t){P("SharedClientState","REMOVE",t),this.storage.removeItem(t)}fs(t){const n=t;if(n.storageArea===this.storage){if(P("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){const i=this.Ks(n.key);return this.$s(i,null)}{const i=this.Us(n.key,n.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(n.key)){if(n.newValue!==null){const i=this.Ws(n.key,n.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const i=this.zs(n.key,n.newValue);if(i)return this.js(i)}}else if(n.key===this.Cs){if(n.newValue!==null){const i=this.Ms(n.newValue);if(i)return this.xs(i)}}else if(n.key===this.ws){const i=function(s){let o=Ye._e;if(s!=null)try{const a=JSON.parse(s);W(typeof a=="number"),o=a}catch(a){Gt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);i!==Ye._e&&this.sequenceNumberHandler(i)}else if(n.key===this.vs){const i=this.Hs(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(n)})}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(t,n,i){const r=new Yd(this.currentUser,t,n,i),s=kE(this.persistenceKey,this.currentUser,t);this.setItem(s,r.Es())}Bs(t){const n=kE(this.persistenceKey,this.currentUser,t);this.removeItem(n)}qs(t){const n={clientId:this.Rs,onlineState:t};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(t,n,i){const r=vg(this.persistenceKey,t),s=new vl(t,n,i);this.setItem(r,s.Es())}Qs(t){const n=JSON.stringify(Array.from(t));this.setItem(this.vs,n)}Ks(t){const n=this.Ss.exec(t);return n?n[1]:null}Us(t,n){const i=this.Ks(t);return Xd.Ts(i,n)}Ws(t,n){const i=this.bs.exec(t),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Yd.Ts(new oe(s),r,n)}zs(t,n){const i=this.Ds.exec(t),r=Number(i[1]);return vl.Ts(r,n)}Ms(t){return K0.Ts(t)}Hs(t){return JSON.parse(t)}async Gs(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Ys(t.batchId,t.state,t.error);P("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}js(t){return this.syncEngine.Zs(t.targetId,t.state,t.error)}$s(t,n){const i=n?this.gs.insert(t,n):this.gs.remove(t),r=this.Os(this.gs),s=this.Os(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=i})}xs(t){this.gs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Os(t){let n=M0();return t.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class iC{constructor(){this.eo=new wy,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,i){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new wy,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function Eg(){return Bu===null?Bu=function(){return 268435456+Math.round(2147483648*Math.random())}():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be="WebChannelConnection";class FF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+n.host,this.fo=`projects/${r}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(n,i,r,s,o){const a=Eg(),l=this.So(n,i);P("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,s,o),this.Do(n,l,c,r).then(u=>(P("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw $n("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Co(n,i,r,s,o,a){return this.wo(n,i,r,s,o)}bo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}So(n,i){const r=OF[n];return`${this.mo}/v1/${i}:${r}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,i,r){const s=Eg();return new Promise((o,a)=>{const l=new VO;l.setWithCredentials(!0),l.listenOnce(kO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case mg.NO_ERROR:const u=l.getResponseJson();P(be,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case mg.TIMEOUT:P(be,`RPC '${t}' ${s} timed out`),a(new A(S.DEADLINE_EXCEEDED,"Request time out"));break;case mg.HTTP_ERROR:const h=l.getStatus();if(P(be,`RPC '${t}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(_){const g=_.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(g)>=0?g:S.UNKNOWN}(f.status);a(new A(p,f.message))}else a(new A(S.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new A(S.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{P(be,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);P(be,`RPC '${t}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}vo(t,n,i){const r=Eg(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=CO(),a=RO(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new MO({})),this.bo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");P(be,`Creating RPC '${t}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new LF({co:_=>{f?P(be,`Not sending because RPC '${t}' stream ${r} is closed:`,_):(d||(P(be,`Opening RPC '${t}' stream ${r} transport.`),h.open(),d=!0),P(be,`RPC '${t}' stream ${r} sending:`,_),h.send(_))},lo:()=>h.close()}),m=(_,g,y)=>{_.listen(g,v=>{try{y(v)}catch(w){setTimeout(()=>{throw w},0)}})};return m(h,Vu.EventType.OPEN,()=>{f||P(be,`RPC '${t}' stream ${r} transport opened.`)}),m(h,Vu.EventType.CLOSE,()=>{f||(f=!0,P(be,`RPC '${t}' stream ${r} transport closed`),p.Ro())}),m(h,Vu.EventType.ERROR,_=>{f||(f=!0,$n(be,`RPC '${t}' stream ${r} transport errored:`,_),p.Ro(new A(S.UNAVAILABLE,"The operation could not be completed")))}),m(h,Vu.EventType.MESSAGE,_=>{var g;if(!f){const y=_.data[0];W(!!y);const v=y,w=v.error||((g=v[0])===null||g===void 0?void 0:g.error);if(w){P(be,`RPC '${t}' stream ${r} received error:`,w);const E=w.status;let x=function(k){const M=Xt[k];if(M!==void 0)return TP(M)}(E),T=w.message;x===void 0&&(x=S.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),f=!0,p.Ro(new A(x,T)),h.close()}else P(be,`RPC '${t}' stream ${r} received:`,y),p.Vo(y)}}),m(a,DO.STAT_EVENT,_=>{_.stat===B1.PROXY?P(be,`RPC '${t}' stream ${r} detected buffering proxy`):_.stat===B1.NOPROXY&&P(be,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){return typeof window<"u"?window:null}function bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(e){return new qL(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t,n,i=1e3,r=1.5,s=6e4){this.si=t,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&P("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(t,n,i,r,s,o,a,l){this.si=t,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new G0(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===S.RESOURCE_EXHAUSTED?(Gt(n.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===n&&this.s_(i,r)},i=>{t(()=>{const r=new A(S.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(t,n){const i=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return P("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BF extends sC{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=QL(this.serializer,t),i=function(s){if(!("targetChange"in s))return U.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?U.min():o.readTime?Yt(o.readTime):U.min()}(t);return this.listener.a_(n,i)}u_(t){const n={};n.database=gc(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ud(l)?{documents:DP(s,l)}:{query:MP(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AP(s,o.resumeToken);const c=py(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(U.min())>0){a.readTime=Go(s,o.snapshotVersion.toTimestamp());const c=py(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=XL(this.serializer,t);i&&(n.labels=i),this.e_(n)}c_(t){const n={};n.database=gc(this.serializer),n.removeTarget=t,this.e_(n)}}class $F extends sC{constructor(t,n,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(W(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=YL(t.writeResults,t.commitTime),i=Yt(t.commitTime);return this.listener.I_(i,n)}return W(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=gc(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>mc(this.serializer,i))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF extends class{}{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new A(S.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(t,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new A(S.UNKNOWN,r.toString())})}Co(t,n,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,n,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(S.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class jF{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Gt(n),this.f_=!1):P("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{i.enqueueAndForget(async()=>{Lr(this)&&(P("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=L(l);c.C_.add(4),await fa(c),c.M_.set("Unknown"),c.C_.delete(4),await Zc(c)}(this))})}),this.M_=new jF(i,r)}}async function Zc(e){if(Lr(e))for(const t of e.v_)await t(!0)}async function fa(e){for(const t of e.v_)await t(!1)}function rp(e,t){const n=L(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),X0(n)?Y0(n):ga(n).Ho()&&Q0(n,t))}function yc(e,t){const n=L(e),i=ga(n);n.D_.delete(t),i.Ho()&&oC(n,t),n.D_.size===0&&(i.Ho()?i.Zo():Lr(n)&&n.M_.set("Unknown"))}function Q0(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(U.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ga(e).u_(t)}function oC(e,t){e.x_.Oe(t),ga(e).c_(t)}function Y0(e){e.x_=new jL({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),ga(e).start(),e.M_.g_()}function X0(e){return Lr(e)&&!ga(e).jo()&&e.D_.size>0}function Lr(e){return L(e).C_.size===0}function aC(e){e.x_=void 0}async function WF(e){e.D_.forEach((t,n)=>{Q0(e,t)})}async function HF(e,t){aC(e),X0(e)?(e.M_.w_(t),Y0(e)):e.M_.set("Unknown")}async function qF(e,t,n){if(e.M_.set("Online"),t instanceof SP&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.D_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.D_.delete(a),r.x_.removeTarget(a))}(e,t)}catch(i){P("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Jd(e,i)}else if(t instanceof Ih?e.x_.$e(t):t instanceof bP?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(U.min()))try{const i=await JP(e.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.D_.get(c);u&&s.D_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.D_.get(l);if(!u)return;s.D_.set(l,u.withResumeToken(ie.EMPTY_BYTE_STRING,u.snapshotVersion)),oC(s,l);const h=new _i(u.target,l,c,u.sequenceNumber);Q0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){P("RemoteStore","Failed to raise snapshot:",i),await Jd(e,i)}}async function Jd(e,t,n){if(!Nr(t))throw t;e.C_.add(1),await fa(e),e.M_.set("Offline"),n||(n=()=>JP(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{P("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Zc(e)})}function lC(e,t){return t().catch(n=>Jd(e,n,t))}async function pa(e){const t=L(e),n=Ir(t);let i=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;KF(t);)try{const r=await DF(t.localStore,i);if(r===null){t.b_.length===0&&n.Zo();break}i=r.batchId,GF(t,r)}catch(r){await Jd(t,r)}cC(t)&&uC(t)}function KF(e){return Lr(e)&&e.b_.length<10}function GF(e,t){e.b_.push(t);const n=Ir(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function cC(e){return Lr(e)&&!Ir(e).jo()&&e.b_.length>0}function uC(e){Ir(e).start()}async function QF(e){Ir(e).E_()}async function YF(e){const t=Ir(e);for(const n of e.b_)t.P_(n.mutations)}async function XF(e,t,n){const i=e.b_.shift(),r=O0.from(i,t,n);await lC(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await pa(e)}async function JF(e,t){t&&Ir(e).h_&&await async function(i,r){if(function(o){return xP(o)&&o!==S.ABORTED}(r.code)){const s=i.b_.shift();Ir(i).Yo(),await lC(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await pa(i)}}(e,t),cC(e)&&uC(e)}async function ME(e,t){const n=L(e);n.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");const i=Lr(n);n.C_.add(3),await fa(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Zc(n)}async function Ey(e,t){const n=L(e);t?(n.C_.delete(2),await Zc(n)):t||(n.C_.add(2),await fa(n),n.M_.set("Unknown"))}function ga(e){return e.O_||(e.O_=function(n,i,r){const s=L(n);return s.A_(),new BF(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{ho:WF.bind(null,e),Io:HF.bind(null,e),a_:qF.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),X0(e)?Y0(e):e.M_.set("Unknown")):(await e.O_.stop(),aC(e))})),e.O_}function Ir(e){return e.N_||(e.N_=function(n,i,r){const s=L(n);return s.A_(),new $F(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{ho:QF.bind(null,e),Io:JF.bind(null,e),T_:YF.bind(null,e),I_:XF.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await pa(e)):(await e.N_.stop(),e.b_.length>0&&(P("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ce,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new J0(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new A(S.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ma(e,t){if(Gt("AsyncQueue",`${t}: ${e}`),Nr(e))return new A(S.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t){this.comparator=t?(n,i)=>t(n,i)||O.comparator(n.key,i.key):(n,i)=>O.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new xt(this.comparator)}static emptySet(t){return new Do(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Do;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.B_=new xt(O.comparator)}track(t){const n=t.doc.key,i=this.B_.get(n);i?t.type!==0&&i.type===3?this.B_=this.B_.insert(n,t):t.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.B_=this.B_.remove(n):t.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):B():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Xo{constructor(t,n,i,r,s,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xo(t,n,Do.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Kc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(){this.k_=void 0,this.listeners=[]}}class tB{constructor(){this.queries=new Or(t=>aP(t),Kc),this.onlineState="Unknown",this.q_=new Set}}async function Z0(e,t){const n=L(e),i=t.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new ZF),r)try{s.k_=await n.onListen(i)}catch(o){const a=ma(o,`Initialization of query '${ro(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&ev(n)}async function tv(e,t){const n=L(e),i=t.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function eB(e,t){const n=L(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(r)&&(i=!0);o.k_=r}}i&&ev(n)}function nB(e,t,n){const i=L(e),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(t)}function ev(e){e.q_.forEach(t=>{t.next()})}class nv{constructor(t,n,i){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new Xo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const i=n!=="Offline";return(!this.options.J_||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=Xo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(t,n){this.Y_=t,this.byteLength=n}Z_(){return"metadata"in this.Y_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t){this.serializer=t}hs(t){return ni(this.serializer,t)}Ps(t){return t.metadata.exists?kP(this.serializer,t.document,!1):Pt.newNoDocument(this.hs(t.metadata.name),this.Is(t.metadata.readTime))}Is(t){return Yt(t)}}class rB{constructor(t,n,i){this.X_=t,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hC(t)}ea(t){this.progress.bytesLoaded+=t.byteLength;let n=this.progress.documentsLoaded;if(t.Y_.namedQuery)this.queries.push(t.Y_.namedQuery);else if(t.Y_.documentMetadata){this.documents.push({metadata:t.Y_.documentMetadata}),t.Y_.documentMetadata.exists||++n;const i=ct.fromString(t.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Y_.document&&(this.documents[this.documents.length-1].document=t.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(t){const n=new Map,i=new NE(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.hs(r.metadata.name);for(const o of r.metadata.queries){const a=(n.get(o)||Z()).add(s);n.set(o,a)}}return n}async complete(){const t=await MF(this.localStore,new NE(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(const i of this.queries)await VF(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:t}}}function hC(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t){this.key=t}}class fC{constructor(t){this.key=t}}class pC{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Z(),this.mutatedKeys=Z(),this._a=cP(t),this.aa=new Do(this._a)}get ua(){return this.ia}ca(t,n){const i=n?n.la:new VE,r=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,h)=>{const d=r.get(u),f=Gc(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(i.track({type:3,doc:f}),_=!0):this.ha(d,f)||(i.track({type:2,doc:f}),_=!0,(l&&this._a(f,l)>0||c&&this._a(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),_=!0):d&&!f&&(i.track({type:1,doc:d}),_=!0,(l||c)&&(a=!0)),_&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{aa:o,la:i,Zi:a,mutatedKeys:s}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i){const r=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const s=t.la.L_();s.sort((c,u)=>function(d,f){const p=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return p(d)-p(f)}(c.type,u.type)||this._a(c.doc,u.doc)),this.Pa(i);const o=n?this.Ia():[],a=this.oa.size===0&&this.current?1:0,l=a!==this.sa;return this.sa=a,s.length!==0||l?{snapshot:new Xo(this.query,t.aa,r,s,t.mutatedKeys,a===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new VE,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=Z(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});const n=[];return t.forEach(i=>{this.oa.has(i)||n.push(new fC(i))}),this.oa.forEach(i=>{t.has(i)||n.push(new dC(i))}),n}da(t){this.ia=t.ls,this.oa=Z();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return Xo.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class sB{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class oB{constructor(t){this.key=t,this.Ra=!1}}class aB{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Or(a=>aP(a),Kc),this.fa=new Map,this.ga=new Set,this.pa=new xt(O.comparator),this.ya=new Map,this.wa=new U0,this.Sa={},this.ba=new Map,this.Da=Ds.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function lB(e,t){const n=av(e);let i,r;const s=n.ma.get(t);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{const o=await Qo(n.localStore,ze(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await iv(n,t,i,a==="current",o.resumeToken),n.isPrimaryClient&&rp(n.remoteStore,o)}return r}async function iv(e,t,n,i,r){e.va=(h,d,f)=>async function(m,_,g,y){let v=_.view.ca(g);v.Zi&&(v=await Qd(m.localStore,_.query,!1).then(({documents:x})=>_.view.ca(x,v)));const w=y&&y.targetChanges.get(_.targetId),E=_.view.applyChanges(v,m.isPrimaryClient,w);return xy(m,_.targetId,E.Ta),E.snapshot}(e,h,d,f);const s=await Qd(e.localStore,t,!0),o=new pC(t,s.ls),a=o.ca(s.documents),l=Xc.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);xy(e,n,c.Ta);const u=new sB(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function cB(e,t){const n=L(e),i=n.ma.get(t),r=n.fa.get(i.targetId);if(r.length>1)return n.fa.set(i.targetId,r.filter(s=>!Kc(s,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Yo(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),yc(n.remoteStore,i.targetId),Jo(n,i.targetId)}).catch(Vr)):(Jo(n,i.targetId),await Yo(n.localStore,i.targetId,!0))}async function uB(e,t,n){const i=lv(e);try{const r=await function(o,a){const l=L(o),c=Ot.now(),u=a.reduce((f,p)=>f.add(p.key),Z());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Je(),m=Z();return l.ss.getEntries(f,u).next(_=>{p=_,p.forEach((g,y)=>{y.isValidDocument()||(m=m.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(_=>{h=_;const g=[];for(const y of a){const v=BL(y,h.get(y.key).overlayedDocument);v!=null&&g.push(new Mi(y.key,v,JA(v.value.mapValue),Nt.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,g,a)}).next(_=>{d=_;const g=_.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,_.batchId,g)})}).then(()=>({batchId:d.batchId,changes:hP(h)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new xt(X)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(i,r.batchId,n),await Vi(i,r.changes),await pa(i.remoteStore)}catch(r){const s=ma(r,"Failed to persist write");n.reject(s)}}async function gC(e,t){const n=L(e);try{const i=await kF(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.ya.get(s);o&&(W(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ra=!0:r.modifiedDocuments.size>0?W(o.Ra):r.removedDocuments.size>0&&(W(o.Ra),o.Ra=!1))}),await Vi(n,i,t)}catch(i){await Vr(i)}}function OE(e,t,n){const i=L(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ma.forEach((s,o)=>{const a=o.view.Q_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=L(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.listeners)d.Q_(a)&&(c=!0)}),c&&ev(l)}(i.eventManager,t),r.length&&i.Va.a_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function hB(e,t,n){const i=L(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.ya.get(t),s=r&&r.key;if(s){let o=new xt(O.comparator);o=o.insert(s,Pt.newNoDocument(s,U.min()));const a=Z().add(s),l=new Yc(U.min(),new Map,new xt(X),o,a);await gC(i,l),i.pa=i.pa.remove(s),i.ya.delete(t),ov(i)}else await Yo(i.localStore,t,!1).then(()=>Jo(i,t,n)).catch(Vr)}async function dB(e,t){const n=L(e),i=t.batch.batchId;try{const r=await RF(n.localStore,t);sv(n,i,null),rv(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vi(n,r)}catch(r){await Vr(r)}}async function fB(e,t,n){const i=L(e);try{const r=await function(o,a){const l=L(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(W(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);sv(i,t,n),rv(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Vi(i,r)}catch(r){await Vr(r)}}async function pB(e,t){const n=L(e);Lr(n.remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(o){const a=L(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void t.resolve();const r=n.ba.get(i)||[];r.push(t),n.ba.set(i,r)}catch(i){const r=ma(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}function rv(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function sv(e,t,n){const i=L(e);let r=i.Sa[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Sa[i.currentUser.toKey()]=r}}function Jo(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.fa.get(t))e.ma.delete(i),n&&e.Va.Fa(i,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(i=>{e.wa.containsKey(i)||mC(e,i)})}function mC(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(yc(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),ov(e))}function xy(e,t,n){for(const i of n)i instanceof dC?(e.wa.addReference(i.key,t),gB(e,i)):i instanceof fC?(P("SyncEngine","Document no longer in limbo: "+i.key),e.wa.removeReference(i.key,t),e.wa.containsKey(i.key)||mC(e,i.key)):B()}function gB(e,t){const n=t.key,i=n.path.canonicalString();e.pa.get(n)||e.ga.has(i)||(P("SyncEngine","New document in limbo: "+n),e.ga.add(i),ov(e))}function ov(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new O(ct.fromString(t)),i=e.Da.next();e.ya.set(i,new oB(n)),e.pa=e.pa.insert(n,i),rp(e.remoteStore,new _i(ze(ua(n.path)),i,"TargetPurposeLimboResolution",Ye._e))}}async function Vi(e,t,n){const i=L(e),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach((a,l)=>{o.push(i.va(l,t,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const u=q0.Qi(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.Va.a_(r),await async function(l,c){const u=L(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>b.forEach(c,d=>b.forEach(d.ki,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>b.forEach(d.qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Nr(h))throw h;P("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ts.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ts=u.ts.insert(d,m)}}}(i.localStore,s))}async function mB(e,t){const n=L(e);if(!n.currentUser.isEqual(t)){P("SyncEngine","User change. New user:",t.toKey());const i=await XP(n.localStore,t);n.currentUser=t,function(s,o){s.ba.forEach(a=>{a.forEach(l=>{l.reject(new A(S.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Vi(n,i._s)}}function yB(e,t){const n=L(e),i=n.ya.get(t);if(i&&i.Ra)return Z().add(i.key);{let r=Z();const s=n.fa.get(t);if(!s)return r;for(const o of s){const a=n.ma.get(o);r=r.unionWith(a.view.ua)}return r}}async function _B(e,t){const n=L(e),i=await Qd(n.localStore,t.query,!0),r=t.view.da(i);return n.isPrimaryClient&&xy(n,t.targetId,r.Ta),r}async function vB(e,t){const n=L(e);return eC(n.localStore,t).then(i=>Vi(n,i))}async function wB(e,t,n,i){const r=L(e),s=await function(a,l){const c=L(a),u=L(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Cn(h,l).next(d=>d?c.localDocuments.getDocuments(h,d):b.resolve(null)))}(r.localStore,t);s!==null?(n==="pending"?await pa(r.remoteStore):n==="acknowledged"||n==="rejected"?(sv(r,t,i||null),rv(r,t),function(a,l){L(L(a).mutationQueue).Fn(l)}(r.localStore,t)):B(),await Vi(r,s)):P("SyncEngine","Cannot apply mutation batch with id: "+t)}async function EB(e,t){const n=L(e);if(av(n),lv(n),t===!0&&n.Ca!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await LE(n,i.toArray());n.Ca=!0,await Ey(n.remoteStore,!0);for(const s of r)rp(n.remoteStore,s)}else if(t===!1&&n.Ca!==!1){const i=[];let r=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Jo(n,o),Yo(n.localStore,o,!0))),yc(n.remoteStore,o)}),await r,await LE(n,i),function(o){const a=L(o);a.ya.forEach((l,c)=>{yc(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new xt(O.comparator)}(n),n.Ca=!1,await Ey(n.remoteStore,!1)}}async function LE(e,t,n){const i=L(e),r=[],s=[];for(const o of t){let a;const l=i.fa.get(o);if(l&&l.length!==0){a=await Qo(i.localStore,ze(l[0]));for(const c of l){const u=i.ma.get(c),h=await _B(i,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await tC(i.localStore,o);a=await Qo(i.localStore,c),await iv(i,yC(c),o,!1,a.resumeToken)}r.push(a)}return i.Va.a_(s),r}function yC(e){return oP(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function xB(e){return function(n){return L(L(n).persistence).Bi()}(L(e).localStore)}async function TB(e,t,n,i){const r=L(e);if(r.Ca)return void P("SyncEngine","Ignoring unexpected query state notification.");const s=r.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await eC(r.localStore,lP(s[0])),a=Yc.createSynthesizedRemoteEventForCurrentChange(t,n==="current",ie.EMPTY_BYTE_STRING);await Vi(r,o,a);break}case"rejected":await Yo(r.localStore,t,!0),Jo(r,t,i);break;default:B()}}async function IB(e,t,n){const i=av(e);if(i.Ca){for(const r of t){if(i.fa.has(r)){P("SyncEngine","Adding an already active target "+r);continue}const s=await tC(i.localStore,r),o=await Qo(i.localStore,s);await iv(i,yC(s),o.targetId,!1,o.resumeToken),rp(i.remoteStore,o)}for(const r of n)i.fa.has(r)&&await Yo(i.localStore,r,!1).then(()=>{yc(i.remoteStore,r),Jo(i,r)}).catch(Vr)}}function av(e){const t=L(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yB.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hB.bind(null,t),t.Va.a_=eB.bind(null,t.eventManager),t.Va.Fa=nB.bind(null,t.eventManager),t}function lv(e){const t=L(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dB.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fB.bind(null,t),t}function bB(e,t,n){const i=L(e);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(f,p){const m=L(f),_=Yt(p.createTime);return m.persistence.runTransaction("hasNewerBundle","readonly",g=>m.Kr.getBundleMetadata(g,p.id)).then(g=>!!g&&g.createTime.compareTo(_)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(hC(l));const c=new rB(l,s.localStore,o.serializer);let u=await o.Ma();for(;u;){const d=await c.ea(u);d&&a._updateProgress(d),u=await o.Ma()}const h=await c.complete();return await Vi(s,h.ra,void 0),await function(f,p){const m=L(f);return m.persistence.runTransaction("Save bundle","readwrite",_=>m.Kr.saveBundleMetadata(_,p))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.na)}catch(l){return $n("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(i,t,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class Ty{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Jc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return YP(this.persistence,new QP,t.initialUser,this.serializer)}createPersistence(t){return new GP(ip.jr,this.serializer)}createSharedClientState(t){return new iC}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _C extends Ty{constructor(t,n,i){super(),this.xa=t,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xa.initialize(this,t),await lv(this.xa.syncEngine),await pa(this.xa.remoteStore),await this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(t){return YP(this.persistence,new QP,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,n){const i=this.persistence.referenceDelegate.garbageCollector;return new fF(i,t.asyncQueue,n)}createIndexBackfillerScheduler(t,n){const i=new YO(n,this.persistence);return new QO(t.asyncQueue,i)}createPersistence(t){const n=H0(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?qe.withCacheSize(this.cacheSizeBytes):qe.DEFAULT;return new W0(this.synchronizeTabs,n,t.clientId,i,t.asyncQueue,rC(),bh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new iC}}class SB extends _C{constructor(t,n){super(t,n,!1),this.xa=t,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const n=this.xa.syncEngine;this.sharedClientState instanceof wg&&(this.sharedClientState.syncEngine={Ys:wB.bind(null,n),Zs:TB.bind(null,n),Xs:IB.bind(null,n),Bi:xB.bind(null,n),Js:vB.bind(null,n)},await this.sharedClientState.start()),await this.persistence.mi(async i=>{await EB(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(t){const n=rC();if(!wg.D(n))throw new A(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=H0(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new wg(n,t.asyncQueue,i,t.clientId,t.initialUser)}}class cv{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>OE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mB.bind(null,this.syncEngine),await Ey(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new tB}()}createDatastore(t){const n=Jc(t.databaseInfo.databaseId),i=function(s){return new FF(s)}(t.databaseInfo);return function(s,o,a,l){return new zF(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new UF(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>OE(this.syncEngine,n,0),function(){return DE.D()?new DE:new NF}())}createSyncEngine(t,n){return function(r,s,o,a,l,c,u){const h=new aB(r,s,o,a,l,c);return u&&(h.Ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const i=L(n);P("RemoteStore","RemoteStore shutting down."),i.C_.add(5),await fa(i),i.F_.shutdown(),i.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const i={value:e.slice(n,n+t),done:!1};return n+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):Gt("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(t,n){this.Ba=t,this.serializer=n,this.metadata=new ce,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const t=await this.qa();if(t===null)return null;const n=this.La.decode(t),i=Number(n);isNaN(i)&&this.Qa(`length string (${n}) is not valid number`);const r=await this.Ka(i);return new iB(JSON.parse(r),t.length+i)}$a(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(this.buffer.length===0)return null;const t=this.$a();t<0&&this.Qa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),n}async Ka(t){for(;this.buffer.length<t;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const n=this.La.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),n}Qa(t){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${t}`)}async Ua(){const t=await this.Ba.read();if(!t.done){const n=new Uint8Array(this.buffer.length+t.value.length);n.set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new A(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,s){const o=L(r),a=gc(o.serializer)+"/documents",l={documents:s.map(d=>pc(o.serializer,d))},c=await o.Co("BatchGetDocuments",a,l,s.length),u=new Map;c.forEach(d=>{const f=GL(o.serializer,d);u.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=u.get(d.toString());W(!!f),h.push(f)}),h}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new da(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=O.fromPath(i);this.mutations.push(new V0(r,this.precondition(r)))}),await async function(i,r){const s=L(i),o=gc(s.serializer)+"/documents",a={writes:r.map(l=>mc(s.serializer,l))};await s.wo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw B();n=U.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new A(S.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(U.min())?Nt.exists(!1):Nt.updateTime(n):Nt.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(U.min()))throw new A(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nt.updateTime(n)}return Nt.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new G0(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(async()=>{const t=new PB(this.datastore),n=this.za(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})})}za(t){try{const n=this.updateFunction(t);return!Hc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(t){this.Wa>0&&this.Ha(t)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(t)}Ha(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xP(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(t,n,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=oe.UNAUTHENTICATED,this.clientId=FA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{P("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(P("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ce;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=ma(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Sh(e,t){e.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await XP(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Iy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uv(e);P("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener(r=>ME(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>ME(t.remoteStore,s)),e._onlineComponents=t}function vC(e){return e.name==="FirebaseError"?e.code===S.FAILED_PRECONDITION||e.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function uv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!vC(n))throw n;$n("Error using user provided cache. Falling back to memory cache: "+n),await Sh(e,new Ty)}}else P("FirestoreClient","Using default OfflineComponentProvider"),await Sh(e,new Ty);return e._offlineComponents}async function op(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),await Iy(e,e._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),await Iy(e,new cv))),e._onlineComponents}function wC(e){return uv(e).then(t=>t.persistence)}function hv(e){return uv(e).then(t=>t.localStore)}function EC(e){return op(e).then(t=>t.remoteStore)}function dv(e){return op(e).then(t=>t.syncEngine)}function kB(e){return op(e).then(t=>t.datastore)}async function Zo(e){const t=await op(e),n=t.eventManager;return n.onListen=lB.bind(null,t.syncEngine),n.onUnlisten=cB.bind(null,t.syncEngine),n}function DB(e){return e.asyncQueue.enqueue(async()=>{const t=await wC(e),n=await EC(e);return t.setNetworkEnabled(!0),function(r){const s=L(r);return s.C_.delete(0),Zc(s)}(n)})}function MB(e){return e.asyncQueue.enqueue(async()=>{const t=await wC(e),n=await EC(e);return t.setNetworkEnabled(!1),async function(r){const s=L(r);s.C_.add(0),await fa(s),s.M_.set("Offline")}(n)})}function VB(e,t){const n=new ce;return e.asyncQueue.enqueueAndForget(async()=>async function(r,s,o){try{const a=await function(c,u){const h=L(c);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,u))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new A(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=ma(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await hv(e),t,n)),n.promise}function xC(e,t,n={}){const i=new ce;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new sp({next:d=>{o.enqueueAndForget(()=>tv(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new A(S.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new A(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new nv(ua(a.path),u,{includeMetadataChanges:!0,J_:!0});return Z0(s,h)}(await Zo(e),e.asyncQueue,t,n,i)),i.promise}function NB(e,t){const n=new ce;return e.asyncQueue.enqueueAndForget(async()=>async function(r,s,o){try{const a=await Qd(r,s,!0),l=new pC(s,a.ls),c=l.ca(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=ma(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await hv(e),t,n)),n.promise}function TC(e,t,n={}){const i=new ce;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new sp({next:d=>{o.enqueueAndForget(()=>tv(s,h)),d.fromCache&&l.source==="server"?c.reject(new A(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new nv(a,u,{includeMetadataChanges:!0,J_:!0});return Z0(s,h)}(await Zo(e),e.asyncQueue,t,n,i)),i.promise}function OB(e,t){const n=new sp(t);return e.asyncQueue.enqueueAndForget(async()=>function(r,s){L(r).q_.add(s),s.next()}(await Zo(e),n)),()=>{n.Na(),e.asyncQueue.enqueueAndForget(async()=>function(r,s){L(r).q_.delete(s)}(await Zo(e),n))}}function LB(e,t,n,i){const r=function(o,a){let l;return l=typeof o=="string"?IP().encode(o):o,function(u,h){return new AB(u,h)}(function(u,h){if(u instanceof Uint8Array)return FE(u,h);if(u instanceof ArrayBuffer)return FE(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Jc(t));e.asyncQueue.enqueueAndForget(async()=>{bB(await dv(e),r,i)})}function FB(e,t){return e.asyncQueue.enqueue(async()=>function(i,r){const s=L(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,r))}(await hv(e),t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(e,t,n){if(!n)throw new A(S.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bC(e,t,n,i){if(t===!0&&i===!0)throw new A(S.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function $E(e){if(!O.isDocumentKey(e))throw new A(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function zE(e){if(O.isDocumentKey(e))throw new A(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ap(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":B()}function dt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new A(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ap(e);throw new A(S.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function SC(e,t){if(t<=0)throw new A(S.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new A(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new A(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}bC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IC((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new A(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new A(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new A(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tu{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new A(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jE(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new FO;switch(i.type){case"firstParty":return new jO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new A(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=BE.get(n);i&&(P("ComponentProvider","Removing Datastore"),BE.delete(n),i.terminate())}(this),Promise.resolve()}}function BB(e,t,n,i={}){var r;const s=(e=dt(e,tu))._getSettings(),o=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=oe.MOCK_USER;else{a=ZM(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new A(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new oe(c)}e._authCredentials=new BO(new LA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let je=class AC{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new AC(this.firestore,t,this._query)}},Bt=class PC{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new PC(this.firestore,t,this._key)}},dr=class CC extends je{constructor(t,n,i){super(t,n,ua(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Bt(this.firestore,null,new O(t))}withConverter(t){return new CC(this.firestore,t,this._path)}};function RC(e,t,...n){if(e=Zt(e),fv("collection","path",t),e instanceof tu){const i=ct.fromString(t,...n);return zE(i),new dr(e,null,i)}{if(!(e instanceof Bt||e instanceof dr))throw new A(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ct.fromString(t,...n));return zE(i),new dr(e.firestore,null,i)}}function $B(e,t){if(e=dt(e,tu),fv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new A(S.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new je(e,null,function(i){return new Di(ct.emptyPath(),i)}(t))}function Zd(e,t,...n){if(e=Zt(e),arguments.length===1&&(t=FA.newId()),fv("doc","path",t),e instanceof tu){const i=ct.fromString(t,...n);return $E(i),new Bt(e,null,new O(i))}{if(!(e instanceof Bt||e instanceof dr))throw new A(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ct.fromString(t,...n));return $E(i),new Bt(e.firestore,e instanceof dr?e.converter:null,new O(i))}}function kC(e,t){return e=Zt(e),t=Zt(t),(e instanceof Bt||e instanceof dr)&&(t instanceof Bt||t instanceof dr)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function DC(e,t){return e=Zt(e),t=Zt(t),e instanceof je&&t instanceof je&&e.firestore===t.firestore&&Kc(e._query,t._query)&&e.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new G0(this,"async_queue_retry"),this.iu=()=>{const n=bh();n&&P("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=bh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=bh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new ce;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!Nr(t))throw t;P("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(i=>{this.eu=i,this.tu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Gt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(t,n,i){this.su(),this.ru.indexOf(t)>-1&&(n=0);const r=J0.createAndSchedule(this,t,n,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&B()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}function by(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(e,["next","error","complete"])}class jB{constructor(){this._progressObserver={},this._taskCompletionResolver=new ce,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,n,i){this._progressObserver={next:t,error:n,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,n){return this._taskCompletionResolver.promise.then(t,n)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=-1;let qt=class extends tu{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=function(){return new zB}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||MC(this),this._firestoreClient.terminate()}};function pe(e){return e._firestoreClient||MC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function MC(e){var t,n,i;const r=e._freezeSettings(),s=function(a,l,c,u){return new yL(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,IC(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new RB(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function WB(e,t){NC(e=dt(e,qt));const n=pe(e);if(n._uninitializedComponentsProvider)throw new A(S.FAILED_PRECONDITION,"SDK cache is already specified.");$n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=e._freezeSettings(),r=new cv;return VC(n,r,new _C(r,i.cacheSizeBytes,t==null?void 0:t.forceOwnership))}function HB(e){NC(e=dt(e,qt));const t=pe(e);if(t._uninitializedComponentsProvider)throw new A(S.FAILED_PRECONDITION,"SDK cache is already specified.");$n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),i=new cv;return VC(t,i,new SB(i,n.cacheSizeBytes))}function VC(e,t,n){const i=new ce;return e.asyncQueue.enqueue(async()=>{try{await Sh(e,n),await Iy(e,t),i.resolve()}catch(r){const s=r;if(!vC(s))throw s;$n("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}}).then(()=>i.promise)}function qB(e){if(e._initialized&&!e._terminated)throw new A(S.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ce;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Dn.D())return Promise.resolve();const r=i+"main";await Dn.delete(r)}(H0(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}}),t.promise}function KB(e){return function(n){const i=new ce;return n.asyncQueue.enqueueAndForget(async()=>pB(await dv(n),i)),i.promise}(pe(e=dt(e,qt)))}function GB(e){return DB(pe(e=dt(e,qt)))}function QB(e){return MB(pe(e=dt(e,qt)))}function YB(e,t){const n=pe(e=dt(e,qt)),i=new jB;return LB(n,e._databaseId,t,i),i}function XB(e,t){return FB(pe(e=dt(e,qt)),t).then(n=>n?new je(e,null,n.query):null)}function NC(e){if(e._initialized||e._terminated)throw new A(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new oi(ie.fromBase64String(t))}catch(n){throw new A(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new oi(ie.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new A(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let js=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new A(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new A(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return X(this._lat,t._lat)||X(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=/^__.*__$/;class ZB{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Mi(t,this.data,this.fieldMask,n,this.fieldTransforms):new ha(t,this.data,n,this.fieldTransforms)}}class OC{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Mi(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function LC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}class cp{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new cp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Tu({path:i,du:!1});return r.Au(t),r}Ru(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return tf(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(LC(this.Iu)&&JB.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class t4{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Jc(t)}pu(t,n,i,r=!1){return new cp({Iu:t,methodName:n,gu:i,path:Vt.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Us(e){const t=e._freezeSettings(),n=Jc(e._databaseId);return new t4(e._databaseId,!!t.ignoreUndefinedProperties,n)}function up(e,t,n,i,r,s={}){const o=e.pu(s.merge||s.mergeFields?2:0,t,n,r);yv("Data must be an object, but it was:",o,i);const a=$C(i,o);let l,c;if(s.merge)l=new Xe(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Sy(t,h,n);if(!o.contains(d))throw new A(S.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);jC(u,d)||u.push(d)}l=new Xe(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new ZB(new ve(a),l,c)}class eu extends js{_toFieldTransform(t){if(t.Iu!==2)throw t.Iu===1?t.mu(`${this._methodName}() can only appear at the top level of your update data`):t.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof eu}}function FC(e,t,n){return new cp({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class pv extends js{_toFieldTransform(t){return new Qc(t.path,new qo)}isEqual(t){return t instanceof pv}}class e4 extends js{constructor(t,n){super(t),this.yu=n}_toFieldTransform(t){const n=FC(this,t,!0),i=this.yu.map(s=>Ws(s,n)),r=new Ps(i);return new Qc(t.path,r)}isEqual(t){return this===t}}class n4 extends js{constructor(t,n){super(t),this.yu=n}_toFieldTransform(t){const n=FC(this,t,!0),i=this.yu.map(s=>Ws(s,n)),r=new Cs(i);return new Qc(t.path,r)}isEqual(t){return this===t}}class i4 extends js{constructor(t,n){super(t),this.wu=n}_toFieldTransform(t){const n=new Ko(t.serializer,gP(t.serializer,this.wu));return new Qc(t.path,n)}isEqual(t){return this===t}}function gv(e,t,n,i){const r=e.pu(1,t,n);yv("Data must be an object, but it was:",r,i);const s=[],o=ve.empty();zs(i,(l,c)=>{const u=_v(t,l,n);c=Zt(c);const h=r.Ru(u);if(c instanceof eu)s.push(u);else{const d=Ws(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new Xe(s);return new OC(o,a,r.fieldTransforms)}function mv(e,t,n,i,r,s){const o=e.pu(1,t,n),a=[Sy(t,i,n)],l=[r];if(s.length%2!=0)throw new A(S.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Sy(t,s[d])),l.push(s[d+1]);const c=[],u=ve.empty();for(let d=a.length-1;d>=0;--d)if(!jC(c,a[d])){const f=a[d];let p=l[d];p=Zt(p);const m=o.Ru(f);if(p instanceof eu)c.push(f);else{const _=Ws(p,m);_!=null&&(c.push(f),u.set(f,_))}}const h=new Xe(c);return new OC(u,h,o.fieldTransforms)}function BC(e,t,n,i=!1){return Ws(n,e.pu(i?4:3,t))}function Ws(e,t){if(zC(e=Zt(e)))return yv("Unsupported field value:",t,e),$C(e,t);if(e instanceof js)return function(i,r){if(!LC(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Ws(a,r.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=Zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ot.fromDate(i);return{timestampValue:Go(r.serializer,s)}}if(i instanceof Ot){const s=new Ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Go(r.serializer,s)}}if(i instanceof lp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oi)return{bytesValue:AP(r.serializer,i._byteString)};if(i instanceof Bt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:B0(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${ap(i)}`)}(e,t)}function $C(e,t){const n={};return QA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zs(e,(i,r)=>{const s=Ws(r,t.Eu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function zC(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ot||e instanceof lp||e instanceof oi||e instanceof Bt||e instanceof js)}function yv(e,t,n){if(!zC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=ap(n);throw i==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+i)}}function Sy(e,t,n){if((t=Zt(t))instanceof br)return t._internalPath;if(typeof t=="string")return _v(e,t);throw tf("Field path arguments must be of type string or ",e,!1,void 0,n)}const r4=new RegExp("[~\\*/\\[\\]]");function _v(e,t,n){if(t.search(r4)>=0)throw tf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new br(...t.split("."))._internalPath}catch{throw tf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function tf(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new A(S.INVALID_ARGUMENT,a+e+l)}function jC(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new s4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(hp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class s4 extends _c{data(){return super.data()}}function hp(e,t){return typeof t=="string"?_v(e,t):t instanceof br?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new A(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vv{}class nu extends vv{}function Bi(e,t,...n){let i=[];t instanceof vv&&i.push(t),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof wv).length,a=s.filter(l=>l instanceof dp).length;if(o>1||o>0&&a>0)throw new A(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class dp extends nu{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new dp(t,n,i)}_apply(t){const n=this._parse(t);return HC(t._query,n),new je(t.firestore,t.converter,fy(t._query,n))}_parse(t){const n=Us(t.firestore);return function(s,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new A(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){WE(h,u);const f=[];for(const p of h)f.push(UE(l,s,p));d={arrayValue:{values:f}}}else d=UE(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||WE(h,u),d=BC(a,o,h,u==="in"||u==="not-in");return it.create(c,u,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function o4(e,t,n){const i=t,r=hp("where",e);return dp._create(r,i,n)}class wv extends vv{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new wv(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:mt.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)HC(o,l),o=fy(o,l)}(t._query,n),new je(t.firestore,t.converter,fy(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ev extends nu{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ev(t,n)}_apply(t){const n=function(r,s,o){if(r.startAt!==null)throw new A(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new A(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fc(s,o)}(t._query,this._field,this._direction);return new je(t.firestore,t.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Di(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function a4(e,t="asc"){const n=t,i=hp("orderBy",e);return Ev._create(i,n)}class fp extends nu{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new fp(t,n,i)}_apply(t){return new je(t.firestore,t.converter,Hd(t._query,this._limit,this._limitType))}}function l4(e){return SC("limit",e),fp._create("limit",e,"F")}function c4(e){return SC("limitToLast",e),fp._create("limitToLast",e,"L")}class pp extends nu{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new pp(t,n,i)}_apply(t){const n=WC(t,this.type,this._docOrFields,this._inclusive);return new je(t.firestore,t.converter,function(r,s){return new Di(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(t._query,n))}}function u4(...e){return pp._create("startAt",e,!0)}function h4(...e){return pp._create("startAfter",e,!1)}class gp extends nu{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new gp(t,n,i)}_apply(t){const n=WC(t,this.type,this._docOrFields,this._inclusive);return new je(t.firestore,t.converter,function(r,s){return new Di(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(t._query,n))}}function d4(...e){return gp._create("endBefore",e,!1)}function f4(...e){return gp._create("endAt",e,!0)}function WC(e,t,n,i){if(n[0]=Zt(n[0]),n[0]instanceof _c)return function(s,o,a,l,c){if(!l)throw new A(S.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of ko(s))if(h.field.isKeyField())u.push(Ss(o,l.key));else{const d=l.data.field(h.field);if(Jf(d))throw new A(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=h.field.canonicalString();throw new A(S.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(d)}return new Tr(u,c)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const r=Us(e.firestore);return function(o,a,l,c,u,h){const d=o.explicitOrderBy;if(u.length>d.length)throw new A(S.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<u.length;p++){const m=u[p];if(d[p].field.isKeyField()){if(typeof m!="string")throw new A(S.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof m}`);if(!D0(o)&&m.indexOf("/")!==-1)throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${m}' contains a slash.`);const _=o.path.child(ct.fromString(m));if(!O.isDocumentKey(_))throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const g=new O(_);f.push(Ss(a,g))}else{const _=BC(l,c,m);f.push(_)}}return new Tr(f,h)}(e._query,e.firestore._databaseId,r,t,n,i)}}function UE(e,t,n){if(typeof(n=Zt(n))=="string"){if(n==="")throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D0(t)&&n.indexOf("/")!==-1)throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(ct.fromString(n));if(!O.isDocumentKey(i))throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ss(e,new O(i))}if(n instanceof Bt)return Ss(e,n._key);throw new A(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(n)}.`)}function WE(e,t){if(!Array.isArray(e)||e.length===0)throw new A(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function HC(e,t){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new A(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new A(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class xv{convertValue(t,n="none"){switch(bs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(wr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw B()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return zs(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(t){return new lp(jt(t.latitude),jt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=R0(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(uc(t));default:return null}}convertTimestamp(t){const n=vr(t);return new Ot(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=ct.fromString(t);W(LP(i));const r=new Er(i.get(1),i.get(3)),s=new O(i.popFirst(5));return r.isEqual(n)||Gt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class p4 extends xv{constructor(t){super(),this.firestore=t}convertBytes(t){return new oi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let Ci=class extends _c{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(hp("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},wl=class extends Ci{data(t={}){return super.data(t)}},Sr=class{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new ls(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new wl(this._firestore,this._userDataWriter,i.key,i,new ls(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new A(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new wl(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ls(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new wl(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ls(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:g4(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function g4(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}function qC(e,t){return e instanceof Ci&&t instanceof Ci?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Sr&&t instanceof Sr&&e._firestore===t._firestore&&DC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(e){e=dt(e,Bt);const t=dt(e.firestore,qt);return xC(pe(t),e._key).then(n=>Tv(t,e,n))}class Hs extends xv{constructor(t){super(),this.firestore=t}convertBytes(t){return new oi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function y4(e){e=dt(e,Bt);const t=dt(e.firestore,qt),n=pe(t),i=new Hs(t);return VB(n,e._key).then(r=>new Ci(t,i,e._key,r,new ls(r!==null&&r.hasLocalMutations,!0),e.converter))}function _4(e){e=dt(e,Bt);const t=dt(e.firestore,qt);return xC(pe(t),e._key,{source:"server"}).then(n=>Tv(t,e,n))}function v4(e){e=dt(e,je);const t=dt(e.firestore,qt),n=pe(t),i=new Hs(t);return UC(e._query),TC(n,e._query).then(r=>new Sr(t,i,e,r))}function w4(e){e=dt(e,je);const t=dt(e.firestore,qt),n=pe(t),i=new Hs(t);return NB(n,e._query).then(r=>new Sr(t,i,e,r))}function E4(e){e=dt(e,je);const t=dt(e.firestore,qt),n=pe(t),i=new Hs(t);return TC(n,e._query,{source:"server"}).then(r=>new Sr(t,i,e,r))}function HE(e,t,n){e=dt(e,Bt);const i=dt(e.firestore,qt),r=mp(e.converter,t,n);return iu(i,[up(Us(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Nt.none())])}function qE(e,t,n,...i){e=dt(e,Bt);const r=dt(e.firestore,qt),s=Us(r);let o;return o=typeof(t=Zt(t))=="string"||t instanceof br?mv(s,"updateDoc",e._key,t,n,i):gv(s,"updateDoc",e._key,t),iu(r,[o.toMutation(e._key,Nt.exists(!0))])}function x4(e){return iu(dt(e.firestore,qt),[new da(e._key,Nt.none())])}function T4(e,t){const n=dt(e.firestore,qt),i=Zd(e),r=mp(e.converter,t);return iu(n,[up(Us(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Nt.exists(!1))]).then(()=>i)}function KC(e,...t){var n,i,r;e=Zt(e);let s={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||by(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(by(t[o])){const h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),t[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(e instanceof Bt)c=dt(e.firestore,qt),u=ua(e._key.path),l={next:h=>{t[o]&&t[o](Tv(c,e,h))},error:t[o+1],complete:t[o+2]};else{const h=dt(e,je);c=dt(h.firestore,qt),u=h._query;const d=new Hs(c);l={next:f=>{t[o]&&t[o](new Sr(c,d,h,f))},error:t[o+1],complete:t[o+2]},UC(e._query)}return function(d,f,p,m){const _=new sp(m),g=new nv(f,_,p);return d.asyncQueue.enqueueAndForget(async()=>Z0(await Zo(d),g)),()=>{_.Na(),d.asyncQueue.enqueueAndForget(async()=>tv(await Zo(d),g))}}(pe(c),u,a,l)}function I4(e,t){return OB(pe(e=dt(e,qt)),by(t)?t:{next:t})}function iu(e,t){return function(i,r){const s=new ce;return i.asyncQueue.enqueueAndForget(async()=>uB(await dv(i),r,s)),s.promise}(pe(e),t)}function Tv(e,t,n){const i=n.docs.get(t._key),r=new Hs(e);return new Ci(e,r,t._key,i,new ls(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S4=class{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Us(t)}set(t,n,i){this._verifyNotCommitted();const r=qi(t,this._firestore),s=mp(r.converter,n,i),o=up(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Nt.none())),this}update(t,n,i,...r){this._verifyNotCommitted();const s=qi(t,this._firestore);let o;return o=typeof(n=Zt(n))=="string"||n instanceof br?mv(this._dataReader,"WriteBatch.update",s._key,n,i,r):gv(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Nt.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=qi(t,this._firestore);return this._mutations=this._mutations.concat(new da(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new A(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qi(e,t){if((e=Zt(e)).firestore!==t)throw new A(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A4=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Us(n)}get(n){const i=qi(n,this._firestore),r=new p4(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return B();const o=s[0];if(o.isFoundDocument())return new _c(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new _c(this._firestore,r,i._key,null,i.converter);throw B()})}set(n,i,r){const s=qi(n,this._firestore),o=mp(s.converter,i,r),a=up(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=qi(n,this._firestore);let a;return a=typeof(i=Zt(i))=="string"||i instanceof br?mv(this._dataReader,"Transaction.update",o._key,i,r,s):gv(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=qi(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=qi(t,this._firestore),i=new Hs(this._firestore);return super.get(t).then(r=>new Ci(this._firestore,i,n._key,r._document,new ls(!1,!1),n.converter))}};function P4(e,t,n){e=dt(e,qt);const i=Object.assign(Object.assign({},b4),n);return function(s){if(s.maxAttempts<1)throw new A(S.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new ce;return s.asyncQueue.enqueueAndForget(async()=>{const c=await kB(s);new CB(s.asyncQueue,c,a,o,l).run()}),l.promise}(pe(e),r=>t(new A4(e,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(){return new eu("deleteField")}function R4(){return new pv("serverTimestamp")}function k4(...e){return new e4("arrayUnion",e)}function D4(...e){return new n4("arrayRemove",e)}function M4(e){return new i4("increment",e)}(function(t,n=!0){(function(r){ca=r})(i0),zo(new Ts("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new qt(new $O(i.getProvider("auth-internal")),new WO(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new A(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Er(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),hr($1,"4.3.2",t),hr($1,"4.3.2","esm2017")})();const V4="@firebase/firestore-compat",N4="0.3.22";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new A("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){if(typeof Uint8Array>"u")throw new A("unimplemented","Uint8Arrays are not available in this environment.")}function GE(){if(!gL())throw new A("unimplemented","Blobs are unavailable in Firestore in this environment.")}let GC=class Ay{constructor(t){this._delegate=t}static fromBase64String(t){return GE(),new Ay(oi.fromBase64String(t))}static fromUint8Array(t){return KE(),new Ay(oi.fromUint8Array(t))}toBase64(){return GE(),this._delegate.toBase64()}toUint8Array(){return KE(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(e){return O4(e,["next","error","complete"])}function O4(e,t){if(typeof e!="object"||e===null)return!1;const n=e;for(const i of t)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{enableIndexedDbPersistence(t,n){return WB(t._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(t){return HB(t._delegate)}clearIndexedDbPersistence(t){return qB(t._delegate)}}class QC{constructor(t,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Er||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const n=this._delegate._getSettings();!t.merge&&n.host!==t.host&&$n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},n),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,n,i={}){BB(this._delegate,t,n,i)}enableNetwork(){return GB(this._delegate)}disableNetwork(){return QB(this._delegate)}enablePersistence(t){let n=!1,i=!1;return t&&(n=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,bC("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return KB(this._delegate)}onSnapshotsInSync(t){return I4(this._delegate,t)}get app(){if(!this._appCompat)throw new A("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new ta(this,RC(this._delegate,t))}catch(n){throw Le(n,"collection()","Firestore.collection()")}}doc(t){try{return new xn(this,Zd(this._delegate,t))}catch(n){throw Le(n,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Oe(this,$B(this._delegate,t))}catch(n){throw Le(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return P4(this._delegate,n=>t(new YC(this,n)))}batch(){return pe(this._delegate),new XC(new S4(this._delegate,t=>iu(this._delegate,t)))}loadBundle(t){return YB(this._delegate,t)}namedQuery(t){return XB(this._delegate,t).then(n=>n?new Oe(this,n):null)}}class yp extends xv{constructor(t){super(),this.firestore=t}convertBytes(t){return new GC(new oi(t))}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return xn.forKey(n,this.firestore,null)}}function F4(e){OO(e)}class YC{constructor(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new yp(t)}get(t){const n=cs(t);return this._delegate.get(n).then(i=>new vc(this._firestore,new Ci(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(t,n,i){const r=cs(t);return i?(Iv("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(t,n,i,...r){const s=cs(t);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(t){const n=cs(t);return this._delegate.delete(n),this}}class XC{constructor(t){this._delegate=t}set(t,n,i){const r=cs(t);return i?(Iv("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(t,n,i,...r){const s=cs(t);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(t){const n=cs(t);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ms{constructor(t,n,i){this._firestore=t,this._userDataWriter=n,this._delegate=i}fromFirestore(t,n){const i=new wl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new wc(this._firestore,i),n??{})}toFirestore(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)}static getInstance(t,n){const i=Ms.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(n);return s||(s=new Ms(t,new yp(t),n),r.set(n,s)),s}}Ms.INSTANCES=new WeakMap;class xn{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new yp(t)}static forPath(t,n,i){if(t.length%2!==0)throw new A("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new xn(n,new Bt(n._delegate,i,new O(t)))}static forKey(t,n,i){return new xn(n,new Bt(n._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new ta(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new ta(this.firestore,RC(this._delegate,t))}catch(n){throw Le(n,"collection()","DocumentReference.collection()")}}isEqual(t){return t=Zt(t),t instanceof Bt?kC(this._delegate,t):!1}set(t,n){n=Iv("DocumentReference.set",n);try{return n?HE(this._delegate,t,n):HE(this._delegate,t)}catch(i){throw Le(i,"setDoc()","DocumentReference.set()")}}update(t,n,...i){try{return arguments.length===1?qE(this._delegate,t):qE(this._delegate,t,n,...i)}catch(r){throw Le(r,"updateDoc()","DocumentReference.update()")}}delete(){return x4(this._delegate)}onSnapshot(...t){const n=JC(t),i=ZC(t,r=>new vc(this.firestore,new Ci(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return KC(this._delegate,n,i)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=y4(this._delegate):(t==null?void 0:t.source)==="server"?n=_4(this._delegate):n=m4(this._delegate),n.then(i=>new vc(this.firestore,new Ci(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new xn(this.firestore,t?this._delegate.withConverter(Ms.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Le(e,t,n){return e.message=e.message.replace(t,n),e}function JC(e){for(const t of e)if(typeof t=="object"&&!Py(t))return t;return{}}function ZC(e,t){var n,i;let r;return Py(e[0])?r=e[0]:Py(e[1])?r=e[1]:typeof e[0]=="function"?r={next:e[0],error:e[1],complete:e[2]}:r={next:e[1],error:e[2],complete:e[3]},{next:s=>{r.next&&r.next(t(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class vc{constructor(t,n){this._firestore=t,this._delegate=n}get ref(){return new xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,n){return this._delegate.get(t,n)}isEqual(t){return qC(this._delegate,t._delegate)}}class wc extends vc{data(t){const n=this._delegate.data(t);return this._delegate._converter||LO(n!==void 0),n}}class Oe{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new yp(t)}where(t,n,i){try{return new Oe(this.firestore,Bi(this._delegate,o4(t,n,i)))}catch(r){throw Le(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,n){try{return new Oe(this.firestore,Bi(this._delegate,a4(t,n)))}catch(i){throw Le(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Oe(this.firestore,Bi(this._delegate,l4(t)))}catch(n){throw Le(n,"limit()","Query.limit()")}}limitToLast(t){try{return new Oe(this.firestore,Bi(this._delegate,c4(t)))}catch(n){throw Le(n,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Oe(this.firestore,Bi(this._delegate,u4(...t)))}catch(n){throw Le(n,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Oe(this.firestore,Bi(this._delegate,h4(...t)))}catch(n){throw Le(n,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Oe(this.firestore,Bi(this._delegate,d4(...t)))}catch(n){throw Le(n,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Oe(this.firestore,Bi(this._delegate,f4(...t)))}catch(n){throw Le(n,"endAt()","Query.endAt()")}}isEqual(t){return DC(this._delegate,t._delegate)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=w4(this._delegate):(t==null?void 0:t.source)==="server"?n=E4(this._delegate):n=v4(this._delegate),n.then(i=>new Cy(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const n=JC(t),i=ZC(t,r=>new Cy(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return KC(this._delegate,n,i)}withConverter(t){return new Oe(this.firestore,t?this._delegate.withConverter(Ms.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class B4{constructor(t,n){this._firestore=t,this._delegate=n}get type(){return this._delegate.type}get doc(){return new wc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cy{constructor(t,n){this._firestore=t,this._delegate=n}get query(){return new Oe(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new wc(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(n=>new B4(this._firestore,n))}forEach(t,n){this._delegate.forEach(i=>{t.call(n,new wc(this._firestore,i))})}isEqual(t){return qC(this._delegate,t._delegate)}}class ta extends Oe{constructor(t,n){super(t,n),this.firestore=t,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new xn(this.firestore,t):null}doc(t){try{return t===void 0?new xn(this.firestore,Zd(this._delegate)):new xn(this.firestore,Zd(this._delegate,t))}catch(n){throw Le(n,"doc()","CollectionReference.doc()")}}add(t){return T4(this._delegate,t).then(n=>new xn(this.firestore,n))}isEqual(t){return kC(this._delegate,t._delegate)}withConverter(t){return new ta(this.firestore,t?this._delegate.withConverter(Ms.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function cs(e){return dt(e,Bt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(...t){this._delegate=new br(...t)}static documentId(){return new bv(Vt.keyField().canonicalString())}isEqual(t){return t=Zt(t),t instanceof br?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t){this._delegate=t}static serverTimestamp(){const t=R4();return t._methodName="FieldValue.serverTimestamp",new es(t)}static delete(){const t=C4();return t._methodName="FieldValue.delete",new es(t)}static arrayUnion(...t){const n=k4(...t);return n._methodName="FieldValue.arrayUnion",new es(n)}static arrayRemove(...t){const n=D4(...t);return n._methodName="FieldValue.arrayRemove",new es(n)}static increment(t){const n=M4(t);return n._methodName="FieldValue.increment",new es(n)}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4={Firestore:QC,GeoPoint:lp,Timestamp:Ot,Blob:GC,Transaction:YC,WriteBatch:XC,DocumentReference:xn,DocumentSnapshot:vc,Query:Oe,QueryDocumentSnapshot:wc,QuerySnapshot:Cy,CollectionReference:ta,FieldPath:bv,FieldValue:es,setLogLevel:F4,CACHE_SIZE_UNLIMITED:UB};function z4(e,t){e.INTERNAL.registerComponent(new Ts("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},$4)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(e){z4(e,(t,n)=>new QC(t,n,new L4)),e.registerVersion(V4,N4)}j4(Nf);const U4={apiKey:"AIzaSyAPy2Umd6nfaBMYZiGdW5jbPWgKanLayDM",authDomain:"aityping.firebaseapp.com",projectId:"aityping",storageBucket:"aityping.appspot.com",messagingSenderId:"404181232928",appId:"1:404181232928:web:cf86451afb462dd5b3fb45"};Nf.initializeApp(U4);const W4=Nf.firestore(),H4=({children:e})=>{const[t,n]=C.useState("");return R.jsx(Nc.Provider,{value:{db:W4,id:t,setID:n},children:e})},q4="/assets/settings-692f56d7.svg";const K4=()=>{const[e,t]=C.useState(!1),[n,i]=C.useState(!1),[r,s]=C.useState(0),[o,a]=C.useState(0),[l,c]=C.useState(0),[u,h]=C.useState(""),[d,f]=C.useState(""),[p,m]=C.useState(null),[_,g]=C.useState(null),y=C.useContext(Hb),v=C.useContext(Nc),w=async()=>{t(!0);const q=await y.openai.chat.completions.create({messages:[{role:"user",content:"Dame un texto de entre 80 y 100 palabras acerca de un suceso historico para el mundo de la programacin"}],model:"gpt-3.5-turbo"});h(q.choices[0].message.content)},E=q=>{const et=/[a-zA-Z0-9 .,!?;:"()@#$%&*_+=-]/;if(console.log(q.key),q.key==="Backspace"||q.key==="Tab"||q.key==="ArrowUp"||q.key==="ArrowDown"||q.key==="ArrowLeft"||q.key==="ArrowRight"){q.preventDefault();return}et.test(q.key)||q.preventDefault(),d===""&&m(new Date)},x=q=>{u.length===d.length&&(document.getElementById("pre").focus(),q.currentTarget.readOnly=!0,g(new Date))},T=q=>{f(q.currentTarget.value)},I=()=>{const q=document.getElementById("test");q.readOnly=!1,i(!1),s(0),c(0),a(0),h(""),f(""),m(null),g(null),w()},k=()=>R.jsxs("div",{className:`write-area ${e&&u?"":"hidden"}`,children:[R.jsxs("div",{className:`results ${n?"visible":""}`,children:[R.jsxs("div",{className:"measures",children:[R.jsxs("span",{className:"code",children:["Errors: ",r]}),R.jsxs("span",{className:"code",children:["Words PM: ",o]}),R.jsxs("span",{className:"code",children:["Precision: ",l,"%"]})]}),R.jsx("button",{onClick:I,children:"Repeat"})]}),R.jsx("textarea",{name:"pre",id:"pre",readOnly:!0,value:u}),R.jsx("textarea",{name:"test",id:"test",value:d,onKeyDown:E,onKeyUp:x,onChange:T})]}),M=()=>R.jsxs("div",{className:`landing ${e?"hidden":""}`,children:[R.jsxs("div",{className:"spectacular",children:[R.jsx("div",{className:"container",children:R.jsx("span",{children:"improve your typing skills"})}),R.jsx("div",{className:"line"}),R.jsx("span",{className:"code",children:"Start now"})]}),R.jsx("button",{onClick:w,children:"Practice"})]}),j=()=>R.jsxs("div",{className:"skeleton",children:[R.jsx("div",{className:"loader max"}),R.jsx("div",{className:"loader min"})]}),H=()=>R.jsx("div",{className:"keyboard"});return C.useEffect(()=>{if(p&&_){const q=u.split(""),et=d.split("");let Y=0;for(let at=0;at<q.length;at++)q[at]!==et[at]&&Y++;let G=_.getTime()-p.getTime();G=G/1e3;const tt=et.length*60/G,V=100-Y*100/et.length;s(Y),c(V),a(tt),i(!0);const K=new Date().getTime().toString();v.db.collection("Test").doc(K).set({user:v.id,errors:Y,precision:V,wpm:tt}).then(at=>{}).catch(at=>{console.log(at)})}},[p,_]),R.jsxs("div",{className:"home",id:"home",children:[R.jsx("button",{className:"config",children:R.jsx("img",{src:q4,alt:"config"})}),e&&!u?j():R.jsx(R.Fragment,{}),e&&u?k():M(),e&&u?H():R.jsx(R.Fragment,{})]})};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function ru(e){return e+.5|0}const Xi=(e,t,n)=>Math.max(Math.min(e,n),t);function Ya(e){return Xi(ru(e*2.55),0,255)}function fr(e){return Xi(ru(e*255),0,255)}function pi(e){return Xi(ru(e/2.55)/100,0,1)}function QE(e){return Xi(ru(e*100),0,100)}const mn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ry=[..."0123456789ABCDEF"],G4=e=>Ry[e&15],Q4=e=>Ry[(e&240)>>4]+Ry[e&15],$u=e=>(e&240)>>4===(e&15),Y4=e=>$u(e.r)&&$u(e.g)&&$u(e.b)&&$u(e.a);function X4(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&mn[e[1]]*17,g:255&mn[e[2]]*17,b:255&mn[e[3]]*17,a:t===5?mn[e[4]]*17:255}:(t===7||t===9)&&(n={r:mn[e[1]]<<4|mn[e[2]],g:mn[e[3]]<<4|mn[e[4]],b:mn[e[5]]<<4|mn[e[6]],a:t===9?mn[e[7]]<<4|mn[e[8]]:255})),n}const J4=(e,t)=>e<255?t(e):"";function Z4(e){var t=Y4(e)?G4:Q4;return e?"#"+t(e.r)+t(e.g)+t(e.b)+J4(e.a,t):void 0}const t$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tR(e,t,n){const i=t*Math.min(n,1-n),r=(s,o=(s+e/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function e$(e,t,n){const i=(r,s=(r+e/60)%6)=>n-n*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function n$(e,t,n){const i=tR(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function i$(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}function Sv(e){const n=e.r/255,i=e.g/255,r=e.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=i$(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function Av(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(fr)}function Pv(e,t,n){return Av(tR,e,t,n)}function r$(e,t,n){return Av(n$,e,t,n)}function s$(e,t,n){return Av(e$,e,t,n)}function eR(e){return(e%360+360)%360}function o$(e){const t=t$.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Ya(+t[5]):fr(+t[5]));const r=eR(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=r$(r,s,o):t[1]==="hsv"?i=s$(r,s,o):i=Pv(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function a$(e,t){var n=Sv(e);n[0]=eR(n[0]+t),n=Pv(n),e.r=n[0],e.g=n[1],e.b=n[2]}function l$(e){if(!e)return;const t=Sv(e),n=t[0],i=QE(t[1]),r=QE(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${pi(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const YE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},XE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function c$(){const e={},t=Object.keys(XE),n=Object.keys(YE);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,YE[s]);s=parseInt(XE[o],16),e[a]=[s>>16&255,s>>8&255,s&255]}return e}let zu;function u$(e){zu||(zu=c$(),zu.transparent=[0,0,0,0]);const t=zu[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const h$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function d$(e){const t=h$.exec(e);let n=255,i,r,s;if(t){if(t[7]!==i){const o=+t[7];n=t[8]?Ya(o):Xi(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?Ya(i):Xi(i,0,255)),r=255&(t[4]?Ya(r):Xi(r,0,255)),s=255&(t[6]?Ya(s):Xi(s,0,255)),{r:i,g:r,b:s,a:n}}}function f$(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${pi(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const xg=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Zs=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function p$(e,t,n){const i=Zs(pi(e.r)),r=Zs(pi(e.g)),s=Zs(pi(e.b));return{r:fr(xg(i+n*(Zs(pi(t.r))-i))),g:fr(xg(r+n*(Zs(pi(t.g))-r))),b:fr(xg(s+n*(Zs(pi(t.b))-s))),a:e.a+n*(t.a-e.a)}}function ju(e,t,n){if(e){let i=Sv(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=Pv(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function nR(e,t){return e&&Object.assign(t||{},e)}function JE(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=fr(e[3]))):(t=nR(e,{r:0,g:0,b:0,a:1}),t.a=fr(t.a)),t}function g$(e){return e.charAt(0)==="r"?d$(e):o$(e)}class Ec{constructor(t){if(t instanceof Ec)return t;const n=typeof t;let i;n==="object"?i=JE(t):n==="string"&&(i=X4(t)||u$(t)||g$(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=nR(this._rgb);return t&&(t.a=pi(t.a)),t}set rgb(t){this._rgb=JE(t)}rgbString(){return this._valid?f$(this._rgb):void 0}hexString(){return this._valid?Z4(this._rgb):void 0}hslString(){return this._valid?l$(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,r=t.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=p$(this._rgb,t._rgb,n)),this}clone(){return new Ec(this.rgb)}alpha(t){return this._rgb.a=fr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=ru(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ju(this._rgb,2,t),this}darken(t){return ju(this._rgb,2,-t),this}saturate(t){return ju(this._rgb,1,t),this}desaturate(t){return ju(this._rgb,1,-t),this}rotate(t){return a$(this._rgb,t),this}}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function li(){}const m$=(()=>{let e=0;return()=>e++})();function ht(e){return e===null||typeof e>"u"}function Ct(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function rt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ut(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function on(e,t){return Ut(e)?e:t}function J(e,t){return typeof e>"u"?t:e}const y$=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,iR=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function wt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function pt(e,t,n,i){let r,s,o;if(Ct(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(rt(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function ef(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function nf(e){if(Ct(e))return e.map(nf);if(rt(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=nf(e[n[r]]);return t}return e}function rR(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function _$(e,t,n,i){if(!rR(e))return;const r=t[e],s=n[e];rt(r)&&rt(s)?xc(r,s,i):t[e]=nf(s)}function xc(e,t,n){const i=Ct(t)?t:[t],r=i.length;if(!rt(e))return e;n=n||{};const s=n.merger||_$;let o;for(let a=0;a<r;++a){if(o=i[a],!rt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],e,o,n)}return e}function El(e,t){return xc(e,t,{merger:v$})}function v$(e,t,n){if(!rR(e))return;const i=t[e],r=n[e];rt(i)&&rt(r)?El(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=nf(r))}const ZE={"":e=>e,x:e=>e.x,y:e=>e.y};function w$(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function E$(e){const t=w$(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Ar(e,t){return(ZE[t]||(ZE[t]=E$(t)))(e)}function Cv(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Tc=e=>typeof e<"u",Pr=e=>typeof e=="function",tx=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function x$(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Dt=Math.PI,kt=2*Dt,T$=kt+Dt,rf=Number.POSITIVE_INFINITY,I$=Dt/180,Qt=Dt/2,$r=Dt/4,ex=Dt*2/3,Ji=Math.log10,ii=Math.sign;function xl(e,t,n){return Math.abs(e-t)<n}function nx(e){const t=Math.round(e);e=xl(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ji(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function b$(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((r,s)=>r-s).pop(),t}function ea(e){return!isNaN(parseFloat(e))&&isFinite(e)}function S$(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function sR(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Mn(e){return e*(Dt/180)}function Rv(e){return e*(180/Dt)}function ix(e){if(!Ut(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function oR(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Dt&&(s+=kt),{angle:s,distance:r}}function ky(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function A$(e,t){return(e-t+T$)%kt-Dt}function ln(e){return(e%kt+kt)%kt}function Ic(e,t,n,i){const r=ln(e),s=ln(t),o=ln(n),a=ln(s-r),l=ln(o-r),c=ln(r-s),u=ln(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function ae(e,t,n){return Math.max(t,Math.min(n,e))}function P$(e){return ae(e,-32768,32767)}function vi(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function kv(e,t,n){n=n||(o=>e[o]<t);let i=e.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const wi=(e,t,n,i)=>kv(e,n,i?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),C$=(e,t,n)=>kv(e,n,i=>e[i][t]>=n);function R$(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}const aR=["push","pop","shift","splice","unshift"];function k$(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),aR.forEach(n=>{const i="_onData"+Cv(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function rx(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(aR.forEach(s=>{delete e[s]}),delete e._chartjs)}function lR(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const cR=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function uR(e,t){let n=[],i=!1;return function(...r){n=r,i||(i=!0,cR.call(window,()=>{i=!1,e.apply(t,n)}))}}function D$(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const Dv=e=>e==="start"?"left":e==="end"?"right":"center",Se=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,M$=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function hR(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=ae(Math.min(wi(a,l,c).lo,n?i:wi(t,l,o.getPixelForValue(c)).lo),0,i-1)),d?s=ae(Math.max(wi(a,o.axis,u,!0).hi+1,n?0:wi(t,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function dR(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Uu=e=>e===0||e===1,sx=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*kt/n)),ox=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*kt/n)+1,Tl={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Qt)+1,easeOutSine:e=>Math.sin(e*Qt),easeInOutSine:e=>-.5*(Math.cos(Dt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Uu(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Uu(e)?e:sx(e,.075,.3),easeOutElastic:e=>Uu(e)?e:ox(e,.075,.3),easeInOutElastic(e){return Uu(e)?e:e<.5?.5*sx(e*2,.1125,.45):.5+.5*ox(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Tl.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Tl.easeInBounce(e*2)*.5:Tl.easeOutBounce(e*2-1)*.5+.5};function Mv(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ax(e){return Mv(e)?e:new Ec(e)}function Tg(e){return Mv(e)?e:new Ec(e).saturate(.5).darken(.1).hexString()}const V$=["x","y","borderWidth","radius","tension"],N$=["color","borderColor","backgroundColor"];function O$(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:N$},numbers:{type:"number",properties:V$}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function L$(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const lx=new Map;function F$(e,t){t=t||{};const n=e+JSON.stringify(t);let i=lx.get(n);return i||(i=new Intl.NumberFormat(e,t),lx.set(n,i)),i}function su(e,t,n){return F$(t,n).format(e)}const fR={values(e){return Ct(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=B$(e,n)}const o=Ji(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),su(e,i,l)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Ji(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?fR.numeric.call(this,e,t,n):""}};function B$(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var _p={formatters:fR};function $$(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_p.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Vs=Object.create(null),Dy=Object.create(null);function Il(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];e=e[s]||(e[s]=Object.create(null))}return e}function Ig(e,t,n){return typeof t=="string"?xc(Il(e,t),n):xc(Il(e,""),t)}class z${constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Tg(r.backgroundColor),this.hoverBorderColor=(i,r)=>Tg(r.borderColor),this.hoverColor=(i,r)=>Tg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Ig(this,t,n)}get(t){return Il(this,t)}describe(t,n){return Ig(Dy,t,n)}override(t,n){return Ig(Vs,t,n)}route(t,n,i,r){const s=Il(this,t),o=Il(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return rt(l)?Object.assign({},c,l):J(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var Wt=new z$({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[O$,L$,$$]);function j$(e){return!e||ht(e.size)||ht(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function sf(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function U$(e,t,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Ct(h))o=sf(e,r,s,o,h);else if(Ct(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Ct(d)&&(o=sf(e,r,s,o,d));e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function zr(e,t,n){const i=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function cx(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function My(e,t,n,i){pR(e,t,n,i,null)}function pR(e,t,n,i,r){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,m=t.radius;let _=(p||0)*I$;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(_),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,m,0,0,kt):e.arc(n,i,m,0,kt),e.closePath();break;case"triangle":u=r?r/2:m,e.moveTo(n+Math.sin(_)*u,i-Math.cos(_)*m),_+=ex,e.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*m),_+=ex,e.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(_+$r)*l,h=Math.cos(_+$r)*(r?r/2-c:l),a=Math.sin(_+$r)*l,d=Math.sin(_+$r)*(r?r/2-c:l),e.arc(n-h,i-a,c,_-Dt,_-Qt),e.arc(n+d,i-o,c,_-Qt,_),e.arc(n+h,i+a,c,_,_+Qt),e.arc(n-d,i+o,c,_+Qt,_+Dt),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}_+=$r;case"rectRot":h=Math.cos(_)*(r?r/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(r?r/2:m),e.moveTo(n-h,i-a),e.lineTo(n+d,i-o),e.lineTo(n+h,i+a),e.lineTo(n-d,i+o),e.closePath();break;case"crossRot":_+=$r;case"cross":h=Math.cos(_)*(r?r/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(r?r/2:m),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"star":h=Math.cos(_)*(r?r/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(r?r/2:m),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o),_+=$r,h=Math.cos(_)*(r?r/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,d=Math.sin(_)*(r?r/2:m),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(_)*m,a=Math.sin(_)*m,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(_)*(r?r/2:m),i+Math.sin(_)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Ei(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function vp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function wp(e){e.restore()}function W$(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else r==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function H$(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function q$(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ht(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function K$(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function G$(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Ns(e,t,n,i,r,s={}){const o=Ct(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(e.save(),e.font=r.string,q$(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&G$(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),ht(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),K$(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function bc(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Dt,Dt,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Dt,Qt,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Qt,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Qt,!0),e.lineTo(n+o.topLeft,i)}const Q$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Y$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function X$(e,t){const n=(""+e).match(Q$);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const J$=e=>+e||0;function Vv(e,t){const n={},i=rt(t),r=i?Object.keys(t):t,s=rt(e)?i?o=>J(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)n[o]=J$(s(o));return n}function gR(e){return Vv(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ps(e){return Vv(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Me(e){const t=gR(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ne(e,t){e=e||{},t=t||Wt.font;let n=J(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=J(e.style,t.style);i&&!(""+i).match(Y$)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:J(e.family,t.family),lineHeight:X$(J(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:J(e.weight,t.weight),string:""};return r.string=j$(r),r}function Xa(e,t,n,i){let r=!0,s,o,a;for(s=0,o=e.length;s<o;++s)if(a=e[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),n!==void 0&&Ct(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function Z$(e,t,n){const{min:i,max:r}=e,s=iR(t,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Fr(e,t){return Object.assign(Object.create(e),t)}function Nv(e,t=[""],n,i,r=()=>e[0]){const s=n||e;typeof i>"u"&&(i=vR("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Nv([a,...e],t,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return yR(a,l,()=>az(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return hx(a).includes(l)},ownKeys(a){return hx(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function na(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:mR(e,i),setContext:s=>na(e,s,n,i),override:s=>na(e.override(s),t,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete e[o],!0},get(s,o,a){return yR(s,o,()=>ez(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(s,o,a){return e[o]=a,delete s[o],!0}})}function mR(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Pr(n)?n:()=>n,isIndexable:Pr(i)?i:()=>i}}const tz=(e,t)=>e?e+Cv(t):t,Ov=(e,t)=>rt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function yR(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function ez(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];return Pr(a)&&o.isScriptable(t)&&(a=nz(t,a,e,n)),Ct(a)&&a.length&&(a=iz(t,a,e,o.isIndexable)),Ov(t,a)&&(a=na(a,r,s&&s[t],o)),a}function nz(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||i);return a.delete(e),Ov(e,l)&&(l=Lv(r._scopes,r,e,l)),l}function iz(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(e))return t[s.index%t.length];if(rt(t[0])){const l=t,c=r._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=Lv(c,r,e,u);t.push(na(h,s,o&&o[e],a))}}return t}function _R(e,t,n){return Pr(e)?e(t,n):e}const rz=(e,t)=>e===!0?t:typeof e=="string"?Ar(t,e):void 0;function sz(e,t,n,i,r){for(const s of t){const o=rz(n,s);if(o){e.add(o);const a=_R(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Lv(e,t,n,i){const r=t._rootScopes,s=_R(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let l=ux(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=ux(a,o,s,l,i),l===null)?!1:Nv(Array.from(a),[""],r,s,()=>oz(t,n,i))}function ux(e,t,n,i,r){for(;n;)n=sz(e,t,n,i,r);return n}function oz(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];return Ct(r)&&rt(n)?n:r||{}}function az(e,t,n,i){let r;for(const s of t)if(r=vR(tz(s,e),n),typeof r<"u")return Ov(e,r)?Lv(n,i,e,r):r}function vR(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function hx(e){let t=e._keys;return t||(t=e._keys=lz(e._scopes)),t}function lz(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function wR(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={r:r.parse(Ar(u,s),c)};return o}const cz=Number.EPSILON||1e-14,ia=(e,t)=>t<e.length&&!e[t].skip&&e[t],ER=e=>e==="x"?"y":"x";function uz(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,a=ky(s,r),l=ky(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function hz(e,t,n){const i=e.length;let r,s,o,a,l,c=ia(e,0);for(let u=0;u<i-1;++u)if(l=c,c=ia(e,u+1),!(!l||!c)){if(xl(t[u],0,cz)){n[u]=n[u+1]=0;continue}r=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*t[u],n[u+1]=s*o*t[u])}}function dz(e,t,n="x"){const i=ER(n),r=e.length;let s,o,a,l=ia(e,0);for(let c=0;c<r;++c){if(o=a,a=l,l=ia(e,c+1),!a)continue;const u=a[n],h=a[i];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${i}`]=h-s*t[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${i}`]=h+s*t[c])}}function fz(e,t="x"){const n=ER(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=ia(e,0);for(o=0;o<i;++o)if(a=l,l=c,c=ia(e,o+1),!!l){if(c){const u=c[t]-l[t];r[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?ii(r[o-1])!==ii(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}hz(e,r,s),dz(e,s,t)}function Wu(e,t,n){return Math.max(Math.min(e,n),t)}function pz(e,t){let n,i,r,s,o,a=Ei(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=a,a=n<i-1&&Ei(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=Wu(r.cp1x,t.left,t.right),r.cp1y=Wu(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Wu(r.cp2x,t.left,t.right),r.cp2y=Wu(r.cp2y,t.top,t.bottom)))}function gz(e,t,n,i,r){let s,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")fz(e,r);else{let c=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=uz(c,a,e[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&pz(e,n)}function xR(){return typeof window<"u"&&typeof document<"u"}function Fv(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function of(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Ep=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function mz(e,t){return Ep(e).getPropertyValue(t)}const yz=["top","right","bottom","left"];function gs(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=yz[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const _z=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function vz(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(_z(r,s,e.target))a=r,l=s;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Gr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=Ep(n),s=r.boxSizing==="border-box",o=gs(r,"padding"),a=gs(r,"border","width"),{x:l,y:c,box:u}=vz(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function wz(e,t,n){let i,r;if(t===void 0||n===void 0){const s=Fv(e);if(!s)t=e.clientWidth,n=e.clientHeight;else{const o=s.getBoundingClientRect(),a=Ep(s),l=gs(a,"border","width"),c=gs(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,i=of(a.maxWidth,s,"clientWidth"),r=of(a.maxHeight,s,"clientHeight")}}return{width:t,height:n,maxWidth:i||rf,maxHeight:r||rf}}const Hu=e=>Math.round(e*10)/10;function Ez(e,t,n,i){const r=Ep(e),s=gs(r,"margin"),o=of(r.maxWidth,e,"clientWidth")||rf,a=of(r.maxHeight,e,"clientHeight")||rf,l=wz(e,t,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=gs(r,"border","width"),f=gs(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Hu(Math.min(c,o,l.maxWidth)),u=Hu(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Hu(c/2)),(t!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Hu(Math.floor(u*i))),{width:c,height:u}}function dx(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const xz=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function fx(e,t){const n=mz(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Qr(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Tz(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function Iz(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=Qr(e,r,n),a=Qr(r,s,n),l=Qr(s,t,n),c=Qr(o,a,n),u=Qr(a,l,n);return Qr(c,u,n)}const bz=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Sz=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Mo(e,t,n){return e?bz(t,n):Sz()}function TR(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function IR(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function bR(e){return e==="angle"?{between:Ic,compare:A$,normalize:ln}:{between:vi,compare:(t,n)=>t-n,normalize:t=>t}}function px({start:e,end:t,count:n,loop:i,style:r}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:r}}function Az(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=bR(i),l=t.length;let{start:c,end:u,loop:h}=e,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(t[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function SR(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=bR(i),{start:u,end:h,loop:d,style:f}=Az(e,t,n),p=[];let m=!1,_=null,g,y,v;const w=()=>l(r,v,g)&&a(r,v)!==0,E=()=>a(s,g)===0||l(s,v,g),x=()=>m||w(),T=()=>!m||E();for(let I=u,k=u;I<=h;++I)y=t[I%o],!y.skip&&(g=c(y[i]),g!==v&&(m=l(g,r,s),_===null&&x()&&(_=a(g,r)===0?I:k),_!==null&&T()&&(p.push(px({start:_,end:I,loop:d,count:o,style:f})),_=null),k=I,v=g));return _!==null&&p.push(px({start:_,end:h,loop:d,count:o,style:f})),p}function AR(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=SR(i[r],e.points,t);s.length&&n.push(...s)}return n}function Pz(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}function Cz(e,t,n,i){const r=e.length,s=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:t%r,end:(l-1)%r,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function Rz(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=Pz(n,r,s,i);if(i===!0)return gx(e,[{start:o,end:a,loop:s}],n,t);const l=a<o?a+r:a,c=!!e._fullLoop&&o===0&&a===r-1;return gx(e,Cz(n,o,l,c),n,t)}function gx(e,t,n,i){return!i||!i.setContext||!n?t:kz(e,t,n,i)}function kz(e,t,n,i){const r=e._chart.getContext(),s=mx(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(p,m,_,g){const y=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=y;for(;n[m%l].skip;)m+=y;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:_,style:g}),u=g,h=m%l)}}for(const p of t){h=a?h:p.start;let m=n[h%l],_;for(d=h+1;d<=p.end;d++){const g=n[d%l];_=mx(i.setContext(Fr(r,{type:"segment",p0:m,p1:g,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Dz(_,u)&&f(h,d-1,p.loop,u),m=g,u=_}h<d-1&&f(h,d-1,p.loop,u)}return c}function mx(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Dz(e,t){if(!t)return!1;const n=[],i=function(r,s){return Mv(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(e,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class Mz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=cR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),n+=s.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ui=new Mz;const yx="transparent",Vz={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=ax(e||yx),r=i.valid&&ax(t||yx);return r&&r.valid?r.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class Nz{constructor(t,n,i,r){const s=n[i];r=Xa([t.to,r,s,t.from]);const o=Xa([t.from,s,r]);this._active=!0,this._fn=t.fn||Vz[t.type||typeof o],this._easing=Tl[t.easing]||Tl.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Xa([t.to,n,r,t.from]),this._from=Xa([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class PR{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!rt(t))return;const n=Object.keys(Wt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!rt(s))return;const o={};for(const a of n)o[a]=s[a];(Ct(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,n){const i=n.options,r=Lz(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Oz(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,n){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,n));continue}const u=n[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){t[c]=u;continue}s[c]=h=new Nz(d,t,c,u),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return ui.add(this._chart,i),!0}}function Oz(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=e[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Lz(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function _x(e,t){const n=e&&e.options||{},i=n.reverse,r=n.min===void 0?t:0,s=n.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function Fz(e,t,n){if(n===!1)return!1;const i=_x(e,n),r=_x(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Bz(e){let t,n,i,r;return rt(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:e===!1}}function CR(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function vx(e,t,n,i={}){const r=e.keys,s=i.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=e.values[l],Ut(c)&&(s||t===0||ii(t)===ii(c))&&(t+=c)}return t}}function $z(e){const t=Object.keys(e),n=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],n[i]={x:s,y:e[s]};return n}function wx(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function zz(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function jz(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Uz(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function Ex(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=e[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function xx(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=zz(s,o,i),h=t.length;let d;for(let f=0;f<h;++f){const p=t[f],{[l]:m,[c]:_}=p,g=p._stacks||(p._stacks={});d=g[c]=Uz(r,u,m),d[a]=_,d._top=Ex(d,o,!0,i.type),d._bottom=Ex(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=_}}function bg(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function Wz(e,t){return Fr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Hz(e,t,n){return Fr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Da(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Sg=e=>e==="reset"||e==="none",Tx=(e,t)=>t?e:Object.assign({},e),qz=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:CR(n,!0),values:null};class Ln{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=wx(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Da(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,s=n.xAxisID=J(i.xAxisID,bg(t,"x")),o=n.yAxisID=J(i.yAxisID,bg(t,"y")),a=n.rAxisID=J(i.rAxisID,bg(t,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&rx(this._data,this),t._stacked&&Da(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(rt(n))this._data=$z(n);else if(i!==n){if(i){rx(i,this);const r=this._cachedMeta;Da(r),r._parsed=[]}n&&Object.isExtensible(n)&&k$(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=wx(n.vScale,n),n.stack!==i.stack&&(r=!0,Da(n),n.stack=i.stack),this._resyncElements(t),(r||s!==n._stacked)&&xx(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=t===0&&n===r.length?!0:i._sorted,c=t>0&&i._parsed[t-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{Ct(r[t])?d=this.parseArrayData(i,r,t,n):rt(r[t])?d=this.parseObjectData(i,r,t,n):d=this.parsePrimitiveData(i,r,t,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+t]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&xx(this,d)}parsePrimitiveData(t,n,i,r){const{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,p;for(d=0,f=r;d<f;++d)p=d+i,h[d]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(t,n,i,r){const{xScale:s,yScale:o}=t,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,n,i,r){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=n[d],c[u]={x:s.parse(Ar(f,a),d),y:o.parse(Ar(f,l),d)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const r=this.chart,s=this._cachedMeta,o=n[t.axis],a={keys:CR(r,!0),values:n._stacks[t.axis]._visualValues};return vx(a,o,s.index,{mode:i})}updateRangeFromParsed(t,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=vx(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=this._getOtherScale(t),l=qz(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=jz(a);let d,f;function p(){f=r[d];const m=f[a.axis];return!Ut(f[t.axis])||u>m||h<m}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,t,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][t.axis],Ut(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=Bz(J(this.options.clip,Fz(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(t,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(t,s))}for(u=0;u<o.length;++u)o[u].draw(t,s)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=Hz(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=Wz(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=t+"-"+n,a=s[o],l=this.enableOptionSharing&&Tc(i);if(a)return Tx(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Wt.elements[t]),p=()=>this.getContext(i,r,n),m=c.resolveNamedOptions(d,f,p,h);return m.$shared&&(m.$shared=l,s[o]=Object.freeze(Tx(m,l))),m}_resolveAnimations(t,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(t,i,n))}const c=new PR(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Sg(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(t,n,i,r){Sg(r)?Object.assign(t,i):this._resolveAnimations(n,r).update(t,i)}updateSharedOptions(t,n,i){t&&!Sg(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,r){t.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,n,i=!0){const r=this._cachedMeta,s=r.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,n),i&&this.updateElements(s,t,n,"reset")}updateElements(t,n,i,r){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,n);i._stacked&&Da(i,r)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,r]=t;this[n](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}N(Ln,"defaults",{}),N(Ln,"datasetElementType",null),N(Ln,"dataElementType",null);function Kz(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=lR(i.sort((r,s)=>r-s))}return e._cache.$bar}function Gz(e){const t=e.iScale,n=Kz(t,e.type);let i=t._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Tc(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function Qz(e,t,n,i){const r=n.barThickness;let s,o;return ht(r)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[e]-s/2}}function Yz(e,t,n,i){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function Xz(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function RR(e,t,n,i){return Ct(e)?Xz(e,t,n,i):t[n.axis]=n.parse(e,i),t}function Ix(e,t,n,i){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(RR(d,h,s,c));return l}function Ag(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Jz(e,t,n){return e!==0?ii(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Zz(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}function t5(e,t,n,i){let r=t.borderSkipped;const s={};if(!r){e.borderSkipped=s;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Zz(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[bx(u,o,a,l)]=!0,r=c)),s[bx(r,o,a,l)]=!0,e.borderSkipped=s}function bx(e,t,n,i){return i?(e=e5(e,t,n),e=Sx(e,n,t)):e=Sx(e,t,n),e}function e5(e,t,n){return e===t?n:e===n?t:e}function Sx(e,t,n){return e==="start"?t:e==="end"?n:e}function n5(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Ah extends Ln{parsePrimitiveData(t,n,i,r){return Ix(t,n,i,r)}parseArrayData(t,n,i,r){return Ix(t,n,i,r)}parseObjectData(t,n,i,r){const{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,p,m;for(d=i,f=i+r;d<f;++d)m=n[d],p={},p[s.axis]=s.parse(Ar(m,c),d),h.push(RR(Ar(m,u),p,o,d));return h}updateRangeFromParsed(t,n,i,r){super.updateRangeFromParsed(t,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(t),o=s._custom,a=Ag(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r);for(let f=n;f<n+i;f++){const p=this.getParsed(f),m=s||ht(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),_=this._calculateBarIndexPixels(f,u),g=(p._stacks||{})[a.axis],y={horizontal:c,base:m.base,enableBorderRadius:!g||Ag(p._custom)||o===g._top||o===g._bottom,x:c?m.head:_.center,y:c?_.center:m.head,height:c?_.size:Math.abs(m.size),width:c?Math.abs(m.size):_.size};d&&(y.options=h||this.resolveDataElementOptions(f,t[f].active?"active":r));const v=y.options||t[f].options;t5(y,v,g,o),n5(y,v,u.ratio),this.updateElement(t[f],f,y,r)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(ht(u)||isNaN(u))return!0};for(const l of r)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,i){const r=this._getStacks(t,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=t.barThickness;return{min:a||Gz(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),c=l._custom,u=Ag(c);let h=l[n.axis],d=0,f=i?this.applyStack(n,l,i):h,p,m;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&ii(h)!==ii(c.barEnd)&&(d=0),d+=h);const _=!ht(s)&&!u?s:d;let g=n.getPixelForValue(_);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(d+f):p=g,m=p-g,Math.abs(m)<o){m=Jz(m,n,a)*o,h===a&&(g-=m/2);const y=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),w=Math.min(y,v),E=Math.max(y,v);g=Math.max(Math.min(g,E),w),p=g+m,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(g))}if(g===n.getPixelForValue(a)){const y=ii(m)*n.getLineWidthForValue(a)/2;g+=y,m-=y}return{size:m,base:g,head:p,center:p+m/2}}_calculateBarIndexPixels(t,n){const i=n.scale,r=this.options,s=r.skipNull,o=J(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(t):n.stackCount,u=r.barThickness==="flex"?Yz(t,n,r,c):Qz(t,n,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&i[s].draw(this._ctx)}}N(Ah,"id","bar"),N(Ah,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),N(Ah,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ph extends Ln{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,r){const s=super.parsePrimitiveData(t,n,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(t,n,i,r){const s=super.parseArrayData(t,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=J(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(t,n,i,r){const s=super.parseObjectData(t,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=J(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,r),u=o.axis,h=a.axis;for(let d=n;d<n+i;d++){const f=t[d],p=!s&&this.getParsed(d),m={},_=m[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),g=m[h]=s?a.getBasePixel():a.getPixelForValue(p[h]);m.skip=isNaN(_)||isNaN(g),c&&(m.options=l||this.resolveDataElementOptions(d,f.active?"active":r),s&&(m.options.radius=0)),this.updateElement(f,d,m,r)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return n!=="active"&&(r.radius=0),r.radius+=J(i&&i._custom,s),r}}N(Ph,"id","bubble"),N(Ph,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),N(Ph,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function i5(e,t,n){let i=1,r=1,s=0,o=0;if(t<kt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(v,w,E)=>Ic(v,a,l,!0)?1:Math.max(w,w*n,E,E*n),p=(v,w,E)=>Ic(v,a,l,!0)?-1:Math.min(w,w*n,E,E*n),m=f(0,c,h),_=f(Qt,u,d),g=p(Dt,c,h),y=p(Dt+Qt,u,d);i=(m-g)/2,r=(_-y)/2,s=-(m+g)/2,o=-(_+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class us extends Ln{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(rt(i[t])){const{key:l="value"}=this._parsing;s=c=>+Ar(i[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Mn(this.options.rotation-90)}_getCircumference(){return Mn(this.options.circumference)}_getRotationExtents(){let t=kt,n=-kt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();t=Math.min(t,s),n=Math.max(n,s+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(y$(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:m}=i5(h,u,l),_=(i.width-o)/d,g=(i.height-o)/f,y=Math.max(Math.min(_,g)/2,0),v=iR(this.options.radius,y),w=Math.max(v*l,0),E=(v-w)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=m*v,r.total=this.calculateTotal(),this.outerRadius=v-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*c,0),this.updateElements(s,0,s.length,t)}_circumference(t,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/kt)}updateElements(t,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(n,r);let g=this._getRotation(),y;for(y=0;y<n;++y)g+=this._circumference(y,s);for(y=n;y<n+i;++y){const v=this._circumference(y,s),w=t[y],E={x:u+this.offsetX,y:h+this.offsetY,startAngle:g,endAngle:g+v,circumference:v,outerRadius:p,innerRadius:f};_&&(E.options=m||this.resolveDataElementOptions(y,w.active?"active":r)),g+=v,this.updateElement(w,y,E,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,r;for(r=0;r<n.length;r++){const s=t._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?kt*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=su(n._parsed[t],i.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let n=0;const i=this.chart;let r,s,o,a,l;if(!t){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),t=o.data,a=o.controller;break}}if(!t)return 0;for(r=0,s=t.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,r=t.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(J(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}N(us,"id","doughnut"),N(us,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),N(us,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),N(us,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class bl extends Ln{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=hR(n,r,o);this._drawStart=a,this._drawCount=l,dR(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},t),this.updateElements(r,a,l,t)}updateElements(t,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),d=o.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,_=ea(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||r==="none",y=n+i,v=t.length;let w=n>0&&this.getParsed(n-1);for(let E=0;E<v;++E){const x=t[E],T=g?x:{};if(E<n||E>=y){T.skip=!0;continue}const I=this.getParsed(E),k=ht(I[f]),M=T[d]=o.getPixelForValue(I[d],E),j=T[f]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[f],E);T.skip=isNaN(M)||isNaN(j)||k,T.stop=E>0&&Math.abs(I[d]-w[d])>_,m&&(T.parsed=I,T.raw=c.data[E]),h&&(T.options=u||this.resolveDataElementOptions(E,x.active?"active":r)),g||this.updateElement(x,E,T,r),w=I}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}N(bl,"id","line"),N(bl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),N(bl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Sl extends Ln{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=su(n._parsed[t].r,i.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,n,i,r){return wR.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/t.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*Dt;let f=d,p;const m=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,r,m);for(p=n;p<n+i;p++){const _=t[p];let g=f,y=f+this._computeAngle(p,r,m),v=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=y,s&&(l.animateScale&&(v=0),l.animateRotate&&(g=y=d));const w={x:u,y:h,innerRadius:0,outerRadius:v,startAngle:g,endAngle:y,options:this.resolveDataElementOptions(p,_.active?"active":r)};this.updateElement(_,p,w,r)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?Mn(this.resolveDataElementOptions(t,n).angle||i):0}}N(Sl,"id","polarArea"),N(Sl,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),N(Sl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Vy extends us{}N(Vy,"id","pie"),N(Vy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ch extends Ln{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,r){return wR.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(r,0,r.length,t)}updateElements(t,n,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=n;a<n+i;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,d=o?s.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,r)}}}N(Ch,"id","radar"),N(Ch,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),N(Ch,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Rh extends Ln{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:s,count:o}=hR(n,i,r);if(this._drawStart=s,this._drawCount=o,dR(n)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h),f=o.axis,p=a.axis,{spanGaps:m,segment:_}=this.options,g=ea(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||r==="none";let v=n>0&&this.getParsed(n-1);for(let w=n;w<n+i;++w){const E=t[w],x=this.getParsed(w),T=y?E:{},I=ht(x[p]),k=T[f]=o.getPixelForValue(x[f],w),M=T[p]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[p],w);T.skip=isNaN(k)||isNaN(M)||I,T.stop=w>0&&Math.abs(x[f]-v[f])>g,_&&(T.parsed=x,T.raw=c.data[w]),d&&(T.options=h||this.resolveDataElementOptions(w,E.active?"active":r)),y||this.updateElement(E,w,T,r),v=x}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,o)/2}}N(Rh,"id","scatter"),N(Rh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),N(Rh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var r5=Object.freeze({__proto__:null,BarController:Ah,BubbleController:Ph,DoughnutController:us,LineController:bl,PieController:Vy,PolarAreaController:Sl,RadarController:Ch,ScatterController:Rh});function jr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Bv{constructor(t){N(this,"options");this.options=t||{}}static override(t){Object.assign(Bv.prototype,t)}init(){}formats(){return jr()}parse(){return jr()}format(){return jr()}add(){return jr()}diff(){return jr()}startOf(){return jr()}endOf(){return jr()}}var s5={_date:Bv};function o5(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const l=a._reversePixels?C$:wi;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(s,t,n-u),d=l(s,t,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,t,n)}return{lo:0,hi:s.length-1}}function ou(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=o5(s[a],t,o,r);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function a5(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Pg(e,t,n,i,r){const s=[];return!r&&!e.isPointInArea(t)||ou(e,n,t,function(a,l,c){!r&&!Ei(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function l5(e,t,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=oR(o,{x:t.x,y:t.y});Ic(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return ou(e,n,t,s),r}function c5(e,t,n,i,r,s){let o=[];const a=a5(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(t.x,t.y,r);if(i&&!f)return;const p=u.getCenterPoint(r);if(!(!!s||e.isPointInArea(p))&&!f)return;const _=a(t,p);_<l?(o=[{element:u,datasetIndex:h,index:d}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:d})}return ou(e,n,t,c),o}function Cg(e,t,n,i,r,s){return!s&&!e.isPointInArea(t)?[]:n==="r"&&!i?l5(e,t,n,r):c5(e,t,n,i,r,s)}function Ax(e,t,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ou(e,n,t,(l,c,u)=>{l[o](t[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var u5={evaluateInteractionItems:ou,modes:{index(e,t,n,i){const r=Gr(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Pg(e,r,s,i,o):Cg(e,r,s,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,i){const r=Gr(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Pg(e,r,s,i,o):Cg(e,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,i){const r=Gr(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return Pg(e,r,s,i,o)},nearest(e,t,n,i){const r=Gr(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return Cg(e,r,s,n.intersect,i,o)},x(e,t,n,i){const r=Gr(t,e);return Ax(e,r,"x",n.intersect,i)},y(e,t,n,i){const r=Gr(t,e);return Ax(e,r,"y",n.intersect,i)}}};const kR=["left","top","right","bottom"];function Ma(e,t){return e.filter(n=>n.pos===t)}function Px(e,t){return e.filter(n=>kR.indexOf(n.pos)===-1&&n.box.axis===t)}function Va(e,t){return e.sort((n,i)=>{const r=t?i:n,s=t?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function h5(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function d5(e){const t={};for(const n of e){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!kR.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function f5(e,t){const n=d5(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return n}function p5(e){const t=h5(e),n=Va(t.filter(c=>c.box.fullSize),!0),i=Va(Ma(t,"left"),!0),r=Va(Ma(t,"right")),s=Va(Ma(t,"top"),!0),o=Va(Ma(t,"bottom")),a=Px(t,"x"),l=Px(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Ma(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Cx(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function DR(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function g5(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!rt(r)){n.size&&(e[r]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,e[r]+=n.size}s.getPadding&&DR(o,s.getPadding());const a=Math.max(0,t.outerWidth-Cx(o,e,"left","right")),l=Math.max(0,t.outerHeight-Cx(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function m5(e){const t=e.maxPadding;function n(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function y5(e,t){const n=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],n[o])}),s}return i(e?["left","right"]:["top","bottom"])}function Ja(e,t,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,y5(a.horizontal,t));const{same:h,other:d}=g5(t,n,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&Ja(r,t,n,i)||u}function qu(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Rx(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,d=c.size||l.height;Tc(c.start)&&(o=c.start),l.fullSize?qu(l,r.left,o,n.outerWidth-r.right-r.left,d):qu(l,t.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=t.h*u,d=c.size||l.width;Tc(c.start)&&(s=c.start),l.fullSize?qu(l,s,r.top,d,n.outerHeight-r.bottom-r.top):qu(l,s,t.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}t.x=s,t.y=o}var Pe={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Me(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=p5(e.boxes),l=a.vertical,c=a.horizontal;pt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,_)=>_.box.options&&_.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);DR(d,Me(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=f5(l.concat(c),h);Ja(a.fullSize,f,h,p),Ja(l,f,h,p),Ja(c,f,h,p)&&Ja(l,f,h,p),m5(f),Rx(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Rx(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},pt(a.chartArea,m=>{const _=m.box;Object.assign(_,e.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class MR{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,r){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(t){return!0}updateConfig(t){}}class _5 extends MR{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const kh="$chartjs",v5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kx=e=>e===null||e==="";function w5(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[kh]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",kx(r)){const s=fx(e,"width");s!==void 0&&(e.width=s)}if(kx(i))if(e.style.height==="")e.height=e.width/(t||2);else{const s=fx(e,"height");s!==void 0&&(e.height=s)}return e}const VR=xz?{passive:!0}:!1;function E5(e,t,n){e.addEventListener(t,n,VR)}function x5(e,t,n){e.canvas.removeEventListener(t,n,VR)}function T5(e,t){const n=v5[e.type]||e.type,{x:i,y:r}=Gr(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:r!==void 0?r:null}}function af(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function I5(e,t,n){const i=e.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||af(a.addedNodes,i),o=o&&!af(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function b5(e,t,n){const i=e.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||af(a.removedNodes,i),o=o&&!af(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Sc=new Map;let Dx=0;function NR(){const e=window.devicePixelRatio;e!==Dx&&(Dx=e,Sc.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function S5(e,t){Sc.size||window.addEventListener("resize",NR),Sc.set(e,t)}function A5(e){Sc.delete(e),Sc.size||window.removeEventListener("resize",NR)}function P5(e,t,n){const i=e.canvas,r=i&&Fv(i);if(!r)return;const s=uR((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),S5(e,s),o}function Rg(e,t,n){n&&n.disconnect(),t==="resize"&&A5(e)}function C5(e,t,n){const i=e.canvas,r=uR(s=>{e.ctx!==null&&n(T5(s,e))},e);return E5(i,t,r),r}class R5 extends MR{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(w5(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[kh])return!1;const i=n[kh].initial;["height","width"].forEach(s=>{const o=i[s];ht(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[kh],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),o={attach:I5,detach:b5,resize:P5}[n]||C5;r[n]=o(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),r=i[n];if(!r)return;({attach:Rg,detach:Rg,resize:Rg}[n]||x5)(t,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,r){return Ez(t,n,i,r)}isAttached(t){const n=Fv(t);return!!(n&&n.isConnected)}}function k5(e){return!xR()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?_5:R5}class zn{constructor(){N(this,"x");N(this,"y");N(this,"active",!1);N(this,"options");N(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return ea(this.x)&&ea(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}N(zn,"defaults",{}),N(zn,"defaultRoutes");function D5(e,t){const n=e.options.ticks,i=M5(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?N5(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return O5(t,c,s,o/r),c;const u=V5(s,t,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Ku(t,c,u,ht(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Ku(t,c,u,s[h],s[h+1]);return Ku(t,c,u,l,ht(f)?t.length:l+f),c}return Ku(t,c,u),c}function M5(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}function V5(e,t,n){const i=L5(e),r=t.length/n;if(!i)return Math.max(r,1);const s=b$(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function N5(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function O5(e,t,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<e.length;o++)o===s&&(t.push(e[o]),r++,s=n[r*i])}function Ku(e,t,n,i,r){const s=J(i,0),o=Math.min(J(r,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(s+a*n))}function L5(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const F5=e=>e==="left"?"right":e==="right"?"left":e,Mx=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Vx=(e,t)=>Math.min(t||e,e);function Nx(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function B5(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function $5(e,t){pt(e,n=>{const i=n.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Na(e){return e.drawTicks?e.tickLength:0}function Ox(e,t){if(!e.display)return 0;const n=ne(e.font,t),i=Me(e.padding);return(Ct(e.text)?e.text.length:1)*n.lineHeight+i.height}function z5(e,t){return Fr(e,{scale:t,type:"scale"})}function j5(e,t,n){return Fr(e,{tick:n,index:t,type:"tick"})}function U5(e,t,n){let i=Dv(e);return(n&&t!=="right"||!n&&t==="right")&&(i=F5(i)),i}function W5(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,d,f,p;const m=o-r,_=a-s;if(e.isHorizontal()){if(f=Se(i,s,a),rt(n)){const g=Object.keys(n)[0],y=n[g];p=u[g].getPixelForValue(y)+m-t}else n==="center"?p=(c.bottom+c.top)/2+m-t:p=Mx(e,n,t);d=a-s}else{if(rt(n)){const g=Object.keys(n)[0],y=n[g];f=u[g].getPixelForValue(y)-_+t}else n==="center"?f=(c.left+c.right)/2-_+t:f=Mx(e,n,t);p=Se(i,o,r),h=n==="left"?-Qt:Qt}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class qs extends zn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return t=on(t,Number.POSITIVE_INFINITY),n=on(n,Number.NEGATIVE_INFINITY),i=on(i,Number.POSITIVE_INFINITY),r=on(r,Number.NEGATIVE_INFINITY),{min:on(t,i),max:on(n,r),minDefined:Ut(t),maxDefined:Ut(n)}}getMinMax(t){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:on(n,on(i,n)),max:on(i,on(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Z$(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Nx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=D5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wt(this.options.afterUpdate,[this])}beforeSetDimensions(){wt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),wt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=wt(n.callback,[s.value,i,t],this)}afterTickToLabelConversion(){wt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=Vx(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=ae(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-Na(t.grid)-n.padding-Ox(t.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=Rv(Math.min(Math.asin(ae((u.highest.height+6)/a,-1,1)),Math.asin(ae(l/c,-1,1))-Math.asin(ae(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){wt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ox(r,n.options.font);if(a?(t.width=this.maxWidth,t.height=Na(s)+l):(t.height=this.maxHeight,t.width=Na(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Mn(this.labelRotation),m=Math.cos(p),_=Math.sin(p);if(a){const g=i.mirror?0:_*h.width+m*d.height;t.height=Math.min(this.maxHeight,t.height+g+f)}else{const g=i.mirror?0:m*h.width+_*d.height;t.width=Math.min(this.maxWidth,t.width+g+f)}this._calculatePadding(c,u,_,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*t.width,f=i*n.height):(d=i*t.height,f=r*n.width):s==="start"?f=n.width:s==="end"?d=t.width:s!=="inner"&&(d=t.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=t.height/2;s==="start"?(u=0,h=t.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)ht(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Nx(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Vx(n,i));let c=0,u=0,h,d,f,p,m,_,g,y,v,w,E;for(h=0;h<n;h+=l){if(p=t[h].label,m=this._resolveTickFontOptions(h),r.font=_=m.string,g=s[_]=s[_]||{data:{},gc:[]},y=m.lineHeight,v=w=0,!ht(p)&&!Ct(p))v=sf(r,g.data,g.gc,v,p),w=y;else if(Ct(p))for(d=0,f=p.length;d<f;++d)E=p[d],!ht(E)&&!Ct(E)&&(v=sf(r,g.data,g.gc,v,E),w+=y);o.push(v),a.push(w),c=Math.max(v,c),u=Math.max(w,u)}$5(s,n);const x=o.indexOf(c),T=a.indexOf(u),I=k=>({width:o[k]||0,height:a[k]||0});return{first:I(0),last:I(n-1),widest:I(x),highest:I(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return P$(this._alignToPixels?zr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=j5(this.getContext(),t,i))}return this.$context||(this.$context=z5(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Mn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Na(s),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,_=m/2,g=function(G){return zr(i,G,m)};let y,v,w,E,x,T,I,k,M,j,H,q;if(o==="top")y=g(this.bottom),T=this.bottom-d,k=y-_,j=g(t.top)+_,q=t.bottom;else if(o==="bottom")y=g(this.top),j=t.top,q=g(t.bottom)-_,T=y+_,k=this.top+d;else if(o==="left")y=g(this.right),x=this.right-d,I=y-_,M=g(t.left)+_,H=t.right;else if(o==="right")y=g(this.left),M=t.left,H=g(t.right)-_,x=y+_,I=this.left+d;else if(n==="x"){if(o==="center")y=g((t.top+t.bottom)/2+.5);else if(rt(o)){const G=Object.keys(o)[0],tt=o[G];y=g(this.chart.scales[G].getPixelForValue(tt))}j=t.top,q=t.bottom,T=y+_,k=T+d}else if(n==="y"){if(o==="center")y=g((t.left+t.right)/2);else if(rt(o)){const G=Object.keys(o)[0],tt=o[G];y=g(this.chart.scales[G].getPixelForValue(tt))}x=y-_,I=x-d,M=t.left,H=t.right}const et=J(r.ticks.maxTicksLimit,h),Y=Math.max(1,Math.ceil(h/et));for(v=0;v<h;v+=Y){const G=this.getContext(v),tt=s.setContext(G),V=a.setContext(G),z=tt.lineWidth,K=tt.color,at=V.dash||[],It=V.dashOffset,jn=tt.tickWidth,rn=tt.tickColor,ai=tt.tickBorderDash||[],sn=tt.tickBorderDashOffset;w=B5(this,v,l),w!==void 0&&(E=zr(i,w,z),c?x=I=M=H=E:T=k=j=q=E,f.push({tx1:x,ty1:T,tx2:I,ty2:k,x1:M,y1:j,x2:H,y2:q,width:z,color:K,borderDash:at,borderDashOffset:It,tickWidth:jn,tickColor:rn,tickBorderDash:ai,tickBorderDashOffset:sn}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(t){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=Na(i.grid),f=d+u,p=h?-u:f,m=-Mn(this.labelRotation),_=[];let g,y,v,w,E,x,T,I,k,M,j,H,q="middle";if(r==="top")x=this.bottom-p,T=this._getXAxisLabelAlignment();else if(r==="bottom")x=this.top+p,T=this._getXAxisLabelAlignment();else if(r==="left"){const Y=this._getYAxisLabelAlignment(d);T=Y.textAlign,E=Y.x}else if(r==="right"){const Y=this._getYAxisLabelAlignment(d);T=Y.textAlign,E=Y.x}else if(n==="x"){if(r==="center")x=(t.top+t.bottom)/2+f;else if(rt(r)){const Y=Object.keys(r)[0],G=r[Y];x=this.chart.scales[Y].getPixelForValue(G)+f}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")E=(t.left+t.right)/2-f;else if(rt(r)){const Y=Object.keys(r)[0],G=r[Y];E=this.chart.scales[Y].getPixelForValue(G)}T=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?q="top":l==="end"&&(q="bottom"));const et=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){v=a[g],w=v.label;const Y=s.setContext(this.getContext(g));I=this.getPixelForTick(g)+s.labelOffset,k=this._resolveTickFontOptions(g),M=k.lineHeight,j=Ct(w)?w.length:1;const G=j/2,tt=Y.color,V=Y.textStrokeColor,z=Y.textStrokeWidth;let K=T;o?(E=I,T==="inner"&&(g===y-1?K=this.options.reverse?"left":"right":g===0?K=this.options.reverse?"right":"left":K="center"),r==="top"?c==="near"||m!==0?H=-j*M+M/2:c==="center"?H=-et.highest.height/2-G*M+M:H=-et.highest.height+M/2:c==="near"||m!==0?H=M/2:c==="center"?H=et.highest.height/2-G*M:H=et.highest.height-j*M,h&&(H*=-1),m!==0&&!Y.showLabelBackdrop&&(E+=M/2*Math.sin(m))):(x=I,H=(1-j)*M/2);let at;if(Y.showLabelBackdrop){const It=Me(Y.backdropPadding),jn=et.heights[g],rn=et.widths[g];let ai=H-It.top,sn=0-It.left;switch(q){case"middle":ai-=jn/2;break;case"bottom":ai-=jn;break}switch(T){case"center":sn-=rn/2;break;case"right":sn-=rn;break}at={left:sn,top:ai,width:rn+It.width,height:jn+It.height,color:Y.backdropColor}}_.push({label:w,font:k,textOffset:H,options:{rotation:m,color:tt,strokeColor:V,strokeWidth:z,textAlign:K,textBaseline:q,translation:[E,x],backdrop:at}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Mn(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=zr(t,this.left,o)-o/2,u=zr(t,this.right,a)+a/2,h=d=l):(h=zr(t,this.top,o)-o/2,d=zr(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&vp(i,r);const s=this.getLabelItems(t);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ns(i,c,0,u,l,a)}r&&wp(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=ne(i.font),o=Me(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||rt(n)?(l+=o.bottom,Ct(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=W5(this,l,n,a);Ns(t,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:U5(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=J(t.grid&&t.grid.z,-1),r=J(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qs.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return ne(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Gu{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;K5(n)&&(i=this.register(n));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,H5(t,o,i),this.override&&Wt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,r=this.scope;i in n&&delete n[i],r&&i in Wt[r]&&(delete Wt[r][i],this.override&&delete Vs[i])}}function H5(e,t,n){const i=xc(Object.create(null),[n?Wt.get(n):{},Wt.get(t),e.defaults]);Wt.set(t,i),e.defaultRoutes&&q5(t,e.defaultRoutes),e.descriptors&&Wt.describe(t,e.descriptors)}function q5(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");Wt.route(s,r,l,a)})}function K5(e){return"id"in e&&"defaults"in e}class G5{constructor(){this.controllers=new Gu(Ln,"datasets",!0),this.elements=new Gu(zn,"elements"),this.plugins=new Gu(Object,"plugins"),this.scales=new Gu(qs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):pt(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,i){const r=Cv(t);wt(i["before"+r],[],i),n[t](i),wt(i["after"+r],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Kn=new G5;class Q5{constructor(){this._init=[]}notify(t,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,n,i);return n==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,i,r){r=r||{};for(const s of t){const o=s.plugin,a=o[i],l=[n,r,s.options];if(wt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,r=J(i.options&&i.options.plugins,{}),s=Y5(i);return r===!1&&!n?[]:J5(t,s,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),t,"stop"),this._notify(r(i,n),t,"start")}}function Y5(e){const t={},n=[],i=Object.keys(Kn.plugins.items);for(let s=0;s<i.length;s++)n.push(Kn.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function X5(e,t){return!t&&e===!1?null:e===!0?{}:e}function J5(e,{plugins:t,localIds:n},i,r){const s=[],o=e.getContext();for(const a of t){const l=a.id,c=X5(i[l],r);c!==null&&s.push({plugin:a,options:Z5(e.config,{plugin:a,local:n[l]},c,o)})}return s}function Z5(e,{plugin:t,local:n},i,r){const s=e.pluginScopeKeys(t),o=e.getOptionScopes(i,s);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ny(e,t){const n=Wt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function tj(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function ej(e,t){return e===t?"_index_":"_value_"}function Lx(e){if(e==="x"||e==="y"||e==="r")return e}function nj(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Oy(e,...t){if(Lx(e))return e;for(const n of t){const i=n.axis||nj(n.position)||e.length>1&&Lx(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Fx(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function ij(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return Fx(e,"x",n[0])||Fx(e,"y",n[0])}return{}}function rj(e,t){const n=Vs[e.type]||{scales:{}},i=t.scales||{},r=Ny(e.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!rt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Oy(o,a,ij(o,e),Wt.scales[a.type]),c=ej(l,r),u=n.scales||{};s[o]=El(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Ny(a,t),u=(Vs[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=tj(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),El(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];El(a,[Wt.scales[a.type],Wt.scale])}),s}function OR(e){const t=e.options||(e.options={});t.plugins=J(t.plugins,{}),t.scales=rj(e,t)}function LR(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function sj(e){return e=e||{},e.data=LR(e.data),OR(e),e}const Bx=new Map,FR=new Set;function Qu(e,t){let n=Bx.get(e);return n||(n=t(),Bx.set(e,n),FR.add(n)),n}const Oa=(e,t,n)=>{const i=Ar(t,n);i!==void 0&&e.add(i)};class oj{constructor(t){this._config=sj(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=LR(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),OR(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Qu(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Qu(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Qu(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return Qu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let r=i.get(t);return(!r||n)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,n,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(h=>Oa(l,t,h))),u.forEach(h=>Oa(l,r,h)),u.forEach(h=>Oa(l,Vs[s]||{},h)),u.forEach(h=>Oa(l,Wt,h)),u.forEach(h=>Oa(l,Dy,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),FR.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Vs[n]||{},Wt.datasets[n]||{},{type:n},Wt,Dy]}resolveNamedOptions(t,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=$x(this._resolverCache,t,r);let l=o;if(lj(o,n)){s.$shared=!1,i=Pr(i)?i():i;const c=this.createResolver(t,i,a);l=na(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(t,n,i=[""],r){const{resolver:s}=$x(this._resolverCache,t,i);return rt(n)?na(s,n,void 0,r):s}}function $x(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Nv(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const aj=e=>rt(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||Pr(e[n]),!1);function lj(e,t){const{isScriptable:n,isIndexable:i}=mR(e);for(const r of t){const s=n(r),o=i(r),a=(o||s)&&e[r];if(s&&(Pr(a)||aj(a))||o&&Ct(a))return!0}return!1}var cj="4.4.0";const uj=["top","bottom","left","right","chartArea"];function zx(e,t){return e==="top"||e==="bottom"||uj.indexOf(e)===-1&&t==="x"}function jx(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Ux(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),wt(n&&n.onComplete,[e],t)}function hj(e){const t=e.chart,n=t.options.animation;wt(n&&n.onProgress,[e],t)}function BR(e){return xR()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Dh={},Wx=e=>{const t=BR(e);return Object.values(Dh).filter(n=>n.canvas===t).pop()};function dj(e,t,n){const i=Object.keys(e);for(const r of i){const s=+r;if(s>=t){const o=e[r];delete e[r],(n>0||s>t)&&(e[s+n]=o)}}}function fj(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}function Yu(e,t,n){return e.options.clip?e[n]:t[n]}function pj(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Yu(n,t,"left"),right:Yu(n,t,"right"),top:Yu(i,t,"top"),bottom:Yu(i,t,"bottom")}:t}var $i;let au=($i=class{static register(...t){Kn.add(...t),Hx()}static unregister(...t){Kn.remove(...t),Hx()}constructor(t,n){const i=this.config=new oj(n),r=BR(t),s=Wx(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||k5(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=m$(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Q5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=D$(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Dh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ui.listen(this,"complete",Ux),ui.listen(this,"progress",hj),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return ht(t)?n&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():dx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return cx(this.canvas,this.ctx),this}stop(){return ui.stop(this),this}resize(t,n){ui.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,dx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),wt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pt(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Oy(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),pt(s,o=>{const a=o.options,l=a.id,c=Oy(l,a),u=J(a.type,o.dtype);(a.position===void 0||zx(a.position,c)!==zx(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Kn.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,t)}),pt(r,(o,a)=>{o||delete i[a]}),pt(i,o=>{Pe.configure(this,o,o.options),Pe.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(jx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Ny(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Kn.getController(a),{datasetElementType:c,dataElementType:u}=Wt.datasets[a];Object.assign(l,{dataElementType:Kn.getElement(u),datasetElementType:c&&Kn.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){pt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||pt(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(jx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pt(this.scales,t=>{Pe.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!tx(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;dj(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!tx(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pe.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],pt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Pr(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ui.has(this)?this.attached&&!ui.running(this)&&ui.start(this):(this.draw(),Ux({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i=t._clip,r=!i.disabled,s=pj(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&vp(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),t.controller.draw(),r&&wp(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Ei(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,r){const s=u5.modes[n];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Fr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);Tc(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ui.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),cx(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Dh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};pt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},pt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ef(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,t),a=i?t:s(t,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(t,r,i,o),l=x$(t),c=fj(t,this._lastEvent,i,l);i&&(this._lastEvent=null,wt(s.onHover,[t,a,this],this),l&&wt(s.onClick,[t,a,this],this));const u=!ef(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(t,n,i,r){if(t.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}},N($i,"defaults",Wt),N($i,"instances",Dh),N($i,"overrides",Vs),N($i,"registry",Kn),N($i,"version",cj),N($i,"getChart",Wx),$i);function Hx(){return pt(au.instances,e=>e._plugins.invalidate())}function gj(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,o,a,i-c,n+c),l>r?(c=r/l,e.arc(s,o,l,n+c,i-c,!0)):e.arc(s,o,r,n+Qt,i-Qt),e.closePath(),e.clip()}function mj(e){return Vv(e,["outerStart","outerEnd","innerStart","innerEnd"])}function yj(e,t,n,i){const r=mj(e.options.borderRadius),s=(n-t)/2,o=Math.min(s,i*t/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return ae(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ae(r.innerStart,0,o),innerEnd:ae(r.innerEnd,0,o)}}function to(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function lf(e,t,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const Y=u>0?u-i:0,G=h>0?h-i:0,tt=(Y+G)/2,V=tt!==0?p*tt/(tt+i):p;f=(p-V)/2}const m=Math.max(.001,p*h-n/Dt)/h,_=(p-m)/2,g=l+_+f,y=r-_-f,{outerStart:v,outerEnd:w,innerStart:E,innerEnd:x}=yj(t,d,h,y-g),T=h-v,I=h-w,k=g+v/T,M=y-w/I,j=d+E,H=d+x,q=g+E/j,et=y-x/H;if(e.beginPath(),s){const Y=(k+M)/2;if(e.arc(o,a,h,k,Y),e.arc(o,a,h,Y,M),w>0){const z=to(I,M,o,a);e.arc(z.x,z.y,w,M,y+Qt)}const G=to(H,y,o,a);if(e.lineTo(G.x,G.y),x>0){const z=to(H,et,o,a);e.arc(z.x,z.y,x,y+Qt,et+Math.PI)}const tt=(y-x/d+(g+E/d))/2;if(e.arc(o,a,d,y-x/d,tt,!0),e.arc(o,a,d,tt,g+E/d,!0),E>0){const z=to(j,q,o,a);e.arc(z.x,z.y,E,q+Math.PI,g-Qt)}const V=to(T,g,o,a);if(e.lineTo(V.x,V.y),v>0){const z=to(T,k,o,a);e.arc(z.x,z.y,v,g-Qt,k)}}else{e.moveTo(o,a);const Y=Math.cos(k)*h+o,G=Math.sin(k)*h+a;e.lineTo(Y,G);const tt=Math.cos(M)*h+o,V=Math.sin(M)*h+a;e.lineTo(tt,V)}e.closePath()}function _j(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){lf(e,t,n,i,l,r);for(let c=0;c<s;++c)e.fill();isNaN(a)||(l=o+(a%kt||kt))}return lf(e,t,n,i,l,r),e.fill(),l}function vj(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){lf(e,t,n,i,p,r);for(let m=0;m<s;++m)e.stroke();isNaN(a)||(p=o+(a%kt||kt))}f&&gj(e,t,p),s||(lf(e,t,n,i,p,r),e.stroke())}class Za extends zn{constructor(n){super();N(this,"circumference");N(this,"endAngle");N(this,"fullCircles");N(this,"innerRadius");N(this,"outerRadius");N(this,"pixelMargin");N(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=oR(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,m=J(d,c-l)>=kt||Ic(o,l,c),_=vi(a,u+f,h+f);return m&&_}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,d=(a+l+u+c)/2;return{x:i+Math.cos(h)*d,y:r+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>kt?Math.floor(r/kt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Dt,r||0)),u=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,_j(n,this,u,o,a),vj(n,this,u,o,a),n.restore()}}N(Za,"id","arc"),N(Za,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),N(Za,"defaultRoutes",{backgroundColor:"backgroundColor"}),N(Za,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function $R(e,t,n=t){e.lineCap=J(n.borderCapStyle,t.borderCapStyle),e.setLineDash(J(n.borderDash,t.borderDash)),e.lineDashOffset=J(n.borderDashOffset,t.borderDashOffset),e.lineJoin=J(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=J(n.borderWidth,t.borderWidth),e.strokeStyle=J(n.borderColor,t.borderColor)}function wj(e,t,n){e.lineTo(n.x,n.y)}function Ej(e){return e.stepped?W$:e.tension||e.cubicInterpolationMode==="monotone"?H$:wj}function zR(e,t,n={}){const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function xj(e,t,n,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=zR(r,n,i),u=Ej(s);let{move:h=!0,reverse:d}=i||{},f,p,m;for(f=0;f<=c;++f)p=r[(a+(d?c-f:f))%o],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):u(e,m,p,d,s.stepped),m=p);return l&&(p=r[(a+(d?c:0))%o],u(e,m,p,d,s.stepped)),!!l}function Tj(e,t,n,i){const r=t.points,{count:s,start:o,ilen:a}=zR(r,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,p,m,_,g;const y=w=>(o+(c?a-w:w))%s,v=()=>{m!==_&&(e.lineTo(u,_),e.lineTo(u,m),e.lineTo(u,g))};for(l&&(f=r[y(0)],e.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[y(d)],f.skip)continue;const w=f.x,E=f.y,x=w|0;x===p?(E<m?m=E:E>_&&(_=E),u=(h*u+w)/++h):(v(),e.lineTo(w,E),p=x,h=0,m=_=E),g=E}v()}function Ly(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?Tj:xj}function Ij(e){return e.stepped?Tz:e.tension||e.cubicInterpolationMode==="monotone"?Iz:Qr}function bj(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),$R(e,t.options),e.stroke(r)}function Sj(e,t,n,i){const{segments:r,options:s}=t,o=Ly(t);for(const a of r)$R(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const Aj=typeof Path2D=="function";function Pj(e,t,n,i){Aj&&!t.options.segment?bj(e,t,n,i):Sj(e,t,n,i)}class Zi extends zn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;gz(this._points,i,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Rz(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,r=t[n],s=this.points,o=AR(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=Ij(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],p=s[d];if(f===p){a.push(f);continue}const m=Math.abs((r-f[n])/(p[n]-f[n])),_=l(f,p,m,i.stepped);_[n]=t[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(t,n,i){return Ly(this)(t,this,n,i)}path(t,n,i){const r=this.segments,s=Ly(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(t,this,a,{start:n,end:n+i-1});return!!o}draw(t,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),Pj(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}N(Zi,"id","line"),N(Zi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),N(Zi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),N(Zi,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function qx(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}class Mh extends zn{constructor(n){super();N(this,"parsed");N(this,"skip");N(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return qx(this,n,"x",i)}inYRange(n,i){return qx(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Ei(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,My(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}N(Mh,"id","point"),N(Mh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),N(Mh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function jR(e,t){const{x:n,y:i,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function tr(e,t,n,i){return e?0:ae(t,n,i)}function Cj(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=gR(i);return{t:tr(r.top,s.top,0,n),r:tr(r.right,s.right,0,t),b:tr(r.bottom,s.bottom,0,n),l:tr(r.left,s.left,0,t)}}function Rj(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=ps(r),o=Math.min(t,n),a=e.borderSkipped,l=i||rt(r);return{topLeft:tr(!l||a.top||a.left,s.topLeft,0,o),topRight:tr(!l||a.top||a.right,s.topRight,0,o),bottomLeft:tr(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:tr(!l||a.bottom||a.right,s.bottomRight,0,o)}}function kj(e){const t=jR(e),n=t.right-t.left,i=t.bottom-t.top,r=Cj(e,n/2,i/2),s=Rj(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function kg(e,t,n,i){const r=t===null,s=n===null,a=e&&!(r&&s)&&jR(e,i);return a&&(r||vi(t,a.left,a.right))&&(s||vi(n,a.top,a.bottom))}function Dj(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Mj(e,t){e.rect(t.x,t.y,t.w,t.h)}function Dg(e,t,n={}){const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}class Vh extends zn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=kj(this),a=Dj(o.radius)?bc:Mj;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,Dg(o,n,s)),t.clip(),a(t,Dg(s,-n,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Dg(s,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,i){return kg(this,t,n,i)}inXRange(t,n){return kg(this,t,null,n)}inYRange(t,n){return kg(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}N(Vh,"id","bar"),N(Vh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),N(Vh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Vj=Object.freeze({__proto__:null,ArcElement:Za,BarElement:Vh,LineElement:Zi,PointElement:Mh});const Fy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Kx=Fy.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function UR(e){return Fy[e%Fy.length]}function WR(e){return Kx[e%Kx.length]}function Nj(e,t){return e.borderColor=UR(t),e.backgroundColor=WR(t),++t}function Oj(e,t){return e.backgroundColor=e.data.map(()=>UR(t++)),t}function Lj(e,t){return e.backgroundColor=e.data.map(()=>WR(t++)),t}function Fj(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof us?t=Oj(n,t):r instanceof Sl?t=Lj(n,t):r&&(t=Nj(n,t))}}function Gx(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Bj(e){return e&&(e.borderColor||e.backgroundColor)}var $j={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:s}=r;if(!n.forceOverride&&(Gx(i)||Bj(r)||s&&Gx(s)))return;const o=Fj(e);i.forEach(o)}};function zj(e,t,n,i,r){const s=r.samples||i;if(s>=n)return e.slice(t,t+n);const o=[],a=(n-2)/(s-2);let l=0;const c=t+n-1;let u=t,h,d,f,p,m;for(o[l++]=e[u],h=0;h<s-2;h++){let _=0,g=0,y;const v=Math.floor((h+1)*a)+1+t,w=Math.min(Math.floor((h+2)*a)+1,n)+t,E=w-v;for(y=v;y<w;y++)_+=e[y].x,g+=e[y].y;_/=E,g/=E;const x=Math.floor(h*a)+1+t,T=Math.min(Math.floor((h+1)*a)+1,n)+t,{x:I,y:k}=e[u];for(f=p=-1,y=x;y<T;y++)p=.5*Math.abs((I-_)*(e[y].y-k)-(I-e[y].x)*(g-k)),p>f&&(f=p,d=e[y],m=y);o[l++]=d,u=m}return o[l++]=e[c],o}function jj(e,t,n,i){let r=0,s=0,o,a,l,c,u,h,d,f,p,m;const _=[],g=t+n-1,y=e[t].x,w=e[g].x-y;for(o=t;o<t+n;++o){a=e[o],l=(a.x-y)/w*i,c=a.y;const E=l|0;if(E===u)c<p?(p=c,h=o):c>m&&(m=c,d=o),r=(s*r+a.x)/++s;else{const x=o-1;if(!ht(h)&&!ht(d)){const T=Math.min(h,d),I=Math.max(h,d);T!==f&&T!==x&&_.push({...e[T],x:r}),I!==f&&I!==x&&_.push({...e[I],x:r})}o>0&&x!==f&&_.push(e[x]),_.push(a),u=E,s=0,p=m=c,h=d=f=o}}return _}function HR(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Qx(e){e.data.datasets.forEach(t=>{HR(t)})}function Uj(e,t){const n=t.length;let i=0,r;const{iScale:s}=e,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=ae(wi(t,s.axis,o).lo,0,n-1)),c?r=ae(wi(t,s.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var Wj={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){Qx(e);return}const i=e.width;e.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=e.getDatasetMeta(s),c=o||r.data;if(Xa([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:h,count:d}=Uj(l,c);const f=n.threshold||4*i;if(d<=f){HR(r);return}ht(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(n.algorithm){case"lttb":p=zj(c,h,d,i,n);break;case"min-max":p=jj(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=p})},destroy(e){Qx(e)}};function Hj(e,t,n){const i=e.segments,r=e.points,s=t.points,o=[];for(const a of i){let{start:l,end:c}=a;c=$v(l,c,r);const u=By(n,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const h=AR(t,u);for(const d of h){const f=By(n,s[d.start],s[d.end],d.loop),p=SR(a,r,f);for(const m of p)o.push({source:m,target:d,start:{[n]:Yx(u,f,"start",Math.max)},end:{[n]:Yx(u,f,"end",Math.min)}})}}return o}function By(e,t,n,i){if(i)return;let r=t[e],s=n[e];return e==="angle"&&(r=ln(r),s=ln(s)),{property:e,start:r,end:s}}function qj(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=$v(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function $v(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Yx(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function qR(e,t){let n=[],i=!1;return Ct(e)?(i=!0,n=e):n=qj(e,t),n.length?new Zi({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Xx(e){return e&&e.fill!==!1}function Kj(e,t,n){let r=e[t].fill;const s=[t];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ut(r))return r;if(o=e[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Gj(e,t,n){const i=Jj(e);if(rt(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ut(r)&&Math.floor(r)===r?Qj(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Qj(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function Yj(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:rt(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function Xj(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:rt(e)?i=e.value:i=t.getBaseValue(),i}function Jj(e){const t=e.options,n=t.fill;let i=J(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Zj(e){const{scale:t,index:n,line:i}=e,r=[],s=i.segments,o=i.points,a=t3(t,n);a.push(qR({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)e3(r,o[u],a)}return new Zi({points:r,options:{}})}function t3(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||n.unshift(s.dataset)}return n}function e3(e,t,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=n3(s,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(e.push(l),!a)break}}e.push(...i)}function n3(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],s=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],d=o[u.end][n];if(vi(r,h,d)){a=r===h,l=r===d;break}}return{first:a,last:l,point:i}}class KR{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:kt},t.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:r}=this,s=t.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function i3(e){const{chart:t,fill:n,line:i}=e;if(Ut(n))return r3(t,n);if(n==="stack")return Zj(e);if(n==="shape")return!0;const r=s3(e);return r instanceof KR?r:qR(r,i)}function r3(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function s3(e){return(e.scale||{}).getPointPositionForValue?a3(e):o3(e)}function o3(e){const{scale:t={},fill:n}=e,i=Yj(n,t);if(Ut(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function a3(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=Xj(n,t,s),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,s);return new KR({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function Mg(e,t,n){const i=i3(t),{line:r,scale:s,axis:o}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(vp(e,n),l3(e,{line:r,target:i,above:u,below:h,area:n,scale:s,axis:o}),wp(e))}function l3(e,t){const{line:n,target:i,above:r,below:s,area:o,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),l==="x"&&s!==r&&(Jx(e,i,o.top),Zx(e,{line:n,target:i,color:r,scale:a,property:l}),e.restore(),e.save(),Jx(e,i,o.bottom)),Zx(e,{line:n,target:i,color:s,scale:a,property:l}),e.restore()}function Jx(e,t,n){const{segments:i,points:r}=t;let s=!0,o=!1;e.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],h=r[$v(l,c,r)];s?(e.moveTo(u.x,u.y),s=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Zx(e,t){const{line:n,target:i,property:r,color:s,scale:o}=t,a=Hj(n,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=i!==!0;e.save(),e.fillStyle=d,c3(e,o,f&&By(r,u,h)),e.beginPath();const p=!!n.pathSegment(e,l);let m;if(f){p?e.closePath():tT(e,i,h,r);const _=!!i.pathSegment(e,c,{move:p,reverse:!0});m=p&&_,m||tT(e,i,u,r)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function c3(e,t,n){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(e.beginPath(),e.rect(o,i,a-o,r-i),e.clip())}function tT(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var u3={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=e.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Zi&&(l={visible:e.isDatasetVisible(o),index:o,fill:Gj(a,o,i),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=Kj(r,o,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&Mg(e.ctx,a,s))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;Xx(s)&&Mg(e.ctx,s,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!Xx(i)||n.drawTime!=="beforeDatasetDraw"||Mg(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const eT=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},h3=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class nT extends zn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=wt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=ne(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=eT(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=t;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,m)=>{const _=i+n/2+s.measureText(p.text).width;(m===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(m>0?0:1)]=0,f+=u,d++),l[m]={left:0,top:f,row:d,width:_,height:r},c[c.length-1]+=_+a}),h}_fitCols(t,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let h=a,d=0,f=0,p=0,m=0;return this.legendItems.forEach((_,g)=>{const{itemWidth:y,itemHeight:v}=d3(i,n,s,_,r);g>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,m++,d=f=0),l[g]={left:p,top:f,col:m,width:y,height:v},d=Math.max(d,y),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Mo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Se(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Se(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Se(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Se(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;vp(t,this),this._draw(),wp(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=Wt.color,l=Mo(t.rtl,this.left,this.width),c=ne(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:_}=eT(o,h),g=function(x,T,I){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();const k=J(I.lineWidth,1);if(r.fillStyle=J(I.fillStyle,a),r.lineCap=J(I.lineCap,"butt"),r.lineDashOffset=J(I.lineDashOffset,0),r.lineJoin=J(I.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=J(I.strokeStyle,a),r.setLineDash(J(I.lineDash,[])),o.usePointStyle){const M={radius:m*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:k},j=l.xPlus(x,p/2),H=T+d;pR(r,M,j,H,o.pointStyleWidth&&p)}else{const M=T+Math.max((h-m)/2,0),j=l.leftForLtr(x,p),H=ps(I.borderRadius);r.beginPath(),Object.values(H).some(q=>q!==0)?bc(r,{x:j,y:M,w:p,h:m,radius:H}):r.rect(j,M,p,m),r.fill(),k!==0&&r.stroke()}r.restore()},y=function(x,T,I){Ns(r,I.text,x,T+_/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?f={x:Se(s,this.left+u,this.right-i[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:Se(s,this.top+w+u,this.bottom-n[0].height),line:0},TR(this.ctx,t.textDirection);const E=_+u;this.legendItems.forEach((x,T)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const I=r.measureText(x.text).width,k=l.textAlign(x.textAlign||(x.textAlign=o.textAlign)),M=p+d+I;let j=f.x,H=f.y;l.setWidth(this.width),v?T>0&&j+M+u>this.right&&(H=f.y+=E,f.line++,j=f.x=Se(s,this.left+u,this.right-i[f.line])):T>0&&H+E>this.bottom&&(j=f.x=j+n[f.line].width+u,f.line++,H=f.y=Se(s,this.top+w+u,this.bottom-n[f.line].height));const q=l.x(j);if(g(q,H,x),j=M$(k,j+p+d,v?j+M:this.right,t.rtl),y(l.x(j),H,x),v)f.x+=M+u;else if(typeof x.text!="string"){const et=c.lineHeight;f.y+=GR(x,et)+u}else f.y+=E}),IR(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=ne(n.font),r=Me(n.padding);if(!n.display)return;const s=Mo(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Se(t.align,h,this.right-d);else{const p=this.columnSizes.reduce((m,_)=>Math.max(m,_.height),0);u=c+Se(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=Se(a,h,h+d);o.textAlign=s.textAlign(Dv(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Ns(o,n.text,f,u,i)}_computeTitleHeight(){const t=this.options.title,n=ne(t.font),i=Me(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,r,s;if(vi(t,this.left,this.right)&&vi(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],vi(t,r.left,r.left+r.width)&&vi(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!g3(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=h3(r,i);r&&!s&&wt(n.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&wt(n.onHover,[t,i,this],this)}else i&&wt(n.onClick,[t,i,this],this)}}function d3(e,t,n,i,r){const s=f3(i,e,t,n),o=p3(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function f3(e,t,n,i){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+n.size/2+i.measureText(r).width}function p3(e,t,n){let i=e;return typeof t.text!="string"&&(i=GR(t,n)),i}function GR(e,t){const n=e.text?e.text.length:0;return t*n}function g3(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var m3={id:"legend",_element:nT,start(e,t,n){const i=e.legend=new nT({ctx:e.ctx,options:n,chart:e});Pe.configure(e,i,n),Pe.addBox(e,i)},stop(e){Pe.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Pe.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Me(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class zv extends zn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=Ct(i.text)?i.text.length:1;this._padding=Me(i.padding);const s=r*ne(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Se(a,i,s),h=n+t,c=s-i):(o.position==="left"?(u=i+t,h=Se(a,r,n),l=Dt*-.5):(u=s-t,h=Se(a,n,r),l=Dt*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=ne(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Ns(t,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Dv(n.align),textBaseline:"middle",translation:[o,a]})}}function y3(e,t){const n=new zv({ctx:e.ctx,options:t,chart:e});Pe.configure(e,n,t),Pe.addBox(e,n),e.titleBlock=n}var _3={id:"title",_element:zv,start(e,t,n){y3(e,n)},stop(e){const t=e.titleBlock;Pe.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Pe.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xu=new WeakMap;var v3={id:"subtitle",start(e,t,n){const i=new zv({ctx:e.ctx,options:n,chart:e});Pe.configure(e,i,n),Pe.addBox(e,i),Xu.set(e,i)},stop(e){Pe.removeBox(e,Xu.get(e)),Xu.delete(e)},beforeUpdate(e,t,n){const i=Xu.get(e);Pe.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tl={average(e){if(!e.length)return!1;let t,n,i=0,r=0,s=0;for(t=0,n=e.length;t<n;++t){const o=e[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=e.length;s<o;++s){const l=e[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ky(t,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Hn(e,t){return t&&(Ct(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function hi(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function w3(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function iT(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=ne(t.bodyFont),c=ne(t.titleFont),u=ne(t.footerFont),h=s.length,d=r.length,f=i.length,p=Me(t.padding);let m=p.height,_=0,g=i.reduce((w,E)=>w+E.before.length+E.lines.length+E.after.length,0);if(g+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),g){const w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*w+(g-f)*l.lineHeight+(g-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let y=0;const v=function(w){_=Math.max(_,n.measureText(w).width+y)};return n.save(),n.font=c.string,pt(e.title,v),n.font=l.string,pt(e.beforeBody.concat(e.afterBody),v),y=t.displayColors?o+2+t.boxPadding:0,pt(i,w=>{pt(w.before,v),pt(w.lines,v),pt(w.after,v)}),y=0,n.font=u.string,pt(e.footer,v),n.restore(),_+=p.width,{width:_,height:m}}function E3(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function x3(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(e==="left"&&r+s+o>t.width||e==="right"&&r-s-o<0)return!0}function T3(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),x3(c,e,t,n)&&(c="center"),c}function rT(e,t,n){const i=n.yAlign||t.yAlign||E3(e,n);return{xAlign:n.xAlign||t.xAlign||T3(e,t,n,i),yAlign:i}}function I3(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function b3(e,t,n){let{y:i,height:r}=e;return t==="top"?i+=n:t==="bottom"?i-=r+n:i-=r/2,i}function sT(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=ps(o);let p=I3(t,a);const m=b3(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+r:a==="right"&&(p+=Math.max(h,f)+r),{x:ae(p,0,i.width-t.width),y:ae(m,0,i.height-t.height)}}function Ju(e,t,n){const i=Me(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function oT(e){return Hn([],hi(e))}function S3(e,t,n){return Fr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function aT(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const QR={beforeTitle:li,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:li,beforeBody:li,beforeLabel:li,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ht(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:li,afterBody:li,beforeFooter:li,footer:li,afterFooter:li};function He(e,t,n,i){const r=e[t].call(n,i);return typeof r>"u"?QR[t].call(n,i):r}class $y extends zn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new PR(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=S3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,r=He(i,"beforeTitle",this,t),s=He(i,"title",this,t),o=He(i,"afterTitle",this,t);let a=[];return a=Hn(a,hi(r)),a=Hn(a,hi(s)),a=Hn(a,hi(o)),a}getBeforeBody(t,n){return oT(He(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,r=[];return pt(t,s=>{const o={before:[],lines:[],after:[]},a=aT(i,s);Hn(o.before,hi(He(a,"beforeLabel",this,s))),Hn(o.lines,He(a,"label",this,s)),Hn(o.after,hi(He(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(t,n){return oT(He(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,r=He(i,"beforeFooter",this,t),s=He(i,"footer",this,t),o=He(i,"afterFooter",this,t);let a=[];return a=Hn(a,hi(r)),a=Hn(a,hi(s)),a=Hn(a,hi(o)),a}_createItems(t){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(w3(this.chart,n[l]));return t.filter&&(a=a.filter((u,h,d)=>t.filter(u,h,d,i))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,i))),pt(a,u=>{const h=aT(t.callbacks,u);r.push(He(h,"labelColor",this,u)),s.push(He(h,"labelPointStyle",this,u)),o.push(He(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=tl[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=iT(this,i),c=Object.assign({},a,l),u=rT(this.chart,i,c),h=sT(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,r){const s=this.getCaretPosition(t,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=ps(a),{x:d,y:f}=t,{width:p,height:m}=n;let _,g,y,v,w,E;return s==="center"?(w=f+m/2,r==="left"?(_=d,g=_-o,v=w+o,E=w-o):(_=d+p,g=_+o,v=w-o,E=w+o),y=_):(r==="left"?g=d+Math.max(l,u)+o:r==="right"?g=d+p-Math.max(c,h)-o:g=this.caretX,s==="top"?(v=f,w=v-o,_=g-o,y=g+o):(v=f+m,w=v+o,_=g+o,y=g-o),E=v),{x1:_,x2:g,x3:y,y1:v,y2:w,y3:E}}drawTitle(t,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Mo(i.rtl,this.x,this.width);for(t.x=Ju(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=ne(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===s&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=ne(s.bodyFont),h=Ju(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(s.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=r.leftForLtr(d,c)+c/2,g=p+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,My(t,m,_,g),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,My(t,m,_,g)}else{t.lineWidth=rt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const m=r.leftForLtr(d,c),_=r.leftForLtr(r.xPlus(d,1),c-2),g=ps(o.borderRadius);Object.values(g).some(y=>y!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,bc(t,{x:m,y:p,w:c,h:l,radius:g}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),bc(t,{x:_,y:p+1,w:c-2,h:l-2,radius:g}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(m,p,c,l),t.strokeRect(m,p,c,l),t.fillStyle=o.backgroundColor,t.fillRect(_,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=ne(i.bodyFont);let d=h.lineHeight,f=0;const p=Mo(i.rtl,this.x,this.width),m=function(I){n.fillText(I,p.x(t.x+f),t.y+d/2),t.y+=d+s},_=p.textAlign(o);let g,y,v,w,E,x,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=Ju(this,_,i),n.fillStyle=i.bodyColor,pt(this.beforeBody,m),f=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,x=r.length;w<x;++w){for(g=r[w],y=this.labelTextColors[w],n.fillStyle=y,pt(g.before,m),v=g.lines,a&&v.length&&(this._drawColorBox(n,t,w,p,i),d=Math.max(h.lineHeight,l)),E=0,T=v.length;E<T;++E)m(v[E]),d=h.lineHeight;pt(g.after,m)}f=0,d=h.lineHeight,pt(this.afterBody,m),t.y-=s}drawFooter(t,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Mo(i.rtl,this.x,this.width);for(t.x=Ju(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=ne(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=ps(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(t,n,i,r),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(t,n,i,r),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(t,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(t,n,i,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=tl[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=iT(this,t),l=Object.assign({},o,this._size),c=rT(n,t,l),u=sT(t,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Me(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,n),TR(t,n.textDirection),s.y+=o.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),IR(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,r=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ef(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(t,s,n,i),a=this._positionChanged(o,t),l=n||!ef(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,i,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return n;const o=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:i,caretY:r,options:s}=this,o=tl[s.position].call(this,t,n);return o!==!1&&(i!==o.x||r!==o.y)}}N($y,"positioners",tl);var A3={id:"tooltip",_element:$y,positioners:tl,afterInit(e,t,n){n&&(e.tooltip=new $y({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},P3=Object.freeze({__proto__:null,Colors:$j,Decimation:Wj,Filler:u3,Legend:m3,SubTitle:v3,Title:_3,Tooltip:A3});const C3=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function R3(e,t,n,i){const r=e.indexOf(t);if(r===-1)return C3(e,t,n,i);const s=e.lastIndexOf(t);return r!==s?n:r}const k3=(e,t)=>e===null?null:ae(Math.round(e),0,t);function lT(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class cf extends qs{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ht(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:R3(i,t,J(n,t),this._addedLabels),k3(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&n===s.length-1?s:s.slice(t,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=n;o++)r.push({value:o});return r}getLabelForValue(t){return lT.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}N(cf,"id","category"),N(cf,"defaults",{ticks:{callback:lT}});function D3(e,t){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=e,f=s||1,p=u-1,{min:m,max:_}=t,g=!ht(o),y=!ht(a),v=!ht(c),w=(_-m)/(h+1);let E=nx((_-m)/p/f)*f,x,T,I,k;if(E<1e-14&&!g&&!y)return[{value:m},{value:_}];k=Math.ceil(_/E)-Math.floor(m/E),k>p&&(E=nx(k*E/p/f)*f),ht(l)||(x=Math.pow(10,l),E=Math.ceil(E*x)/x),r==="ticks"?(T=Math.floor(m/E)*E,I=Math.ceil(_/E)*E):(T=m,I=_),g&&y&&s&&S$((a-o)/s,E/1e3)?(k=Math.round(Math.min((a-o)/E,u)),E=(a-o)/k,T=o,I=a):v?(T=g?o:T,I=y?a:I,k=c-1,E=(I-T)/k):(k=(I-T)/E,xl(k,Math.round(k),E/1e3)?k=Math.round(k):k=Math.ceil(k));const M=Math.max(ix(E),ix(T));x=Math.pow(10,ht(l)?M:l),T=Math.round(T*x)/x,I=Math.round(I*x)/x;let j=0;for(g&&(d&&T!==o?(n.push({value:o}),T<o&&j++,xl(Math.round((T+j*E)*x)/x,o,cT(o,w,e))&&j++):T<o&&j++);j<k;++j){const H=Math.round((T+j*E)*x)/x;if(y&&H>a)break;n.push({value:H})}return y&&d&&I!==a?n.length&&xl(n[n.length-1].value,a,cT(a,w,e))?n[n.length-1].value=a:n.push({value:a}):(!y||I===a)&&n.push({value:I}),n}function cT(e,t,{horizontal:n,minRotation:i}){const r=Mn(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/s,o)}class uf extends qs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ht(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(t){const l=ii(r),c=ii(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=D3(r,s);return t.bounds==="ticks"&&sR(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-n)/Math.max(t.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return su(t,this.chart.options.locale,this.options.ticks.format)}}class zy extends uf{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ut(t)?t:0,this.max=Ut(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=Mn(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}N(zy,"id","linear"),N(zy,"defaults",{ticks:{callback:_p.formatters.numeric}});const Ac=e=>Math.floor(Ji(e)),Ur=(e,t)=>Math.pow(10,Ac(e)+t);function uT(e){return e/Math.pow(10,Ac(e))===1}function hT(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function M3(e,t){const n=t-e;let i=Ac(n);for(;hT(e,t,i)>10;)i++;for(;hT(e,t,i)<10;)i--;return Math.min(i,Ac(e))}function V3(e,{min:t,max:n}){t=on(e.min,t);const i=[],r=Ac(t);let s=M3(t,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=on(e.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<n;)i.push({value:d,major:uT(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=on(e.max,d);return i.push({value:f,major:uT(f),significand:h}),i}class jy extends qs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=uf.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Ut(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ut(t)?Math.max(0,t):null,this.max=Ut(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ut(this._userMin)&&(this.min=t===Ur(this.min,0)?Ur(this.min,-1):Ur(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Ur(i,-1)),o(Ur(r,1)))),i<=0&&s(Ur(r,-1)),r<=0&&o(Ur(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=V3(n,this);return t.bounds==="ticks"&&sR(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":su(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ji(t),this._valueRange=Ji(this.max)-Ji(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ji(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}N(jy,"id","logarithmic"),N(jy,"defaults",{ticks:{callback:_p.formatters.logarithmic,major:{enabled:!0}}});function Uy(e){const t=e.ticks;if(t.display&&e.display){const n=Me(t.backdropPadding);return J(t.font&&t.font.size,Wt.font.size)+n.height}return 0}function N3(e,t,n){return n=Ct(n)?n:[n],{w:U$(e,t.string,n),h:n.length*t.lineHeight}}function dT(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function O3(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Dt/s:0;for(let l=0;l<s;l++){const c=o.setContext(e.getPointLabelContext(l));r[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+r[l],a),h=ne(c.font),d=N3(e.ctx,h,e._pointLabels[l]);i[l]=d;const f=ln(e.getIndexAngle(l)+a),p=Math.round(Rv(f)),m=dT(p,u.x,d.w,0,180),_=dT(p,u.y,d.h,90,270);L3(n,t,f,m,_)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=$3(e,i,r)}function L3(e,t,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function F3(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,i+r+o,s),c=Math.round(Rv(ln(l.angle+Qt))),u=U3(l.y,a.h,c),h=z3(c),d=j3(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function B3(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(Ei({x:n,y:i},t)||Ei({x:n,y:s},t)||Ei({x:r,y:i},t)||Ei({x:r,y:s},t))}function $3(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Uy(s)/2,additionalAngle:o?Dt/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const h=F3(e,u,l);i.push(h),a==="auto"&&(h.visible=B3(h,c),h.visible&&(c=h))}return i}function z3(e){return e===0||e===180?"center":e<180?"left":"right"}function j3(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function U3(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function W3(e,t,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=t;if(!ht(a)){const l=ps(t.borderRadius),c=Me(t.backdropPadding);e.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(p=>p!==0)?(e.beginPath(),bc(e,{x:u,y:h,w:d,h:f,radius:l}),e.fill()):e.fillRect(u,h,d,f)}}function H3(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const s=e._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(e.getPointLabelContext(r));W3(n,o,s);const a=ne(o.font),{x:l,y:c,textAlign:u}=s;Ns(n,e._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function YR(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,kt);else{let s=e.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=e.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function q3(e,t,n,i,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),YR(e,n,o,i),s.closePath(),s.stroke(),s.restore())}function K3(e,t,n){return Fr(e,{label:n,index:t,type:"pointLabel"})}class el extends uf{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Me(Uy(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Ut(t)&&!isNaN(t)?t:0,this.max=Ut(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Uy(this.options))}generateTickLabels(t){uf.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const r=wt(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?O3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,r){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,r))}getIndexAngle(t){const n=kt/(this._pointLabels.length||1),i=this.options.startAngle||0;return ln(t*n+Mn(i))}getDistanceFromCenterForValue(t){if(ht(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(ht(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return K3(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const r=this.getIndexAngle(t)-Qt+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),YR(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&H3(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),p=s.setContext(d);q3(this,f,l,o,p)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(t.lineWidth=d,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=ne(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=Me(c.backdropPadding);t.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Ns(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}N(el,"id","radialLinear"),N(el,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_p.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),N(el,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),N(el,"descriptors",{angleLines:{_fallback:"grid"}});const xp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ge=Object.keys(xp);function fT(e,t){return e-t}function pT(e,t){if(ht(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),Ut(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(ea(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function gT(e,t,n,i){const r=Ge.length;for(let s=Ge.indexOf(e);s<r-1;++s){const o=xp[Ge[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=i)return Ge[s]}return Ge[r-1]}function G3(e,t,n,i,r){for(let s=Ge.length-1;s>=Ge.indexOf(n);s--){const o=Ge[s];if(xp[o].common&&e._adapter.diff(r,i,o)>=t-1)return o}return Ge[n?Ge.indexOf(n):0]}function Q3(e){for(let t=Ge.indexOf(e)+1,n=Ge.length;t<n;++t)if(xp[Ge[t]].common)return Ge[t]}function mT(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:r}=kv(n,t),s=n[i]>=t?n[i]:n[r];e[s]=!0}}function Y3(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}function yT(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:Y3(e,i,r,n)}class Pc extends qs{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),r=this._adapter=new s5._date(t.adapters.date);r.init(n),El(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:pT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ut(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Ut(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=R$(r,s,o);return this._unit=n.unit||(i.autoSkip?gT(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):G3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Q3(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),yT(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=ae(n,0,o),i=ae(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||gT(s.minUnit,n,i,this._getLabelCapacity(n)),a=J(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=ea(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":o),t.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+t.add(d,a,o),f++)mT(u,d,p);return(d===i||r.bounds==="ticks"||f===1)&&mT(u,d,p),Object.keys(u).sort(fT).map(m=>+m)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return wt(o,[t,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(t,r||(f?h:u))}generateTickLabels(t){let n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,r=Mn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(t,0,yT(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)t.push(pT(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lR(t.sort(fT))}}N(Pc,"id","time"),N(Pc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Zu(e,t,n){let i=0,r=e.length-1,s,o,a,l;n?(t>=e[i].pos&&t<=e[r].pos&&({lo:i,hi:r}=wi(e,"pos",t)),{pos:s,time:a}=e[i],{pos:o,time:l}=e[r]):(t>=e[i].time&&t<=e[r].time&&({lo:i,hi:r}=wi(e,"time",t)),{time:s,pos:a}=e[i],{time:o,pos:l}=e[r]);const c=o-s;return c?a+(l-a)*(t-s)/c:a}class Wy extends Pc{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Zu(n,this.min),this._tableRange=Zu(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Zu(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Zu(this._table,i*this._tableRange+this._minPos,!0)}}N(Wy,"id","timeseries"),N(Wy,"defaults",Pc.defaults);var X3=Object.freeze({__proto__:null,CategoryScale:cf,LinearScale:zy,LogarithmicScale:jy,RadialLinearScale:el,TimeScale:Pc,TimeSeriesScale:Wy});const J3=[r5,Vj,P3,X3];au.register(...J3);const XR="label";function _T(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Z3(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function JR(e,t){e.labels=t}function ZR(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:XR;const i=[];e.datasets=t.map(r=>{const s=e.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function t9(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:XR;const n={labels:[],datasets:[]};return JR(n,e.labels),ZR(n,e.datasets,t),n}function e9(e,t){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=e,f=C.useRef(null),p=C.useRef(),m=()=>{f.current&&(p.current=new au(f.current,{type:o,data:t9(a,s),options:l&&{...l},plugins:c}),_T(t,p.current))},_=()=>{_T(t,null),p.current&&(p.current.destroy(),p.current=null)};return C.useEffect(()=>{!r&&p.current&&l&&Z3(p.current,l)},[r,l]),C.useEffect(()=>{!r&&p.current&&JR(p.current.config.data,a.labels)},[r,a.labels]),C.useEffect(()=>{!r&&p.current&&a.datasets&&ZR(p.current.config.data,a.datasets,s)},[r,a.datasets]),C.useEffect(()=>{p.current&&(r?(_(),setTimeout(m)):p.current.update(h))},[r,l,a.labels,a.datasets,h]),C.useEffect(()=>{p.current&&(_(),setTimeout(m))},[o]),C.useEffect(()=>(m(),()=>_()),[]),gt.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},d),u)}const n9=C.forwardRef(e9);function i9(e,t){return au.register(t),C.forwardRef((n,i)=>gt.createElement(n9,Object.assign({},n,{ref:i,type:e})))}const r9=i9("line",bl);au.register(cf);const s9=()=>{const[e,t]=C.useState(""),[n,i]=C.useState(null),[r,s]=C.useState([]),o=[{id:"err",text:"Errors"},{id:"wpm",text:"Words PM"},{id:"pcs",text:"Precision"}],a=C.useContext(Nc);C.useEffect(()=>{const h=document.createElement("canvas").getContext("2d").createLinearGradient(100,0,100,380);h.addColorStop(0,"#0EB1D2"),h.addColorStop(1,"#0EB1D200"),i(h)},[]);const l=()=>{console.log("entro"),a.db.collection("Test").where("user","==",a.id).get().then(u=>{let h=[];const d={};u.forEach(p=>{h.push(p.id),e==="err"&&(d[p.id]=p.data().errors),e==="wpm"&&(d[p.id]=p.data().wpm),e==="pcs"&&(d[p.id]=p.data().precision),console.log(p.data())}),h=h.sort().reverse();const f=[];for(let p=0;p<h.length&&(f.push(d[h[p]]),!(p>=5));p++);s(f.reverse())}).catch(u=>{console.log(u)})},c=u=>{t(u)};return C.useEffect(()=>{l()},[e]),R.jsxs("div",{className:"profile",children:[R.jsx("h1",{children:"Profile"}),R.jsxs("div",{className:"content",children:[R.jsx("ul",{className:"radio",children:o.map(u=>R.jsx("li",{className:`option ${e===u.id?"selected":""}`,name:`stat-${u.id}`,children:R.jsxs("button",{onClick:()=>c(u.id),children:[R.jsx("div",{className:"radio-button"}),R.jsx("span",{children:u.text})]})},u.id))}),R.jsx("div",{className:"chart",children:R.jsx(r9,{data:{labels:["1","2","3","4","5"],datasets:[{data:r,fill:!0,backgroundColor:n,tension:0,borderColor:"#0EB1D2",borderWidth:2}]},options:{scales:{x:{grid:{display:!1},ticks:{color:"#FFF",align:"inner"},border:{color:"#FFF",width:2}},y:{grid:{display:!1},ticks:{color:"rgba(255, 255, 255, 0.4)"}}}}})})]})]})},o9="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCABkAGQDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD5/ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAq3pmnXGr6pa6daJvuLqVYY19WY4H86qV7L+z14W/tHxPc+IJ48waamyEkcGZwR+i5/76FAGT8ZPAEHgzUNLm0+PFjcWqxM2P+W0YAYn3YYb67q8wr648c2mn/E34baquksLiaynkMBA586EkED/AHlyB7MDXyPQAUUUUAFFFFABRRRQAUUUUAFFFFABX0l+z/qltqXgjVPD6N9mvIJWdpIuGZZVwH/3gQR+C15J8JvC48VfECwt5Yw9nan7VcgjIKIRhT7Fto+hNdZbE/Cb48mJj5ek3cm3J4X7PMeD9Eb/ANANAGp8EtUufCvjzV/BOpttaV2EYPTz485x/vJz/wABFcB8WfC3/CK+P763ij2Wd0ftVtgcBHJyB9G3D6AV6B8ctJuPDXjPR/G2mDY8joJGHQTx8qT/ALyjH/ATW58YtNtvG3wx07xdpq7mtUW445PkyYDqfdWwfbDUAfNdFFFABRRRQAUUUUAFFFFABRRWl4f0a48Q+ILDSLUfvruZYgcZ2gnlj7AZP4UAe+/BrT7bwX8M9U8ZaimDcI0wHQmGPIUDPdmz9flpfjdo9v4r8A6Z4x00b/s6LIzDq1vLjr/utj6ZaoPjxrFvoHhDSPBmnfu0kVWdAekEWAgP1YZ/4BW5MF+H37PX2XVB51xJZNF5E3I82fJ2Y9F3Hj/ZNAEOksPix8CXspCJNUt4vJyTyLiIAof+BLjJ/wBo1k/ATXItW8O6t4L1MbxCrukT/wAUMnyyLj2Y/wDj9cj8AfFP9keMpNGnkxbaqmxcngTLkr+Y3D6kVf8AFqP8Lvjnba7CpTTb6T7QwUcFHO2ZfqDlgPdaAPLPFOgz+GPE+o6NcZL2kxQMf416q34qQfxrIr3r9ojw0j/2b4rtAGjlUWtwycg8Fo2/Ebhn2WvBaACiiigAooooAKKKKACvcP2dvDH2nV7/AMS3CfurNfs9uT08xhliPovH/A68QVSzBVBJJwAO9fTeuEfCz4DR6chEep3UXkEjr58oJkP/AAFdwB/2RQBw2nD/AIWp8e3umHm6VaS+Z6r9nhOFH0Zsf99Gpv2hvFP2/wAQ2vhy3kzDp6+bOAeszjgH6Lj/AL6NcB4a8d6l4Q0m/ttFSO3vb5lEt8RudI1BwqA8LySSee3TFc1c3M95cyXFzNJNPIxZ5JGLMxPUknqaAHWd3PYXsF5bSGOeCRZY3HVWU5B/MV9J/Eq0h+I3wcsvE9jGDc2sYvAq8kL92ZPwIJ/4BXzLXV+EviFr3g8tDZzifTpciawuBvhkB68fwkjuMe+aAPbvh/cRfEv4LXfhu8kDXlpH9k3N1XHzQP8AhgD/AICa+a7m3ltLqW2nQxzROY5EPVWBwR+Yr0f4NeK4tA+I6Q8wadqpNs0bPu2EnMWT3IOFz6Mas/Hrwv8A2J43/tWCPba6snncDgTLgOPx+Vv+BGgDyqiiigAooooAKKKKALuk6i2kata6ikEU0ltIJUjmBKFl5XIHUZwcd8Va8QeJ9Z8U35vNZ1Ca7l52hzhUHoqjhR9BWRRQAUUUUAFFFFAACQcg4NdHf+N9a1bw0mhapcfbraGRZbeSf5pYSBjAfqVIJGDntjGK5yigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//Z",a9="/assets/saky-d66c3669.png",l9="/assets/jajc-8cd44c9c.png",c9="/assets/crossrelic-ab10f239.png",u9="/assets/pao-2d9c1a95.jpeg",h9="/assets/github-2af1d3a6.svg";const d9=()=>R.jsxs("div",{className:"about",children:[R.jsxs("div",{className:"top",children:[R.jsx("h1",{children:"About"}),R.jsx("p",{children:"Open source web project to practice typing skills using AI-GPT technology"}),R.jsx("button",{children:R.jsx("a",{href:"https://github.com/isaacgh0/AITyping",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:h9,alt:"Project Repository",title:"GitHub Repository"})})})]}),R.jsxs("div",{className:"bottom",children:[R.jsx("h2",{children:"Team"}),R.jsxs("div",{className:"cards",children:[R.jsxs("div",{className:"card",children:[R.jsx("img",{src:o9,alt:"Audictore"}),R.jsx("span",{children:"Audictore"})]}),R.jsxs("div",{className:"card",children:[R.jsx("img",{src:a9,alt:"Saky"}),R.jsx("span",{children:"sAky"})]}),R.jsxs("div",{className:"card",children:[R.jsx("img",{src:l9,alt:"Jajc"}),R.jsx("span",{children:"jAjc"})]}),R.jsxs("div",{className:"card",children:[R.jsx("img",{src:c9,alt:"Crossrelic"}),R.jsx("span",{children:"crossrelic"})]}),R.jsxs("div",{className:"card",children:[R.jsx("img",{src:u9,alt:"Paolina B."}),R.jsx("span",{children:"pAolina b."})]})]})]})]});function tk(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=tk(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function er(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=tk(e))&&(i&&(i+=" "),i+=t);return i}const Al=e=>typeof e=="number"&&!isNaN(e),Os=e=>typeof e=="string",Ze=e=>typeof e=="function",Nh=e=>Os(e)||Ze(e)?e:null,Vg=e=>C.isValidElement(e)||Os(e)||Ze(e)||Al(e);function f9(e,t,n){n===void 0&&(n=300);const{scrollHeight:i,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${n}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,n)})})}function Tp(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:r=!0,collapseDuration:s=300}=e;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:h,isIn:d}=o;const f=i?`${t}--${l}`:t,p=i?`${n}--${l}`:n,m=C.useRef(0);return C.useLayoutEffect(()=>{const _=h.current,g=f.split(" "),y=v=>{v.target===h.current&&(_.dispatchEvent(new Event("d")),_.removeEventListener("animationend",y),_.removeEventListener("animationcancel",y),m.current===0&&v.type!=="animationcancel"&&_.classList.remove(...g))};_.classList.add(...g),_.addEventListener("animationend",y),_.addEventListener("animationcancel",y)},[]),C.useEffect(()=>{const _=h.current,g=()=>{_.removeEventListener("animationend",g),r?f9(_,u,s):u()};d||(c?g():(m.current=1,_.className+=` ${p}`,_.addEventListener("animationend",g)))},[d]),gt.createElement(gt.Fragment,null,a)}}function vT(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const yn={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(i=>i!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},th=e=>{let{theme:t,type:n,...i}=e;return gt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},Ng={info:function(e){return gt.createElement(th,{...e},gt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return gt.createElement(th,{...e},gt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return gt.createElement(th,{...e},gt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return gt.createElement(th,{...e},gt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return gt.createElement("div",{className:"Toastify__spinner"})}};function p9(e){const[,t]=C.useReducer(f=>f+1,0),[n,i]=C.useState([]),r=C.useRef(null),s=C.useRef(new Map).current,o=f=>n.indexOf(f)!==-1,a=C.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:o,getToast:f=>s.get(f)}).current;function l(f){let{containerId:p}=f;const{limit:m}=a.props;!m||p&&a.containerId!==p||(a.count-=a.queue.length,a.queue=[])}function c(f){i(p=>f==null?[]:p.filter(m=>m!==f))}function u(){const{toastContent:f,toastProps:p,staleId:m}=a.queue.shift();d(f,p,m)}function h(f,p){let{delay:m,staleId:_,...g}=p;if(!Vg(f)||function(H){return!r.current||a.props.enableMultiContainer&&H.containerId!==a.props.containerId||s.has(H.toastId)&&H.updateId==null}(g))return;const{toastId:y,updateId:v,data:w}=g,{props:E}=a,x=()=>c(y),T=v==null;T&&a.count++;const I={...E,style:E.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(g).filter(H=>{let[q,et]=H;return et!=null})),toastId:y,updateId:v,data:w,closeToast:x,isIn:!1,className:Nh(g.className||E.toastClassName),bodyClassName:Nh(g.bodyClassName||E.bodyClassName),progressClassName:Nh(g.progressClassName||E.progressClassName),autoClose:!g.isLoading&&(k=g.autoClose,M=E.autoClose,k===!1||Al(k)&&k>0?k:M),deleteToast(){const H=vT(s.get(y),"removed");s.delete(y),yn.emit(4,H);const q=a.queue.length;if(a.count=y==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),q>0){const et=y==null?a.props.limit:1;if(q===1||et===1)a.displayedToast++,u();else{const Y=et>q?q:et;a.displayedToast=Y;for(let G=0;G<Y;G++)u()}}else t()}};var k,M;I.iconOut=function(H){let{theme:q,type:et,isLoading:Y,icon:G}=H,tt=null;const V={theme:q,type:et};return G===!1||(Ze(G)?tt=G(V):C.isValidElement(G)?tt=C.cloneElement(G,V):Os(G)||Al(G)?tt=G:Y?tt=Ng.spinner():(z=>z in Ng)(et)&&(tt=Ng[et](V))),tt}(I),Ze(g.onOpen)&&(I.onOpen=g.onOpen),Ze(g.onClose)&&(I.onClose=g.onClose),I.closeButton=E.closeButton,g.closeButton===!1||Vg(g.closeButton)?I.closeButton=g.closeButton:g.closeButton===!0&&(I.closeButton=!Vg(E.closeButton)||E.closeButton);let j=f;C.isValidElement(f)&&!Os(f.type)?j=C.cloneElement(f,{closeToast:x,toastProps:I,data:w}):Ze(f)&&(j=f({closeToast:x,toastProps:I,data:w})),E.limit&&E.limit>0&&a.count>E.limit&&T?a.queue.push({toastContent:j,toastProps:I,staleId:_}):Al(m)?setTimeout(()=>{d(j,I,_)},m):d(j,I,_)}function d(f,p,m){const{toastId:_}=p;m&&s.delete(m);const g={content:f,props:p};s.set(_,g),i(y=>[...y,_].filter(v=>v!==m)),yn.emit(4,vT(g,g.props.updateId==null?"added":"updated"))}return C.useEffect(()=>(a.containerId=e.containerId,yn.cancelEmit(3).on(0,h).on(1,f=>r.current&&c(f)).on(5,l).emit(2,a),()=>{s.clear(),yn.emit(3,a)}),[]),C.useEffect(()=>{a.props=e,a.isToastActive=o,a.displayedToast=n.length}),{getToastToRender:function(f){const p=new Map,m=Array.from(s.values());return e.newestOnTop&&m.reverse(),m.forEach(_=>{const{position:g}=_.props;p.has(g)||p.set(g,[]),p.get(g).push(_)}),Array.from(p,_=>f(_[0],_[1]))},containerRef:r,isToastActive:o}}function wT(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function ET(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function g9(e){const[t,n]=C.useState(!1),[i,r]=C.useState(!1),s=C.useRef(null),o=C.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=C.useRef(e),{autoClose:l,pauseOnHover:c,closeToast:u,onClick:h,closeOnClick:d}=e;function f(w){if(e.draggable){w.nativeEvent.type==="touchstart"&&w.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),document.addEventListener("touchmove",g),document.addEventListener("touchend",y);const E=s.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=E.getBoundingClientRect(),E.style.transition="",o.x=wT(w.nativeEvent),o.y=ET(w.nativeEvent),e.draggableDirection==="x"?(o.start=o.x,o.removalDistance=E.offsetWidth*(e.draggablePercent/100)):(o.start=o.y,o.removalDistance=E.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function p(w){if(o.boundingRect){const{top:E,bottom:x,left:T,right:I}=o.boundingRect;w.nativeEvent.type!=="touchend"&&e.pauseOnHover&&o.x>=T&&o.x<=I&&o.y>=E&&o.y<=x?_():m()}}function m(){n(!0)}function _(){n(!1)}function g(w){const E=s.current;o.canDrag&&E&&(o.didMove=!0,t&&_(),o.x=wT(w),o.y=ET(w),o.delta=e.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),E.style.transform=`translate${e.draggableDirection}(${o.delta}px)`,E.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function y(){document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",y);const w=s.current;if(o.canDrag&&o.didMove&&w){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return r(!0),void e.closeToast();w.style.transition="transform 0.2s, opacity 0.2s",w.style.transform=`translate${e.draggableDirection}(0)`,w.style.opacity="1"}}C.useEffect(()=>{a.current=e}),C.useEffect(()=>(s.current&&s.current.addEventListener("d",m,{once:!0}),Ze(e.onOpen)&&e.onOpen(C.isValidElement(e.children)&&e.children.props),()=>{const w=a.current;Ze(w.onClose)&&w.onClose(C.isValidElement(w.children)&&w.children.props)}),[]),C.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||_(),window.addEventListener("focus",m),window.addEventListener("blur",_)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",m),window.removeEventListener("blur",_))}),[e.pauseOnFocusLoss]);const v={onMouseDown:f,onTouchStart:f,onMouseUp:p,onTouchEnd:p};return l&&c&&(v.onMouseEnter=_,v.onMouseLeave=m),d&&(v.onClick=w=>{h&&h(w),o.canCloseOnClick&&u()}),{playToast:m,pauseToast:_,isRunning:t,preventExitTransition:i,toastRef:s,eventHandlers:v}}function ek(e){let{closeToast:t,theme:n,ariaLabel:i="close"}=e;return gt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:r=>{r.stopPropagation(),t(r)},"aria-label":i},gt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},gt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function m9(e){let{delay:t,isRunning:n,closeToast:i,type:r="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:d}=e;const f=s||l&&c===0,p={...a,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:f?0:1};l&&(p.transform=`scaleX(${c})`);const m=er("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":u}),_=Ze(o)?o({rtl:u,type:r,defaultClassName:m}):er(m,o);return gt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:_,style:p,[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&i()}})}const y9=e=>{const{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:r}=g9(e),{closeButton:s,children:o,autoClose:a,onClick:l,type:c,hideProgressBar:u,closeToast:h,transition:d,position:f,className:p,style:m,bodyClassName:_,bodyStyle:g,progressClassName:y,progressStyle:v,updateId:w,role:E,progress:x,rtl:T,toastId:I,deleteToast:k,isIn:M,isLoading:j,iconOut:H,closeOnClick:q,theme:et}=e,Y=er("Toastify__toast",`Toastify__toast-theme--${et}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":q}),G=Ze(p)?p({rtl:T,position:f,type:c,defaultClassName:Y}):er(Y,p),tt=!!x||!a,V={closeToast:h,type:c,theme:et};let z=null;return s===!1||(z=Ze(s)?s(V):C.isValidElement(s)?C.cloneElement(s,V):ek(V)),gt.createElement(d,{isIn:M,done:k,position:f,preventExitTransition:n,nodeRef:i},gt.createElement("div",{id:I,onClick:l,className:G,...r,style:m,ref:i},gt.createElement("div",{...M&&{role:E},className:Ze(_)?_({type:c}):er("Toastify__toast-body",_),style:g},H!=null&&gt.createElement("div",{className:er("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!j})},H),gt.createElement("div",null,o)),z,gt.createElement(m9,{...w&&!tt?{key:`pb-${w}`}:{},rtl:T,theme:et,delay:a,isRunning:t,isIn:M,closeToast:h,hide:u,type:c,style:v,className:y,controlledProgress:tt,progress:x||0})))},Ip=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},_9=Tp(Ip("bounce",!0));Tp(Ip("slide",!0));Tp(Ip("zoom"));Tp(Ip("flip"));const Hy=C.forwardRef((e,t)=>{const{getToastToRender:n,containerRef:i,isToastActive:r}=p9(e),{className:s,style:o,rtl:a,containerId:l}=e;function c(u){const h=er("Toastify__toast-container",`Toastify__toast-container--${u}`,{"Toastify__toast-container--rtl":a});return Ze(s)?s({position:u,rtl:a,defaultClassName:h}):er(h,Nh(s))}return C.useEffect(()=>{t&&(t.current=i.current)},[]),gt.createElement("div",{ref:i,className:"Toastify",id:l},n((u,h)=>{const d=h.length?{...o}:{...o,pointerEvents:"none"};return gt.createElement("div",{className:c(u),style:d,key:`container-${u}`},h.map((f,p)=>{let{content:m,props:_}=f;return gt.createElement(y9,{..._,isIn:r(_.toastId),style:{..._.style,"--nth":p+1,"--len":h.length},key:`toast-${_.key}`},m)}))}))});Hy.displayName="ToastContainer",Hy.defaultProps={position:"top-right",transition:_9,autoClose:5e3,closeButton:ek,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Og,Yr=new Map,nl=[],v9=1;function nk(){return""+v9++}function w9(e){return e&&(Os(e.toastId)||Al(e.toastId))?e.toastId:nk()}function Pl(e,t){return Yr.size>0?yn.emit(0,e,t):nl.push({content:e,options:t}),t.toastId}function hf(e,t){return{...t,type:t&&t.type||e,toastId:w9(t)}}function eh(e){return(t,n)=>Pl(t,hf(e,n))}function St(e,t){return Pl(e,hf("default",t))}St.loading=(e,t)=>Pl(e,hf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),St.promise=function(e,t,n){let i,{pending:r,error:s,success:o}=t;r&&(i=Os(r)?St.loading(r,n):St.loading(r.render,{...n,...r}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,h,d)=>{if(h==null)return void St.dismiss(i);const f={type:u,...a,...n,data:d},p=Os(h)?{render:h}:h;return i?St.update(i,{...f,...p}):St(p.render,{...f,...p}),d},c=Ze(e)?e():e;return c.then(u=>l("success",o,u)).catch(u=>l("error",s,u)),c},St.success=eh("success"),St.info=eh("info"),St.error=eh("error"),St.warning=eh("warning"),St.warn=St.warning,St.dark=(e,t)=>Pl(e,hf("default",{theme:"dark",...t})),St.dismiss=e=>{Yr.size>0?yn.emit(1,e):nl=nl.filter(t=>e!=null&&t.options.toastId!==e)},St.clearWaitingQueue=function(e){return e===void 0&&(e={}),yn.emit(5,e)},St.isActive=e=>{let t=!1;return Yr.forEach(n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)}),t},St.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const n=function(i,r){let{containerId:s}=r;const o=Yr.get(s||Og);return o&&o.getToast(i)}(e,t);if(n){const{props:i,content:r}=n,s={delay:100,...i,...t,toastId:t.toastId||e,updateId:nk()};s.toastId!==e&&(s.staleId=e);const o=s.render||r;delete s.render,Pl(o,s)}},0)},St.done=e=>{St.update(e,{progress:1})},St.onChange=e=>(yn.on(4,e),()=>{yn.off(4,e)}),St.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},St.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},yn.on(2,e=>{Og=e.containerId||e,Yr.set(Og,e),nl.forEach(t=>{yn.emit(0,t.content,t.options)}),nl=[]}).on(3,e=>{Yr.delete(e.containerId||e),Yr.size===0&&yn.off(0).off(1).off(5)});const E9=()=>{const[e,t]=C.useState(""),n=C.useContext(Nc),i=()=>{t(""),document.getElementById("user-message").focus()},r=o=>{t(o.currentTarget.value)},s=()=>{n.db.collection("messages").add({id:n.id,message:e}).then(o=>{i(),St.success("Mensaje enviado")}).catch(o=>{console.error(o),St.error("Error al enviar el mensaje")})};return R.jsxs("div",{className:"contact",children:[R.jsx("h1",{children:"Contact"}),R.jsx("p",{children:"Write us a message with your opinion, suggestion or disagreement, no names or unnecessaries fields"}),R.jsxs("div",{className:"message",children:[R.jsx("textarea",{name:"user-message",id:"user-message",placeholder:"Message",onInput:r,value:e}),R.jsxs("div",{className:"actions",children:[R.jsx("button",{className:"ghost",onClick:i,children:"Clear"}),R.jsx("button",{onClick:s,children:"Send"})]})]})]})};const x9=()=>R.jsx("footer",{children:R.jsx("span",{children:" All rights reserved | Coded by Saky"})});const T9=()=>{const e=C.useContext(Nc);return C.useEffect(()=>{if(document.cookie===""){const n=F2(),i=new Date;i.setTime(i.getTime()+5*24*60*60*1e3);const r=`expires=${i.toUTCString()};`;document.cookie=`id=${n};${r}path=/`,e.setID(n)}else{const n=document.cookie.split("=")[1];e.setID(n)}},[]),R.jsxs(R.Fragment,{children:[R.jsx(Hy,{position:"top-right",autoClose:3e3,hideProgressBar:!1,draggable:!1,closeOnClick:!0,pauseOnHover:!0,theme:"dark"}),R.jsx(hM,{}),R.jsxs("main",{children:[R.jsx(K4,{}),R.jsx(s9,{}),R.jsx(d9,{}),R.jsx(E9,{})]}),R.jsx(x9,{})]})},I9=()=>R.jsx(H4,{children:R.jsx(jM,{children:R.jsx(T9,{})})}),b9=Lg.createRoot(document.getElementById("root"));b9.render(R.jsx(oM,{children:R.jsx(gt.StrictMode,{children:R.jsx(I9,{})})}));
